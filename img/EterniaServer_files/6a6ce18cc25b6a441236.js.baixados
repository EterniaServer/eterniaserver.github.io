(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1423:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.usePremiumTrialExperiment=function(){var e=(0,a.useStateFromStores)([u.default],(function(){return u.default.isUserEligible(l.PREMIUM_SUBSCRIPTION_TRIAL_ID)}));return n.useEffect((function(){e&&f.trigger({})}),[e]),f.useExperiment({},{disable:!e})},t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),a=r(5),i=s(r(852)),o=s(r(300)),u=s(r(5212)),l=r(1);function s(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}var f=(0,i.default)({id:o.default.PREMIUM_TRIAL_2,label:"Premium Trial Experiment",kind:"user",defaultConfig:{trialId:null,showPremiumTab:!1},treatments:[{id:1,label:"Premium Trial Offer",config:{trialId:l.PREMIUM_SUBSCRIPTION_TRIAL_ID,showPremiumTab:!0}}]});var d=f;t.default=d},4928:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=p(r(15)),a=p(r(26)),i=p(r(3)),o=p(r(5163)),u=p(r(16)),l=r(143),s=p(r(856)),c=r(837),f=r(1),d=p(r(6));function p(e){return e&&e.__esModule?e:{default:e}}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e,t){void 0===e&&(e=null),void 0===t&&(t=null),i.default.dispatch({type:f.ActionTypes.USER_SETTINGS_MODAL_INIT,section:e,subsection:t})}var m={open:function(e,t,r){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r={openWithoutBackstack:!1}),v(e,t),(0,c.pushLayer)(f.Layers.USER_SETTINGS)},init:v,close:function(){var e=o.default.onClose;i.default.dispatch({type:f.ActionTypes.USER_SETTINGS_MODAL_CLOSE}),null!=e&&e()},setSection:function(e,t){void 0===t&&(t=null),i.default.dispatch({type:f.ActionTypes.USER_SETTINGS_MODAL_SET_SECTION,section:e,subsection:t})},updateAccount:function(e){i.default.dispatch({type:f.ActionTypes.USER_SETTINGS_MODAL_UPDATE_ACCOUNT,settings:e})},submitComplete:function(){i.default.dispatch({type:f.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_COMPLETE})},reset:function(){i.default.dispatch({type:f.ActionTypes.USER_SETTINGS_MODAL_RESET})},saveAccountChanges:function(e,t){var r=this;i.default.dispatch({type:f.ActionTypes.USER_SETTINGS_MODAL_SUBMIT});var o=e.username,c=e.email,p=e.password,v=e.avatar,m=e.newPassword,E=e.discriminator,T=t.close;return(0,s.default)({title:d.default.Messages.TWO_FA_CHANGE_ACCOUNT},(function(e){var t=_({username:o,email:c,password:p,avatar:v,new_password:m},e),r=E?_({},t,{discriminator:E}):_({},t),i=a.default.get(f.DEVICE_TOKEN);null!=f.DEVICE_PUSH_PROVIDER&&null!=i&&(r.push_provider=f.DEVICE_PUSH_PROVIDER,r.push_token=i);var u=a.default.get(f.DEVICE_VOIP_TOKEN);return null!=f.DEVICE_PUSH_VOIP_PROVIDER&&null!=u&&(r.push_voip_provider=f.DEVICE_PUSH_VOIP_PROVIDER,r.push_voip_token=u),n.default.patch({url:f.Endpoints.ME,body:r,oldFormErrors:!0})}),{checkEnabled:!1,hooks:{onEarlyClose:function(){return i.default.dispatch({type:f.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_FAILURE,errors:{}})}}}).then((function(e){var t=e.body,n=t.token;return u.default.track(f.AnalyticEvents.USER_AVATAR_UPDATED,{animated:(0,l.hasAnimatedAvatar)(t)}),delete t.token,i.default.dispatch({type:f.ActionTypes.UPDATE_TOKEN,token:n}),i.default.dispatch({type:f.ActionTypes.CURRENT_USER_UPDATE,user:t}),T?r.close():r.submitComplete(),e}),(function(e){return i.default.dispatch({type:f.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_FAILURE,errors:e.body}),e}))}};t.default=m},5149:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchUserTrialEligibility=function(e){return s.apply(this,arguments)},t.userTrialViewed=function(e){a.default.dispatch({type:i.ActionTypes.BILLING_USER_TRIAL_VIEW,trialId:e})};var n=o(r(15)),a=o(r(3)),i=r(1);function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r,n,a,i,o){try{var u=e[i](o),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,a)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){u(i,n,a,o,l,"next",e)}function l(e){u(i,n,a,o,l,"throw",e)}o(void 0)}))}}function s(){return(s=l(regeneratorRuntime.mark((function e(t){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.default.get({url:i.Endpoints.USER_TRIAL_ELIGIBILITY(t),oldFormErrors:!0});case 3:r=e.sent,o=r.body,a.default.dispatch({type:i.ActionTypes.BILLING_USER_TRIAL_ELIGIBILITY_FETCH_SUCCESS,trialId:t,eligible:o.eligible}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a.default.dispatch({type:i.ActionTypes.BILLING_USER_TRIAL_ELIGIBILITY_FETCH_SUCCESS,trialId:t,eligible:!1});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}},5163:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(r(7)),a=l(r(5)),i=l(r(3)),o=l(r(24)),u=r(1);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var f,d,p,_,v=u.FormStates.CLOSED,m={},E={},T=!1,S=!1,y=null;function I(e){var t,r=o.default.getCurrentUser();if(null==r)return O();f=e.section||f,e.subsection&&null!=f&&(m[f]=e.subsection),S=!!e.openWithoutBackstack,v=u.FormStates.OPEN,E={},(t={})[u.UserSettingsSections.ACCOUNT]={userId:r.id,username:r.username,discriminator:r.discriminator,email:r.email,avatar:r.avatar,password:"",newPassword:null,claimed:r.isClaimed()},p=c({},d=t),y=e.onClose||null}function O(){v=u.FormStates.CLOSED,T=!1,d=null,p=null,f=null,m={},y=null}function h(){v=u.FormStates.OPEN,E={}}var b=new(function(e){var t,r;function a(){return e.apply(this,arguments)||this}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i,l,c,I=a.prototype;return I.initialize=function(){this.waitFor(o.default)},I.hasChanges=function(){return null!=p&&null!=d&&(!(!this.isOpen()&&_!==u.DrawerTabTypes.USER_SETTINGS)&&!n.default.isEqual(p,d))},I.isOpen=function(){return T},I.getSection=function(){return f},I.shouldOpenWithoutBackstack=function(){return S},I.getProps=function(){return{submitting:v===u.FormStates.SUBMITTING,section:f,subsection:null!=m&&null!=f?m[f]:null,settings:p,errors:E,hasChanges:this.hasChanges(),openWithoutBackstack:S}},i=a,(l=[{key:"onClose",get:function(){return y}}])&&s(i.prototype,l),c&&s(i,c),a}(a.default.Store))(i.default,{USER_SETTINGS_MODAL_OPEN:function(e){T=!0,I(e)},USER_SETTINGS_MODAL_INIT:I,USER_SETTINGS_MODAL_CLOSE:function(e){return O()},LOGOUT:function(e){return O()},USER_SETTINGS_MODAL_SUBMIT:function(e){v=u.FormStates.SUBMITTING},USER_SETTINGS_MODAL_SUBMIT_FAILURE:function(e){if(v!==u.FormStates.SUBMITTING)return!1;v=u.FormStates.OPEN,f=u.UserSettingsSections.ACCOUNT,E=e.errors||{}},USER_SETTINGS_MODAL_SET_SECTION:function(e){f=e.section,e.subsection&&(m[f]=e.subsection)},USER_SETTINGS_MODAL_UPDATE_ACCOUNT:function(e){var t=e.settings;null==p&&(p={});var r=p[u.UserSettingsSections.ACCOUNT];p[u.UserSettingsSections.ACCOUNT]=c({},r,{},t)},USER_SETTINGS_MODAL_SUBMIT_COMPLETE:function(e){return h()},USER_SETTINGS_MODAL_RESET:function(e){return r=o.default.getCurrentUser(),h(),void(r&&((t={})[u.UserSettingsSections.ACCOUNT]={userId:r.id,username:r.username,discriminator:r.discriminator,email:r.email,avatar:r.avatar,password:"",newPassword:null,claimed:r.isClaimed()},p=c({},d=t)));var t,r},DRAWER_SELECT_TAB:function(e){return _=e.tab,null==f&&_===u.DrawerTabTypes.USER_SETTINGS&&I({type:u.ActionTypes.USER_SETTINGS_MODAL_INIT,section:null,subsection:null,openWithoutBackstack:!1})}});t.default=b},5212:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=u(r(5)),a=u(r(3)),i=r(5149),o=r(1);function u(e){return e&&e.__esModule?e:{default:e}}var l={};var s=new(function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.isUserEligible=function(e){var t=l[e];return null!=t&&t},a.hasFetchedEligibility=function(e){return null!=l[e]},n}(n.default.Store))(a.default,{CONNECTION_OPEN:function(e){null==l[o.PREMIUM_SUBSCRIPTION_TRIAL_ID]&&(0,i.fetchUserTrialEligibility)(o.PREMIUM_SUBSCRIPTION_TRIAL_ID)},BILLING_USER_TRIAL_ELIGIBILITY_FETCH_SUCCESS:function(e){var t=e.trialId,r=e.eligible;l[t]=r},LOGOUT:function(e){l={}}});t.default=s},7114:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformNativeFile=function(e,t){if(e instanceof File)return e;return f(e.data,e.filename,t)},t.makeFile=f,t.classifyFile=function(e){return p(e.name,e.type)},t.classifyFileName=p,t.sizeString=function(e){return n.default.filesize(e)},t.maxFileSize=_,t.anyFileTooLarge=function(e,t){var r=_(t);return Array.from(e).some((function(e){return e.size>r}))};var n=c(r(7541)),a=c(r(7)),i=c(r(46)),o=c(r(34)),u=c(r(24)),l=c(r(117)),s=r(1);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){if(null==t&&(t="unknown",e instanceof Blob))switch(e.type){case"image/png":t+=".png"}if(null==n){e instanceof Blob&&(n=e.type);var a=r(8362);n=n||a.lookup(t)}if("function"!=typeof File||"Microsoft Edge"===i.default.name){var o=new Date,u=0;return null!=e.size&&"number"==typeof e.size?u=e.size:null!=e.byteLength&&"number"==typeof e.byteLength&&(u=e.byteLength),{lastModified:o.getTime(),lastModifiedDate:o,name:t,size:u,type:n}}return new File([e],t,{type:n})}var d=[{reType:/^image\/vnd.adobe.photoshop/,klass:"photoshop"},{reType:/^image\/svg\+xml/,klass:"webcode"},{reType:/^image\//,klass:"image"},{reType:/^video\//,klass:"video"},{reName:/\.pdf$/,klass:"acrobat"},{reName:/\.ae/,klass:"ae"},{reName:/\.sketch$/,klass:"sketch"},{reName:/\.ai$/,klass:"ai"},{reName:/\.(?:rar|zip|7z|tar|tar\.gz)$/,klass:"archive"},{reName:/\.(?:c\+\+|cpp|cc|c|h|hpp|mm|m|json|js|rb|rake|py|asm|fs|pyc|dtd|cgi|bat|rss|java|graphml|idb|lua|o|gml|prl|sls|conf|cmake|make|sln|vbe|cxx|wbf|vbs|r|wml|php|bash|applescript|fcgi|yaml|ex|exs|sh|ml|actionscript)$/,klass:"code"},{reName:/\.(?:txt|rtf|doc|docx|md|pages|ppt|pptx|pptm|key|log)$/,klass:"document"},{reName:/\.(?:xls|xlsx|numbers|csv)$/,klass:"spreadsheet"},{reName:/\.(?:html|xhtml|htm|js|xml|xls|xsd|css|styl)$/,klass:"webcode"},{reName:/\.(?:mp3|ogg|wav|flac)$/,klass:"audio"}];function p(e,t){e=e?e.toLowerCase():"";var r=a.default.find(d,(function(r){return r.reType&&t?r.reType.test(t):!(!r.reName||!e)&&r.reName.test(e)}));return r?r.klass:"unknown"}function _(e){var t=u.default.getCurrentUser(),r=l.default.getUserMaxFileSize(t);if(null==e)return r;var n=o.default.getGuild(e),a=null!=n?s.PremiumGuildLimits[n.premiumTier].fileSize:s.MAX_ATTACHMENT_SIZE;return Math.max(a,r)}},7340:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=E();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),i=m(r(9)),o=m(r(290)),u=m(r(4928)),l=r(1423),s=m(r(307)),c=m(r(116)),f=m(r(16)),d=r(1),p=m(r(6)),_=m(r(6397)),v=m(r(6352));function m(e){return e&&e.__esModule?e:{default:e}}function E(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return E=function(){return e},e}function T(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var S=function(){var e=(0,l.usePremiumTrialExperiment)()[0].trialId;return T("div",{className:_.default.premiumPromo},void 0,T(c.default,{onClick:function(){f.default.track(d.AnalyticEvents.PREMIUM_PROMOTION_OPENED,{location_page:null,location_section:d.AnalyticsSections.FILE_UPLOAD_POPOUT}),o.default.pop(),u.default.open(d.UserSettingsSections.PREMIUM)},className:_.default.content},void 0,null!=e?p.default.Messages.PREMIUM_UPLOAD_PROMO_TRIAL.format({maxUploadPremium:p.default.Messages.FILE_UPLOAD_LIMIT_PREMIUM_TIER_2}):p.default.Messages.PREMIUM_UPLOAD_PROMO.format({maxUploadPremium:p.default.Messages.FILE_UPLOAD_LIMIT_PREMIUM_TIER_2}),T("img",{alt:"",className:_.default.navArrow,src:r(7816)})))};S.displayName="PremiumPromo";var y=T(S,{}),I=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.render=function(){var e=this.props.promo;return T("div",{className:v.default.uploadModalIn},void 0,T("div",{className:(0,i.default)(v.default.uploadDropModal,v.default.error)},void 0,T("div",{className:v.default.inner},void 0,T("div",{className:v.default.icons},void 0,T("div",{className:v.default.wrapOne},void 0,T("div",{className:(0,i.default)(v.default.icon,v.default.one)})),T("div",{className:v.default.wrapThree},void 0,T("div",{className:(0,i.default)(v.default.icon,v.default.three)})),T("div",{className:v.default.wrapTwo},void 0,T("div",{className:(0,i.default)(v.default.icon,v.default.two)}))),T("div",{className:v.default.title},void 0,this.props.title),T("div",{className:v.default.instructions},void 0,this.props.help),e?y:null)))},n}(a.Component);I.displayName="UploadError",I.modalConfig={backdropStyle:s.default.Styles.DARK,backdropInstant:!0};var O=I;t.default=O},7381:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=p(r(0)),a=f(r(8361)),i=f(r(290)),o=f(r(7340)),u=f(r(87)),l=p(r(7114)),s=f(r(14)),c=f(r(6));function f(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e){var t=["openFile"];e.multiple&&t.push("multiSelections");var r=e.filters;u.default.fileManager.openFiles({properties:t,filters:r},e.maxSize,l.makeFile).then((function(t){null!=(t=t.map((function(e){return l.transformNativeFile(e)})))&&e.onChange({stopPropagation:function(){return null},preventDefault:function(){return null},currentTarget:{files:t}})}),(function(t){if("ETOOLARGE"!==t.code)throw t;i.default.push(o.default,{title:c.default.Messages.UPLOAD_AREA_TOO_LARGE_TITLE,help:c.default.Messages.UPLOAD_AREA_TOO_LARGE_HELP.format({maxSize:l.sizeString(e.maxSize)})})}))}var m=function(e){var t,r;function i(t){var r;return(r=e.call(this,t)||this).setRef=r.setRef.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=i.prototype;return o.activateUploadDialogue=function(){if(this._ref)return this._ref.activateUploadDialogue()},o.setRef=function(e){this._ref=e},o.render=function(){return n.createElement(a.default,_({ref:this.setRef,handleNativeClick:v,embedded:s.default.isDesktop()},this.props))},i}(n.Component);m.displayName="FileInput";var E=m;t.default=E},7816:function(e,t,r){e.exports=r.p+"c83861b2303b7ee40c419e9590d57f11.svg"}}]);
//# sourceMappingURL=6a6ce18cc25b6a441236.js.map