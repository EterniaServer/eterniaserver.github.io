(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{10501:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=(r=n(46))&&r.__esModule?r:{default:r},i=n(579);var o={dump:function(e){var t;performance.memory&&(t={jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize});var n={browser:{name:a.default.name,version:a.default.version},os:{name:a.default.os.family,version:a.default.os.version},memory:t};e(n)},getTimeSinceNavigationStart:function(){return Date.now()-i.navigationStart}};t.default=o},10502:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=v(n(0)),i=_(n(46)),o=_(n(5)),u=_(n(282)),l=_(n(8334)),s=n(1419),c=_(n(20)),d=v(n(549)),f=n(1),p=_(n(6)),h=_(n(829));function _(e){return e&&e.__esModule?e:{default:e}}function E(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return E=function(){return e},e}function v(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=E();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function y(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}o.default.initialize();var m=y(d.AuthSpinner,{}),g=function(e){var t,r;function a(){return e.apply(this,arguments)||this}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=a.prototype;return o.componentDidMount=function(){var e=(0,l.default)(this.props.location);null!=e&&u.default.authorizeIPAddress(e),(0,s.trackAppUIViewed)("authorize_ip")},o.renderLoginButton=function(){if("Android"===i.default.os.family||"iOS"===i.default.os.family)return null;var e=this.props.transitionTo;return y(d.Button,{onClick:function(){return e(f.Routes.LOGIN)}},void 0,p.default.Messages.LOGIN)},o.renderFailed=function(){return y(d.default,{},void 0,y("img",{alt:"",src:n(10503),className:h.default.marginBottom20}),y(d.Title,{className:h.default.marginBottom8},void 0,p.default.Messages.AUTHORIZATION_EXPIRED),y(d.SubTitle,{className:h.default.marginBottom40},void 0,p.default.Messages.AUTH_EXPIRED_SUGGESTION),this.renderLoginButton())},o.renderSucceeded=function(){return y(d.default,{},void 0,y("img",{alt:"",src:n(10504),className:h.default.marginBottom20}),y(d.Title,{className:h.default.marginBottom8},void 0,p.default.Messages.IP_AUTHORIZATION_SUCCEEDED),y(d.SubTitle,{className:h.default.marginBottom40},void 0,p.default.Messages.AUTH_IP_AUTH_SUCCEEDED_SUGGESTION),this.renderLoginButton())},o.renderDefault=function(){return y(d.default,{},void 0,m,y(d.Title,{},void 0,p.default.Messages.AUTHORIZING))},o.render=function(){var e=this.props,t=e.verifyFailed,n=e.verifySucceeded;return t?this.renderFailed():n?this.renderSucceeded():this.renderDefault()},a}(a.PureComponent);g.displayName="AuthorizeIPAddress",g.defaultProps={transitionTo:function(t){return e.location.assign(t)}};var T=o.default.connectStores([c.default],(function(){return{verifyFailed:c.default.didVerifyFail(),verifySucceeded:c.default.didVerifySucceed()}}))(g);t.default=T}).call(this,n(32))},10503:function(e,t,n){e.exports=n.p+"5ed6422f4a60342227db5d2678ecf911.svg"},10504:function(e,t,n){e.exports=n.p+"004dd8db75dd498bf03f6b0e7fcb51fd.svg"},10505:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=y(n(0)),i=n(1414),o=E(n(5)),u=E(n(15)),l=E(n(8334)),s=n(1419),c=E(n(147)),d=E(n(5068)),f=y(n(549)),p=n(1),h=E(n(6)),_=E(n(829));function E(e){return e&&e.__esModule?e:{default:e}}function v(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return v=function(){return e},e}function y(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=v();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}o.default.initialize();var g=m(f.default,{},void 0,m(f.AuthSpinner,{})),T=function(e){var t,r;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={busy:!0,success:!1,user:null},t}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=a.prototype;return o.componentDidMount=function(){var e=this,t=(0,l.default)(this.props.location),n=(0,i.parse)(this.props.location.search);u.default.post({url:p.Endpoints.DISABLE_EMAIL_NOTIFICATIONS,body:{token:t,pixel_uuid:n.hash},oldFormErrors:!0}).then((function(t){var n=t.body.user,r=new c.default(n);e.setState({success:!0,busy:!1,user:r})}),(function(){return e.setState({success:!1,busy:!1})})),(0,s.trackAppUIViewed)("disable_email_notifications")},o.renderBusy=function(){return g},o.renderSuccess=function(){var e=this.props,t=e.defaultRoute,n=e.transitionTo,r=this.state.user;return m(f.default,{},void 0,m(f.Avatar,{src:r?r.getAvatarURL():null,size:f.Avatar.Sizes.DEPRECATED_SIZE_100,className:_.default.marginBottom20}),m(f.Title,{className:_.default.marginBottom8},void 0,h.default.Messages.AUTH_DISABLE_EMAIL_NOTIFICATIONS_SUCCESS_HEADER),m(f.SubTitle,{},void 0,h.default.Messages.AUTH_DISABLE_EMAIL_NOTIFICATIONS_SUCCESS_BODY),m(f.Button,{className:_.default.marginTop40,onClick:function(){return n(t)}},void 0,h.default.Messages.CONTINUE_TO_WEBAPP))},o.renderError=function(){var e=this.props,t=e.defaultRoute,r=e.transitionTo;return m(f.default,{},void 0,m(f.Image,{src:n(10506),className:_.default.marginBottom20}),m(f.Title,{className:_.default.marginBottom8},void 0,h.default.Messages.AUTH_DISABLE_EMAIL_NOTIFICATIONS_FAILURE_HEADER),m(f.SubTitle,{},void 0,h.default.Messages.AUTH_DISABLE_EMAIL_NOTIFICATIONS_FAILURE_BODY),m(f.Button,{className:_.default.marginTop40,onClick:function(){return r(t)}},void 0,h.default.Messages.CONTINUE_TO_WEBAPP))},o.render=function(){var e=this.state,t=e.busy,n=e.success;return t?this.renderBusy():n?this.renderSuccess():this.renderError()},a}(a.PureComponent);T.displayName="DisableEmailNotifications",T.defaultProps={transitionTo:function(t){return e.location.assign(t)}};var A=o.default.connectStores([d.default],(function(){return{defaultRoute:d.default.defaultRoute}}))(T);t.default=A}).call(this,n(32))},10506:function(e,t,n){e.exports=n.p+"4dfc23421736b1eaf2a19bcb16633bad.svg"},10507:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=P(n(0)),o=b(n(9)),u=b(n(5)),l=b(n(282)),s=P(n(5076)),c=P(n(7378)),d=P(n(886)),f=b(n(8925)),p=n(1419),h=b(n(20)),_=b(n(5068)),E=b(n(7304)),v=b(n(136)),y=b(n(343)),m=P(n(549)),g=P(n(800)),T=b(n(190)),A=b(n(5114)),I=b(n(1452)),S=b(n(7533)),O=n(1),C=b(n(6)),N=b(n(829));function b(e){return e&&e.__esModule?e:{default:e}}function M(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return M=function(){return e},e}function P(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=M();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function R(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function L(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){L(i,r,a,o,u,"next",e)}function u(e){L(i,r,a,o,u,"throw",e)}o(void 0)}))}}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}u.default.initialize(),function(e){e.REGISTER="register",e.LOGIN="login"}(a||(a={}));var U=R(m.AuthSpinner,{}),k=function(e){var t,r;function i(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={error:null,continueOnWeb:!1,currentUser:null,sentVerification:!1,fetchingUser:!1},t.refreshUser=function(){t.setState({fetchingUser:!0}),d.fetchCurrentUser({withAnalyticsToken:!0}).then((function(e){return t.setState({currentUser:e,fetchingUser:!1})})).catch((function(){return t.setState({fetchingUser:!1})}))},t.handleContinue=function(){(0,t.props.transitionTo)(O.Routes.APPLICATION_LIBRARY)},t.handleLogout=function(){var e=t.props.match.params.giftCode;l.default.logout(O.Routes.GIFT_CODE_LOGIN(e))},t.handleResendVerification=function(){l.default.verifyResend(),t.setState({sentVerification:!0})},t.handleAccept=D(regeneratorRuntime.mark((function e(){var n,r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,r=n.transitionTo,null!=(a=n.giftCode)){e.next=3;break}throw new Error("Trying to accept gift before resolve");case 3:return i=t.getCode(),e.prev=4,t.setState({error:null}),e.next=8,s.redeemGiftCode(i);case 8:a.premiumSubscriptionType===O.PremiumTypes.TIER_2?r(O.Routes.APPLICATION_STORE):a.premiumSubscriptionType===O.PremiumTypes.TIER_1?r(O.Routes.ACTIVITY):r(O.Routes.APPLICATION_LIBRARY),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t.setState({error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),t}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u,f,h,_=i.prototype;return _.componentDidMount=function(){this.props.authenticated&&this.handleAuthenticated(),(0,p.trackAppUIViewed)("gift_code")},_.componentDidUpdate=function(e){var t=this.props.authenticated,n=this.getCode();n!==this.getCode(e)&&s.resolveGiftCode(n,!0,!0),t&&!e.authenticated&&this.handleAuthenticated(),!t&&e.authenticated&&this.setState({currentUser:null})},_.handleAuthenticated=function(){var e=this.state.currentUser;c.fetchLibrary(),null==e&&this.refreshUser()},_.getCode=function(e){return void 0===e&&(e=this.props),e.match.params.giftCode},_.getMode=function(e){return void 0===e&&(e=this.props),e.login?a.LOGIN:a.REGISTER},_.getErrorMessage=function(e){var t=this.props.libraryApplication,n=this.state.error,r=null!=n?n.code:null;return r===O.AbortCodes.INVALID_GIFT_SELF_REDEMPTION?C.default.Messages.GIFT_CONFIRMATION_BODY_SELF_GIFT_NO_PAYMENT:null!=t||r===O.AbortCodes.INVALID_GIFT_REDEMPTION_OWNED?C.default.Messages.GIFT_CODE_AUTH_HELP_TEXT_OWNED.format({libraryLink:O.Routes.APPLICATION_LIBRARY}):e.isClaimed||r===O.AbortCodes.INVALID_GIFT_REDEMPTION_EXHAUSTED?C.default.Messages.GIFT_CODE_AUTH_HELP_TEXT_CLAIMED:null},_.renderSpinner=function(e){return R(m.default,{},void 0,R(m.Title,{},void 0,e),U)},_.renderExpiredInvite=function(){var e=this.props,t=e.defaultRoute,r=e.transitionTo;return R(m.default,{},void 0,R(m.Image,{src:n(8926),className:N.default.marginBottom8}),R(m.Title,{className:(0,o.default)(N.default.marginTop8,N.default.marginBottom8)},void 0,C.default.Messages.GIFT_CODE_AUTH_INVALID_TITLE),R(m.SubTitle,{},void 0,C.default.Messages.GIFT_CODE_AUTH_INVALID_BODY),R(m.Button,{className:(0,o.default)(N.default.marginTop40,N.default.marginBottom8),onClick:function(){return r(t)}},void 0,C.default.Messages.CONTINUE_TO_WEBAPP),R(m.Button,{onClick:function(){return window.open(T.default.getArticleURL(O.HelpdeskArticles.GIFTING),"_blank")},look:m.Button.Looks.LINK},void 0,C.default.Messages.GIFT_CODE_AUTH_INVALID_TIP))},_.renderAppOpened=function(){var e=this;return R(m.default,{},void 0,R(m.Title,{className:N.default.marginBottom8},void 0,C.default.Messages.APP_OPENED_TITLE),R(m.SubTitle,{},void 0,C.default.Messages.APP_OPENED_BODY),R(m.Button,{className:N.default.marginTop40,onClick:function(){return e.setState({continueOnWeb:!0})}},void 0,C.default.Messages.GIFT_CODE_AUTH_CONTINUE_IN_BROWSER))},_.renderVerification=function(e){var t=this.state.sentVerification;return R(m.default,{},void 0,R(m.Image,{src:n(9193),className:N.default.marginBottom8}),R(m.Title,{},void 0,C.default.Messages.GIFT_CODE_AUTH_VERIFICATION_TITLE.format({username:e.username})),R(m.SubTitle,{className:N.default.marginTop20},void 0,C.default.Messages.GIFT_CODE_AUTH_HELP_TEXT_VERIFICATION_REQUIRED),R(m.Button,{disabled:t,className:N.default.marginTop40,onClick:this.handleResendVerification},void 0,t?C.default.Messages.GIFT_CODE_AUTH_VERIFICATION_SENT:C.default.Messages.RESEND_VERIFICATION_EMAIL),R(m.Button,{look:m.Button.Looks.LINK,onClick:this.refreshUser,className:N.default.marginTop8},void 0,C.default.Messages.GIFT_CODE_AUTH_CHECK_VERIFICATION_AGAIN))},_.renderAuthenticated=function(e,t){var n=this.getErrorMessage(e),r=null!=n;return R(m.default,{},void 0,R(A.default,{giftCode:e}),R(m.Button,{disabled:r,className:N.default.marginTop40,onClick:this.handleAccept},void 0,C.default.Messages.GIFT_CODE_AUTH_ACCEPT),null!=n?R(m.SubTitle,{className:N.default.marginTop20},void 0,n):R(m.SubText,{className:N.default.marginTop20},void 0,C.default.Messages.GIFT_CODE_AUTH_LOGGED_IN_AS.format({userTag:t.tag,onLogoutClick:this.handleLogout})))},_.render=function(){var e=this.props,t=e.nativeAppState,n=e.sku,r=e.authenticated,i=e.giftCode,o=e.isResolved,u=e.isAccepting,l=e.transitionTo,s=e.location,c=this.state,d=c.fetchingUser,f=c.continueOnWeb;if(t===O.NativeAppStates.OPEN&&!f)return this.renderAppOpened();if(t===O.NativeAppStates.OPENING)return this.renderSpinner(C.default.Messages.APP_OPENING);if(u)return this.renderSpinner(C.default.Messages.GIFT_CODE_AUTH_ACCEPTING);if(null==i)return o?this.renderExpiredInvite():this.renderSpinner(C.default.Messages.GIFT_CODE_AUTH_RESOLVING);if(o){if(r){var p=this.state.currentUser;return d||null==p?this.renderSpinner(C.default.Messages.GIFT_CODE_AUTH_FETCHING_USER):this.requiresVerification&&null!=p?this.renderVerification(p):this.renderAuthenticated(i,p)}return this.getMode()===a.LOGIN?R(I.default,{giftCodeSKU:n,giftCode:i,transitionTo:l,location:s}):R(S.default,{giftCodeSKU:n,giftCode:i,transitionTo:l,location:s})}return null},u=i,(f=[{key:"requiresVerification",get:function(){var e=this.state.currentUser;return null!=e&&!e.verified}}])&&w(u.prototype,f),h&&w(u,h),i}(i.PureComponent);k.displayName="GiftCode";var G=u.default.connectStores([E.default,v.default,h.default,y.default,_.default,f.default],(function(e){var t=e.match.params.giftCode,n=E.default.get(t),r=null!=n?y.default.get(n.skuId):null;return{giftCode:n,sku:r,libraryApplication:null!=r&&null!=n?g.firstLibraryApplicationForGiftCode(n,r,v.default):null,authenticated:h.default.isAuthenticated(),defaultRoute:_.default.defaultRoute,isResolved:E.default.getIsResolved(t),isAccepting:E.default.getIsAccepting(t),libraryApplicationsFetched:v.default.fetched,nativeAppState:f.default.getState(t)}}))(k);t.default=G},10508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=F;var r,a=w(n(0)),i=L(n(9)),o=L(n(18)),u=n(5224),l=w(n(5)),s=L(n(8925)),c=L(n(1385)),d=n(294),f=L(n(7579)),p=L(n(8004)),h=L(n(5085)),_=L(n(5086)),E=n(7420),v=n(7359),y=n(1419),m=n(308),g=L(n(567)),T=L(n(20)),A=L(n(5068)),I=w(n(549)),S=L(n(5080)),O=L(n(1452)),C=L(n(5116)),N=L(n(7533)),b=n(1),M=L(n(6)),P=L(n(7031)),R=L(n(829));function L(e){return e&&e.__esModule?e:{default:e}}function D(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return D=function(){return e},e}function w(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=D();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}l.default.initialize();var G=k(I.AuthSpinner,{}),j=function(e){var t,r;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleContinue=function(){var e=t.props,n=e.defaultRoute;(0,e.transitionTo)(n)},t}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var l=a.prototype;return l.componentDidMount=function(){(0,y.trackAppUIViewed)("guildTemplate"),u.IS_APP_COMPATIBLE_BROWSER||S.default.launch("discord://"+b.Routes.GUILD_TEMPLATE(this.props.code),(function(){}))},l.componentDidUpdate=function(e){this.props.code!==e.code&&p.default.resolveGuildTemplate(this.props.code)},l.renderButton=function(e,t){return u.IS_APP_COMPATIBLE_BROWSER?k(I.Button,{className:R.default.marginTop40,onClick:t},void 0,e):k(I.IncompatibleBrowser,{className:R.default.marginTop40})},l.renderSpinner=function(e){return k(I.default,{},void 0,k(I.Title,{},void 0,e),G)},l.renderInvalidGuildTemplate=function(){return k(I.default,{},void 0,k(I.Image,{src:n(8926),className:R.default.marginBottom8}),k(I.Title,{className:(0,i.default)(R.default.marginTop8,R.default.marginBottom8)},void 0,M.default.Messages.GUILD_TEMPLATE_INVALID_TITLE),k(I.SubTitle,{},void 0,M.default.Messages.GUILD_TEMPLATE_INVALID_SUBTITLE),this.renderButton(M.default.Messages.CONTINUE_TO_WEBAPP,this.handleContinue))},l.renderAppOpened=function(){return k(I.default,{},void 0,k(I.Title,{className:R.default.marginBottom8},void 0,M.default.Messages.APP_OPENED_TITLE),k(I.SubTitle,{},void 0,M.default.Messages.APP_OPENED_BODY),this.renderButton(M.default.Messages.CONTINUE_TO_WEBAPP,this.handleContinue))},l.renderAuthenticatedOrDownload=function(){var e=this.props.guildTemplate;return(0,o.default)(null!=e,"guild template must not be null"),e.state===d.GuildTemplateStates.RESOLVING?k(I.default,{className:P.default.authBox},void 0,k(_.default,{guildTemplate:e})):k(x,{guildTemplate:e})},l.renderContinue=function(){return k(I.default,{},void 0,k(I.Title,{},void 0,M.default.Messages.APP_NOT_OPENED),this.renderButton(M.default.Messages.CONTINUE_TO_WEBAPP,this.handleContinue))},l.render=function(){var e=this.props,t=e.guildTemplate,n=e.nativeAppState,r=e.authenticated,a=e.transitionTo,i=e.location;if(null==t)return this.renderSpinner(M.default.Messages.LOADING);if(n===b.NativeAppStates.OPEN)return this.renderAppOpened();if(n===b.NativeAppStates.OPENING)return this.renderSpinner(M.default.Messages.APP_OPENING);switch(t.state){case d.GuildTemplateStates.RESOLVING:return this.renderSpinner(M.default.Messages.APP_OPENING);case d.GuildTemplateStates.RESOLVED:return r||!u.IS_APP_COMPATIBLE_BROWSER?this.renderAuthenticatedOrDownload():this.props.login?k(O.default,{guildTemplate:t,transitionTo:a,location:i}):k(N.default,{guildTemplate:t,transitionTo:a,location:i,onRegister:function(){(0,E.setNewUser)(v.NewUserTypes.ORGANIC_REGISTERED_GUILD_TEMPLATE),g.default.flowStart(m.FlowType.ORGANIC_GUILD_TEMPLATES,m.RegistrationSteps.NUF_STARTED)}});case d.GuildTemplateStates.EXPIRED:return this.renderInvalidGuildTemplate();default:return null}},a}(a.PureComponent);function F(e){var t={guildTemplate:(0,l.useStateFromStores)([c.default],(function(){return c.default.getGuildTemplate(e.code)})),nativeAppState:(0,l.useStateFromStores)([s.default],(function(){return s.default.getState(e.code)})),authenticated:(0,l.useStateFromStores)([T.default],(function(){return T.default.isAuthenticated()})),guestLurker:(0,l.useStateFromStores)([T.default],(function(){return T.default.isGuest()})),defaultRoute:(0,l.useStateFromStores)([A.default],(function(){return A.default.defaultRoute}))};return a.createElement(j,U({},e,t))}function x(e){var t=e.guildTemplate,n=(0,f.default)(t,!1),r=n.form,i=n.handleSubmit;g.default.flowStep(m.FlowType.ORGANIC_GUILD_TEMPLATES,m.CreateGuildSteps.GUILD_CREATE);var o=a.createElement(a.Fragment,null,k(I.Title,{className:P.default.header},void 0,M.default.Messages.GUILD_TEMPLATE_SETUP_DISCORD),r,k(I.Button,{className:P.default.createButton,onClick:i},void 0,M.default.Messages.GUILD_TEMPLATE_CREATE_DISCORD)),u=k(h.default,{guildTemplate:t});return k(C.default,{className:P.default.authBox},void 0,(function(){return[u,k("div",{className:P.default.formContainer},void 0,o)]}))}j.displayName="GuildTemplate",F.displayName="ConnectedGuildTemplate",x.displayName="GuildTemplateAuthBox"},10509:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=O;var r,a=T(n(0)),i=T(n(5)),o=m(n(1385)),u=n(294),l=m(n(8004)),s=m(n(5086)),c=n(1419),d=m(n(20)),f=m(n(210)),p=T(n(549)),h=m(n(16)),_=m(n(9194)),E=n(1),v=m(n(6)),y=m(n(829));function m(e){return e&&e.__esModule?e:{default:e}}function g(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}function T(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=g();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function A(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function I(e,t,n){e.preventDefault(),h.default.track(E.AnalyticEvents.GUILD_TEMPLATE_APP_OPENED,{guild_template_code:t,guild_template_name:n.name,guild_template_description:n.description,guild_template_guild_id:n.sourceGuildId});var r=d.default.getFingerprint(),a=null!=r?r:d.default.getId();l.default.openMobileApp(n.state===u.GuildTemplateStates.RESOLVED?t:void 0,a)}i.default.initialize();var S=A(p.default,{},void 0,A(f.default,{}));function O(e){var t=e.code,n=(0,i.useStateFromStores)([o.default],(function(){return o.default.getGuildTemplate(t)}));return a.useEffect((function(){(0,c.trackAppUIViewed)("guild_template_mobile")}),[]),null==n||n.state===u.GuildTemplateStates.RESOLVING?S:n.state===u.GuildTemplateStates.RESOLVED?A(p.default,{},void 0,A(s.default,{guildTemplate:n,tall:!0}),A(p.Button,{onClick:function(e){return I(e,t,n)},className:y.default.marginTop20},void 0,v.default.Messages.GUILD_TEMPLATE_OPEN)):A(_.default,{text:v.default.Messages.GUILD_TEMPLATE_MOBILE_INVALID_ERROR,buttonCta:v.default.Messages.GUILD_TEMPLATE_MOBILE_INVALID_CTA,onClick:function(e){return I(e,t,n)}})}O.displayName="GuildTemplateMobile"},10510:function(e,t,n){e.exports=n.p+"07c4931451dfa8c32fc8551b48a89536.svg"},10511:function(e,t,n){e.exports=n.p+"96191331272ece160a85126d54e49f3d.svg"},10512:function(e,t,n){e.exports=n.p+"acb452cda03a99894210f832308c055d.svg"},10513:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=R(n(0)),i=M(n(9)),o=n(5224),u=M(n(5)),l=M(n(5052)),s=M(n(7794)),c=M(n(8925)),d=n(7420),f=n(7359),p=n(1419),h=M(n(20)),_=M(n(5068)),E=M(n(1391)),v=R(n(549)),y=M(n(16)),m=R(n(10514)),g=M(n(190)),T=M(n(69)),A=M(n(5080)),I=M(n(5089)),S=M(n(1452)),O=M(n(7533)),C=n(1),N=M(n(6)),b=M(n(829));function M(e){return e&&e.__esModule?e:{default:e}}function P(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return P=function(){return e},e}function R(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=P();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function L(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}u.default.initialize();var w="register",U="login",k=L(v.AuthSpinner,{}),G=function(e){var t,r;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).getAcceptInviteContext=function(e){return l.default.getInviteContext(e,t.props.invite)},t.handleContinue=function(){var e=t.props,n=e.invite,r=e.transitionTo;null!=n.channel&&l.default.transitionToInvite(n,r)},t.handleAccept=function(){var e=t.props.invite,n=t.getCode();l.default.acceptInvite(n,t.getAcceptInviteContext("Accept Invite Page"),(function(){null!=e.channel&&l.default.openApp(n,e.channel.id)}))},t.handleDefaultTransition=function(){var e=t.props,n=e.defaultRoute;(0,e.transitionTo)(n)},t}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=a.prototype;return u.componentDidMount=function(){var e=this.props,t=e.isUnderage,n=e.login;if(y.default.track(C.AnalyticEvents.INVITE_VIEWED,{},{flush:!0}),(0,p.trackAppUIViewed)("invite"),!o.IS_APP_COMPATIBLE_BROWSER){var r=this.getCode();A.default.launch("discord://"+C.Routes.INVITE(r),(function(){}))}!n&&t&&T.default.replaceWith(C.Routes.INVITE_LOGIN(this.getCode()))},u.componentDidUpdate=function(e){var t=this.props,n=t.invite,r=t.nativeAppState,a=t.authenticated,i=t.transitionTo,o=t.guestLurker,u=this.getCode();if(u!==this.getCode(e))l.default.resolveInvite(u,"Accept Invite Page");else if(n.state===C.InviteStates.APP_NOT_OPENED)this.handleContinue();else if(this.getMode()===U&&a!==e.authenticated&&a){var s=h.default.getFingerprint();if(null!=s){var c=m.extractId(s);this.track(C.AnalyticEvents.INVITE_LOGIN_SUCCESSFUL,!0,{prev_user_id:c})}l.default.acceptInvite(u,this.getAcceptInviteContext("Accept Invite Page"),this.handleContinue)}(r!==e.nativeAppState&&r===C.NativeAppStates.OPEN&&this.track(C.AnalyticEvents.INVITE_APP_INVOKED,!1),this.getMode()===w&&a&&!e.authenticated)&&(null!=n.channel&&((0,d.setNewUser)(f.NewUserTypes.INVITE_UNCLAIMED),l.default.transitionToInvite(n,i)));null!=n.guest_token&&o&&n.state===C.InviteStates.RESOLVED&&r===C.NativeAppStates.OPEN_FAIL&&setTimeout(this.handleContinue,300)},u.getCode=function(e){return void 0===e&&(e=this.props),e.inviteCode},u.getMode=function(e){return void 0===e&&(e=this.props),e.login?U:w},u.track=function(e,t,n){void 0===n&&(n=null);var r=this.props.invite,a=this.getCode(),i=t?{guild_id:r.guild?r.guild.id:null,channel_id:r.channel?r.channel.id:null,inviter_id:r.inviter?r.inviter.id:null,invite_code:a}:{invite_code:a};y.default.track(e,D({},i,{},n))},u.renderButton=function(e,t){return void 0===t&&(t=this.handleDefaultTransition),o.IS_APP_COMPATIBLE_BROWSER?L(v.Button,{className:b.default.marginTop40,onClick:t},void 0,e):L(v.IncompatibleBrowser,{className:b.default.marginTop40})},u.renderSpinner=function(e){return L(v.default,{},void 0,L(v.Title,{},void 0,e),k)},u.renderInvalidInvite=function(e){return void 0===e&&(e=!1),L(v.default,{},void 0,L(v.Image,{src:n(8926),className:b.default.marginBottom8}),L(v.Title,{className:(0,i.default)(b.default.marginTop8,b.default.marginBottom8)},void 0,N.default.Messages.AUTH_INVALID_INVITE_TITLE),L(v.SubTitle,{},void 0,e?N.default.Messages.AUTH_BANNED_INVITE_BODY:N.default.Messages.AUTH_INVALID_INVITE_BODY),this.renderButton(N.default.Messages.CONTINUE_TO_WEBAPP),L(v.Button,{onClick:function(){return window.open(g.default.getArticleURL(C.HelpdeskArticles.INVALID_INVITES),"_blank")},look:v.Button.Looks.LINK,className:b.default.marginTop8},void 0,N.default.Messages.AUTH_INVALID_INVITE_TIP))},u.renderExpiredInvite=function(){return this.renderInvalidInvite(!1)},u.renderBannedInvite=function(){return this.renderInvalidInvite(!0)},u.renderAppOpened=function(){return L(v.default,{},void 0,L(v.Title,{className:b.default.marginBottom8},void 0,N.default.Messages.APP_OPENED_TITLE),L(v.SubTitle,{},void 0,N.default.Messages.APP_OPENED_BODY),this.renderButton(N.default.Messages.CONTINUE_TO_WEBAPP,this.handleContinue))},u.renderAuthenticatedOrDownload=function(){var e=this.props.invite;return L(v.default,{},void 0,L(I.default,{invite:e}),this.renderButton(N.default.Messages.INSTANT_INVITE_ACCEPT,this.handleAccept))},u.renderContinue=function(){return L(v.default,{},void 0,L(v.Title,{},void 0,N.default.Messages.APP_NOT_OPENED),this.renderButton(N.default.Messages.CONTINUE_TO_WEBAPP))},u.render=function(){var e=this,t=this.props,n=t.invite,r=t.nativeAppState,a=t.authenticated,i=t.guestLurker,u=t.transitionTo,l=t.location;if(r===C.NativeAppStates.OPEN)return this.renderAppOpened();switch(n.state){case C.InviteStates.APP_OPENED:return this.renderAppOpened();case C.InviteStates.APP_NOT_OPENED:return this.renderContinue();case C.InviteStates.RESOLVING:case C.InviteStates.APP_OPENING:return this.renderSpinner(N.default.Messages.APP_OPENING);case C.InviteStates.RESOLVED:return a||!o.IS_APP_COMPATIBLE_BROWSER?this.renderAuthenticatedOrDownload():null!=n.guest_token&&i?this.renderSpinner(N.default.Messages.INSTANT_INVITE_RESOLVED_TITLE):this.getMode()===U?L(S.default,{invite:n,transitionTo:u,location:l}):L(O.default,{invite:n,onLoginStart:function(){return e.track(C.AnalyticEvents.INVITE_LOGIN,!0)},location:l,transitionTo:u});case C.InviteStates.ACCEPTING:return this.renderSpinner(N.default.Messages.INSTANT_INVITE_ACCEPTING);case C.InviteStates.EXPIRED:return this.renderExpiredInvite();case C.InviteStates.BANNED:return this.renderBannedInvite();case C.InviteStates.ACCEPTED:default:return null}},a}(a.PureComponent);G.displayName="Invite";var j=u.default.connectStores([E.default,_.default,h.default,c.default,s.default],(function(e){var t=e.inviteCode;return{invite:E.default.getInvite(t)||{},nativeAppState:c.default.getState(t),authenticated:h.default.isAuthenticated(),guestLurker:h.default.isGuest(),defaultRoute:_.default.defaultRoute,isUnderage:s.default.isUnderageAnonymous()}}))(G);t.default=j},10514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"extractId",{enumerable:!0,get:function(){return r.extractId}});var r=n(577)},10515:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=A(n(0)),i=A(n(5)),o=g(n(5052)),u=n(284),l=n(1419),s=g(n(20)),c=g(n(1391)),d=g(n(210)),f=A(n(549)),p=g(n(16)),h=g(n(9194)),_=g(n(5089)),E=n(1),v=g(n(6)),y=g(n(7033)),m=g(n(10516));function g(e){return e&&e.__esModule?e:{default:e}}function T(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return T=function(){return e},e}function A(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=T();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function I(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}i.default.initialize();var O=(0,u.registerUserExperiment)({id:u.Experiments.INVITE_MARKETING_VALUE_PROPS,title:"Invite: Marketing Value Props",description:["Give users more information why they should join a Discord server","Treatment 1: Server Banner + Description","Treatment 2: Server Banner + Description + Long Value Props","Treatment 3: Server Banner + Description + Short Value Props"],buckets:[u.ExperimentBuckets.CONTROL,u.ExperimentBuckets.TREATMENT_1,u.ExperimentBuckets.TREATMENT_2,u.ExperimentBuckets.TREATMENT_3]}),C=new Map;C.set("pogostl",{serverDescription:"Check out the Pokemon GO St. Louis community on Discord - free text and voice chat app used by 250M people."}),C.set("pogoarizona",{serverDescription:"Check out the Pokemon GO Arizona community on Discord - free text and voice chat app used by 250M people."}),C.set("pogohouston",{serverDescription:"Check out the Pokemon GO Houston community on Discord - free text and voice chat app used by 250M people."}),C.set("pogolacounty",{serverDescription:"Check out the Pokemon GO LA community on Discord - free text and voice chat app used by 250M people."});var N=I("path",{d:"M1.9 4.26H0V11.2941H1.9V4.26Z"}),b=I("path",{d:"M17.1 0V1.12659L2.85 4.26447V14.1176C2.85 14.5496 3.1464 14.9252 3.5701 15.0315L7.3701 15.9727C7.4461 15.9906 7.524 16 7.6 16C7.89545 16 8.1776 15.8635 8.36 15.6235L10.7065 12.5242L17.1 13.9304V15.0588H19V0H17.1ZM7.2181 13.9944L4.75 13.3826V11.2113L8.67065 12.0753L7.2181 13.9944Z"});function M(e){return a.createElement("svg",S({},e,{viewBox:"0 0 19 16",xmlns:"http://www.w3.org/2000/svg"}),N,b)}M.displayName="AnnouncementsIcon";var P=I("path",{d:"M13.616 4.72429C13.5133 4.47506 13.2693 4.31203 13 4.31203H9.41199L7.59599 0.672571C7.36999 0.220227 6.62933 0.220227 6.40333 0.672571L4.58799 4.31203H0.999993C0.730659 4.31203 0.486659 4.47506 0.383993 4.72429C0.281326 4.97351 0.337993 5.26215 0.528659 5.45258L3.58466 8.51542L2.35933 12.815C2.28266 13.0843 2.38133 13.3729 2.60666 13.538C2.83333 13.7037 3.13799 13.7097 3.36933 13.554L6.99999 11.1286L10.63 13.554C10.742 13.6288 10.8707 13.6663 11 13.6663C11.138 13.6663 11.276 13.6235 11.3933 13.538C11.6187 13.3729 11.7173 13.0843 11.6407 12.815L10.4153 8.51542L13.4713 5.45258C13.662 5.26215 13.7187 4.97351 13.616 4.72429Z"});function R(e){return a.createElement("svg",S({},e,{viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"}),P)}R.displayName="StarIcon";var L=I("path",{d:"M1.33331 2.66663V3.66663C1.33331 6.43329 2.80665 8.85329 4.99998 10.2V13.3333H15V12C15 10.2266 11.4466 9.33329 9.66665 9.33329C9.66665 9.33329 9.55331 9.33329 9.49998 9.33329C6.33331 9.33329 3.66665 6.66663 3.66665 3.66663V2.66663H1.33331ZM9.66665 2.66663C8.19389 2.66663 6.99998 3.86053 6.99998 5.33329C6.99998 6.80605 8.19389 7.99996 9.66665 7.99996C11.1394 7.99996 12.3333 6.80605 12.3333 5.33329C12.3333 3.86053 11.1394 2.66663 9.66665 2.66663Z"});function D(e){return a.createElement("svg",S({},e,{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"}),L)}function w(e,t,n){e.preventDefault(),p.default.track(E.AnalyticEvents.INVITE_APP_OPENED,{invite_code:t,guild_id:(null==n?void 0:n.guild)?n.guild.id:null,channel_id:(null==n?void 0:n.channel)?n.channel.id:null,inviter_id:(null==n?void 0:n.inviter)?n.inviter.id:null});var r=null!=n&&n.state!==E.InviteStates.EXPIRED&&n.state!==E.InviteStates.BANNED?t:void 0,a=s.default.getFingerprint(),i=null!=a?a:s.default.getId();o.default.openApp(r,void 0,i)}D.displayName="FriendsIcon";var U=I(d.default,{});function k(e){return I(f.default,{theme:e.theme},void 0,U)}k.displayName="InviteSpinner";var G=I(M,{fill:"#7289DA",width:"14"}),j=I(R,{fill:"#FAA61A",width:"15"}),F=I(D,{fill:"#43B581",width:"16"});function x(e){var t,n,r,a,i,o,l=(t=e.inviteCode,n=C.get(t),r=null!=n,a=(0,u.useAndTriggerUserExperiment)(S({},O,{clientFilter:{isEligible:function(){return r}}})),i=null!=n?n.serverDescription:null,{active:o=r&&a!==u.ExperimentBuckets.CONTROL&&a!==u.ExperimentBuckets.NOT_ELIGIBLE,serverDescription:i,showServerDescription:o,showServerBanner:o,showServerValueProps:o&&(a===u.ExperimentBuckets.TREATMENT_2||a===u.ExperimentBuckets.TREATMENT_3),shortValueProps:o&&a===u.ExperimentBuckets.TREATMENT_2}),s=[{key:"announcements",labelShort:v.default.Messages.INVITE_POKEMON_GO_ANNOUNCEMENTS_LABEL_SHORT.format(),labelLong:v.default.Messages.INVITE_POKEMON_GO_ANNOUNCEMENTS_LABEL_LONG.format(),icon:G},{key:"strategy",labelShort:v.default.Messages.INVITE_POKEMON_GO_STRATEGY_LABEL_SHORT.format(),labelLong:v.default.Messages.INVITE_POKEMON_GO_STRATEGY_LABEL_LONG.format(),icon:j},{key:"friendship",labelShort:v.default.Messages.INVITE_POKEMON_GO_FRIENDSHIP_LABEL_SHORT.format(),labelLong:v.default.Messages.INVITE_POKEMON_GO_FRIENDSHIP_LABEL_LONG.format(),icon:F}];return I(f.default,{theme:e.theme,mobileBanner:l.showServerBanner?m.default:null},void 0,I(_.default,{invite:e.invite,description:l.active?l.serverDescription:null,flatActivityCount:l.active}),l.showServerValueProps&&I("ul",{className:y.default.valueProps},void 0,s.map((function(e){return I("li",{className:y.default.valuePropItem},e.key,I("span",{className:y.default.valuePropIcon},void 0,e.icon),I("span",{className:y.default.valuePropLabel},void 0,l.shortValueProps?e.labelShort:e.labelLong))}))),I(f.Button,{onClick:function(t){return w(t,e.inviteCode,e.invite)},className:y.default.acceptButton},void 0,v.default.Messages.INSTANT_INVITE_ACCEPT))}x.displayName="ValidInvite";var V=function(e){var t=e.inviteCode,n=(0,i.useStateFromStores)([c.default],(function(){return c.default.getInvite(t)}));if(a.useEffect((function(){p.default.track(E.AnalyticEvents.INVITE_VIEWED,{},{flush:!0}),(0,l.trackAppUIViewed)("invite_mobile")}),[]),null==n)return I(x,{theme:E.ThemeTypes.DARK,invite:n,inviteCode:t});switch(n.state){case E.InviteStates.EXPIRED:return I(h.default,{text:v.default.Messages.INVITE_INVALID_ERROR,buttonCta:v.default.Messages.INVITE_INVALID_CTA,onClick:function(e){return w(e,t,n)}});case E.InviteStates.BANNED:return I(h.default,{text:v.default.Messages.AUTH_BANNED_INVITE_BODY,buttonCta:v.default.Messages.INVITE_INVALID_CTA,onClick:function(e){return w(e,t,n)}});case E.InviteStates.RESOLVING:return I(k,{theme:E.ThemeTypes.DARK});default:return I(x,{theme:E.ThemeTypes.DARK,invite:n,inviteCode:t})}};t.default=V},10516:function(e,t,n){e.exports=n.p+"a580fd6dc66042ed4d0745deae03626c.png"},10517:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=m(n(0)),i=v(n(9)),o=v(n(5)),u=v(n(282)),l=v(n(8334)),s=n(1419),c=v(n(20)),d=m(n(549)),f=n(97),p=n(334),h=n(1),_=v(n(6)),E=v(n(829));function v(e){return e&&e.__esModule?e:{default:e}}function y(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return y=function(){return e},e}function m(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function g(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}o.default.initialize();var T=function(e){var t,r;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={password:"",code:"",error:null},t.handleSubmit=function(e){var n=t.props,r=n.location,a=n.replaceWith,i=t.state,o=i.password,s=i.error;if(null!=e&&e.preventDefault(),0===o.length)return t.setState({error:_.default.Messages.PASSWORD_REQUIRED}),void f.ComponentDispatch.dispatch(h.ComponentActions.WAVE_EMPHASIZE);null!=s&&t.setState({error:null});var c=(0,l.default)(r);null!=c&&u.default.resetPassword(c,o,a)},t.handleTokenSubmit=function(e){var n=t.props,r=n.location,a=n.replaceWith,i=n.mfaTicket,o=t.state,s=o.code,c=o.password,d=o.error;if(null!=e&&e.preventDefault(),0===c.length)return t.setState({error:_.default.Messages.PASSWORD_REQUIRED}),void f.ComponentDispatch.dispatch(h.ComponentActions.WAVE_EMPHASIZE);null!=d&&t.setState({error:null});var p=(0,l.default)(r);null!=p&&u.default.resetPasswordMFA(s,i,c,p,a)},t.renderError=function(e){var n=t.props.errors;if(t.hasError(e)){var r=n[e];return Array.isArray(r)?r[0]:r}return null},t}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=a.prototype;return o.componentDidMount=function(){(0,s.trackAppUIViewed)("reset_password")},o.hasError=function(e){return null!=this.props.errors[e]||null!=this.state.error},o.renderPasswordReset=function(){var e=this,t=this.state,r=t.password,a=t.error,i=this.props.loginStatus,o=a||this.renderError("password");return g(d.default,{onSubmit:this.handleSubmit,tag:"form"},void 0,g("img",{alt:"",src:n(null==o?9195:9196),className:E.default.marginBottom20}),g(d.Title,{},void 0,_.default.Messages.RESET_PASSWORD_TITLE),g(d.Block,{className:E.default.marginTop20},void 0,g(d.Input,{label:_.default.Messages.FORM_LABEL_NEW_PASSWORD,className:E.default.marginBottom20,name:"password",value:r,onChange:function(t){return e.setState({password:t})},error:o,type:"password"}),g(d.Button,{type:"submit",submitting:i===h.LoginStates.LOGGING_IN_MFA},void 0,_.default.Messages.CHANGE_PASSWORD)))},o.renderMFA=function(){var e=this,t=this.state.error,r=this.props.loginStatus,a=t||this.renderError("code");return g(d.default,{onSubmit:this.handleTokenSubmit,tag:"form"},void 0,g("img",{alt:"",src:n(null==a?9195:9196),className:(0,i.default)(E.default.marginBottom20,p.isMobile?E.default.marginTop20:"")}),g(d.Title,{className:E.default.marginBottom8},void 0,_.default.Messages.TWO_FA_ENTER_TOKEN_LABEL),g(d.SubTitle,{},void 0,_.default.Messages.TWO_FA_ENTER_TOKEN_BODY),g(d.Block,{className:E.default.marginTop20},void 0,g(d.Input,{className:E.default.marginBottom8,error:a,onChange:function(t){return e.setState({code:t})},autoComplete:"off",placeholder:_.default.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,value:this.state.code}),g(d.Button,{type:"submit",submitting:r===h.LoginStates.LOGGING_IN_MFA},void 0,_.default.Messages.LOGIN)))},o.render=function(){return this.props.mfaTicket?this.renderMFA():this.renderPasswordReset()},a}(a.PureComponent);T.displayName="ResetPassword",T.defaultProps={transitionTo:function(t){return e.location.assign(t)},replaceWith:function(t){return e.location.replace(t)}};var A=o.default.connectStores([c.default],(function(){return{loginStatus:c.default.getLoginStatus(),mfaTicket:c.default.getMFATicket(),errors:c.default.getErrors()}}))(T);t.default=A}).call(this,n(32))},10518:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=N(n(0)),i=O(n(9)),o=O(n(46)),u=n(1414),l=O(n(5)),s=O(n(282)),c=O(n(8334)),d=O(n(5106)),f=n(1419),p=O(n(20)),h=O(n(5068)),_=O(n(5103)),E=N(n(549)),v=O(n(16)),y=O(n(69)),m=O(n(5080)),g=n(1),T=O(n(6)),A=O(n(7034)),I=O(n(843)),S=O(n(829));function O(e){return e&&e.__esModule?e:{default:e}}function C(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return C=function(){return e},e}function N(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=C();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function b(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}l.default.initialize();var M=function(e){var t,r;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleVerify=function(e){void 0===e&&(e=null);var n=(0,c.default)(t.props.location);null!=n&&s.default.verify(n,e)},t.handleLogin=function(){(0,t.props.transitionTo)(g.Routes.LOGIN)},t.handleOpenApp=function(){var e=t.props.verifyingUserId;v.default.track(g.AnalyticEvents.VERIFY_ACCOUNT_APP_OPENED,{verifying_user_id:e}),t.openAppWithFingerprint()},t}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var l=a.prototype;return l.componentDidMount=function(){this.handleVerify(),(0,f.trackAppUIViewed)("verify_email")},l.openAppWithFingerprint=function(){var e,t=this.props.fingerprint;e="Android"===o.default.os.family||"iOS"===o.default.os.family?(0,d.default)("verify_email",{queryString:(0,u.stringify)({fingerprint:t})}):"discord://",m.default.launch(e,(function(e){e||y.default.replaceWith(h.default.fallbackRoute)}))},l.renderVerifyCaptcha=function(){return b(E.default,{},void 0,b(E.Image,{src:n(9197),className:(0,i.default)(A.default.image,S.default.marginBottom20)}),b(E.Title,{className:S.default.marginBottom8},void 0,T.default.Messages.VERIFICATION_VERIFYING),b(E.SubTitle,{className:S.default.marginBottom40},void 0,T.default.Messages.VERIFICATION_BODY_ALT),b("div",{className:I.default.flexCenter},void 0,b(_.default,{onVerify:this.handleVerify,theme:_.default.Themes.DARK})))},l.renderVerifyFailed=function(){return b(E.default,{},void 0,b(E.Image,{src:n(10519),className:(0,i.default)(A.default.image,S.default.marginBottom20)}),b(E.Title,{className:S.default.marginBottom8},void 0,T.default.Messages.VERFICATION_EXPIRED),b(E.SubTitle,{className:S.default.marginBottom40},void 0,T.default.Messages.AUTH_VERFICATION_EXPIRED_SUGGESTION),b(E.Button,{onClick:this.handleLogin},void 0,T.default.Messages.LOGIN))},l.renderVerifySucceeded=function(){return b(E.default,{},void 0,b(E.Image,{src:n(9197),className:(0,i.default)(A.default.image,S.default.marginBottom20)}),b(E.Title,{className:S.default.marginBottom40},void 0,T.default.Messages.VERIFICATION_VERIFIED),b(E.Button,{onClick:this.handleOpenApp},void 0,T.default.Messages.VERIFICATION_OPEN_DISCORD))},l.renderVerifying=function(){return b(E.default,{},void 0,b(E.Image,{src:n(9193),className:(0,i.default)(A.default.image,S.default.marginBottom20)}),b(E.Title,{className:S.default.marginBottom8},void 0,T.default.Messages.VERIFICATION_VERIFYING),b(E.SubTitle,{className:S.default.marginBottom40},void 0,T.default.Messages.ACTION_MAY_TAKE_A_MOMENT),b(E.Button,{submitting:!0,color:E.Button.Colors.PRIMARY}))},l.render=function(){var e=this.props,t=e.verifyErrors,n=e.verifyFailed,r=e.verifySucceeded;return null!=t&&t.captcha_key?this.renderVerifyCaptcha():n?this.renderVerifyFailed():r?this.renderVerifySucceeded():this.renderVerifying()},a}(a.PureComponent);M.displayName="VerifyEmail",M.defaultProps={transitionTo:function(t){return e.location.assign(t)}};var P=l.default.connectStores([p.default],(function(){return{verifyFailed:p.default.didVerifyFail(),verifyErrors:p.default.getVerifyErrors(),verifySucceeded:p.default.didVerifySucceed(),fingerprint:p.default.getFingerprint(),verifyingUserId:p.default.getVerifyingUserId()}}))(M);t.default=P}).call(this,n(32))},10519:function(e,t,n){e.exports=n.p+"1a06a76c7ea3e0facf0d6635e10c5898.svg"},1371:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;!function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n)}(n(0));var r,a=o(n(9)),i=o(n(5201));function o(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var s={UP:i.default.directionUp,RIGHT:i.default.directionRight,DOWN:i.default.directionDown,LEFT:i.default.directionLeft},c=function(e){var t=e.direction,n=void 0===t?s.DOWN:t,r=e.width,o=void 0===r?24:r,u=e.height,c=void 0===u?24:u,d=e.color,f=void 0===d?"currentColor":d,p=e.transition,h=void 0===p?i.default.transition:p,_=e.className,E=e.foreground,v=e.expanded,y=e["aria-label"],m=n;return!0===v?m=s.DOWN:!1===v&&(m=s.RIGHT),l("svg",{className:(0,a.default)(_,h,m),width:o,height:c,viewBox:"0 0 24 24","aria-label":y},void 0,l("path",{className:E,fill:"none",stroke:f,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M7 10L12 15 17 10","aria-hidden":!0}))};c.displayName="Caret",c.Directions=s;var d=c;t.default=d},1373:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=c(n(9)),o=c(n(198)),u=c(n(332)),l=n(122),s=c(n(5237));function c(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var _=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={animationProgress:new o.default.Value(0),animating:!1,targetHeight:0,baseHeight:0,leaving:!1},t.direction=t.props.getDirection(),t._measureRef=a.createRef(),t}h(t,e);var n=t.prototype;return n.componentDidMount=function(){if(null!=this._measureRef.current){var e=this._measureRef.current.getBoundingClientRect().height;this.setState({targetHeight:e,baseHeight:this.props.getBaseHeight()})}},n.componentDidUpdate=function(e,t){t.targetHeight!==this.state.targetHeight&&this.props.setHeight(this.state.targetHeight)},n.componentDidAppear=function(){var e=this.state,t=e.animationProgress,n=e.targetHeight;t.setValue(2),this.setState({baseHeight:n})},n.componentWillEnter=function(e){var t=this.props.duration,n=this.state.animationProgress;this.setState({animating:!0}),this.props.setHeight(this.state.targetHeight),o.default.timing(n,{toValue:2,duration:t,delay:t/2}).start(e)},n.componentDidEnter=function(){this.setState({animating:!1})},n.componentWillLeave=function(e){var t=this.state.animationProgress,n=this.props,r=n.duration,a=n.getDirection;this.direction=a(),this.setState({leaving:!0}),o.default.timing(t,{toValue:0,duration:r}).start(e)},n.getAnimatedStyle=function(){var e=this.context.reducedMotion,t=this.props.fillParent,n=this.state,r=n.animationProgress,a=n.leaving,i=n.baseHeight,u=n.targetHeight,l=n.animating,s=this.props.sideMargin||0,c=this.props.verticalMargin||0,d=(a?-1:1)*this.direction,f={overflow:l||a?"hidden":"visible",position:a?"absolute":void 0,top:a?c:void 0,left:a?s:void 0,right:a?s:void 0,bottom:a?c:void 0},h={transform:[{translateX:r.interpolate({inputRange:[0,2],outputRange:[150*d+"%","0%"],extrapolate:"clamp",easing:o.default.Easing.inOut(o.default.Easing.ease)})}]};return p({},f,{},e.enabled?null:h,{opacity:r.interpolate({inputRange:[0,2],outputRange:[0,1],extrapolate:"clamp",easing:o.default.Easing.inOut(o.default.Easing.ease)}),height:l?r.interpolate({inputRange:[0,1],outputRange:[i,u],extrapolate:"clamp",easing:o.default.Easing.inOut(o.default.Easing.ease)}):t?"100%":"auto"})},n.render=function(){var e=this.props,t=e.fillParent,n=e.className;return t?a.createElement("div",{ref:this._measureRef,className:(0,i.default)(s.default.measurementFill,n)},f(o.default.div,{style:this.getAnimatedStyle()},void 0,this.props.children)):a.createElement("div",{ref:this._measureRef,className:(0,i.default)(s.default.measurement,n)},f(o.default.div,{style:this.getAnimatedStyle()},void 0,this.props.children))},t}(a.PureComponent);_.displayName="SequenceAnimation",_.contextType=l.AccessibilityPreferencesContext,_.defaultProps={duration:300};var E=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).stepHeights={},t.prevStep=null,t.prevSteps=[],t.getBaseHeight=function(){return null!=t.prevStep&&null!=t.stepHeights[t.prevStep]?t.stepHeights[t.prevStep]:0},t.getDirection=function(){var e=t.props,n=e.steps,r=e.step,a=n.indexOf(t.prevStep),i=-1===a?t.prevSteps.indexOf(t.prevStep):-1;return Math.max(a,i)>n.indexOf(r)?-1:1},t.setHeight=function(e){var n=t.props.step;t.stepHeights[n]=e},t}h(t,e);var n=t.prototype;return n.componentDidMount=function(){this.setPrevSteps()},n.componentDidUpdate=function(){this.setPrevSteps()},n.setPrevSteps=function(){var e=this.props,t=e.step,n=e.steps;this.prevStep=t,this.prevSteps=n},n.render=function(){var e=this.props,t=e.step,n=e.className,r=e.innerClassName,a=e.sideMargin,o=e.verticalMargin,l=e.children,c=e.fillParent;return f(u.default,{component:"div",className:(0,i.default)(s.default.transitionGroup,n)},void 0,f(_,{fillParent:c,sideMargin:a,verticalMargin:o,getDirection:this.getDirection,getBaseHeight:this.getBaseHeight,className:r,setHeight:this.setHeight},""+t,l))},t}(a.Component);t.default=E,E.displayName="Sequencer",E.defaultProps={fillParent:!1}},1378:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomNumber=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},t.applySpringForce=function(e,t,n,r){return r.tension*(e-t)-r.friction*n}},1383:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(null==e||null==e.type||e.type!==i.ActivityTypes.PLAYING)return null;if((0,a.default)(e))return i.ActivityGamePlatforms.XBOX;return null!=e.platform?e.platform:i.ActivityGamePlatforms.DESKTOP};var r,a=(r=n(1432))&&r.__esModule?r:{default:r},i=n(1)},1385:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(5)),a=u(n(3)),i=n(294),o=u(n(933));n(1);function u(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s={};function c(e,t){var n,r=s[e]||{code:e,state:i.GuildTemplateStates.RESOLVING};t(r=l({},r)),s=l({},s,((n={})[e]=r,n))}function d(e){f(e.guildTemplate)}function f(e){return c(e.code,(function(t){var n=(0,o.default)(e);for(var r in n)t[r]=n[r]}))}function p(e){return c(e.code,(function(e){e.state=i.GuildTemplateStates.EXPIRED}))}var h=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getGuildTemplate=function(e){return s[e]},a.getGuildTemplates=function(){return s},a.getForGuild=function(e){for(var t in s){var n=s[t];if("sourceGuildId"in n&&n.sourceGuildId===e&&n.state!==i.GuildTemplateStates.EXPIRED)return n}},r}(r.default.Store))(a.default,{GUILD_TEMPLATE_RESOLVE:function(e){var t,n=e.code;s=l({},s,((t={})[n]={code:n,state:i.GuildTemplateStates.RESOLVING},t))},GUILD_TEMPLATE_CREATE_SUCCESS:d,GUILD_TEMPLATE_SYNC_SUCCESS:d,GUILD_TEMPLATE_RESOLVE_SUCCESS:d,GUILD_TEMPLATE_LOAD_FOR_GUILD_SUCCESS:function(e){e.guildTemplates.forEach((function(e){return f(e)}))},GUILD_TEMPLATE_RESOLVE_FAILURE:p,GUILD_TEMPLATE_DELETE_SUCCESS:p,GUILD_TEMPLATE_ACCEPT:function(e){return c(e.code,(function(e){e.state=i.GuildTemplateStates.ACCEPTING}))},GUILD_TEMPLATE_ACCEPT_SUCCESS:function(e){return c(e.code,(function(e){e.state=i.GuildTemplateStates.ACCEPTED,e.usageCount=(e.usageCount||0)+1}))},GUILD_TEMPLATE_ACCEPT_FAILURE:function(e){return c(e.code,(function(e){e.state=i.GuildTemplateStates.RESOLVED}))}});t.default=h},1387:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(42)),a=c(n(46)),i=c(n(149)),o=c(n(118)),u=c(n(15)),l=c(n(801)),s=n(1);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=s.RPC_STARTING_PORT+s.RPC_PORT_RANGE-1;function p(e,t){if(null==e||null==t)throw new Error("cmd and name required");return e+":"+t}var h=i.default.parse(location.search.slice(1)),_=parseInt(h.rpc||s.RPC_STARTING_PORT,10),E=null,v=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i,c,h,v=r.prototype;return v.connect=function(){var e=this;if(null==E){if(_>f)return _=s.RPC_STARTING_PORT,void this.emit("disconnected");try{E=new WebSocket("ws://127.0.0.1:"+this.port+"/?v="+s.RPC_VERSION)}catch(e){return void this.disconnect({code:s.RPCCloseCodes.CLOSE_ABNORMAL})}null!=E&&(E.onmessage=function(t){var n;try{if("string"!=typeof t.data)throw new Error("payload data not a string");n=JSON.parse(t.data)}catch(t){return e.emit("error",t),void e.disconnect()}var r=n,a=r.cmd,i=r.evt,o=r.nonce,u=r.data;if(a===s.RPCCommands.DISPATCH)return i===s.RPCEvents.READY?void e.emit("connected"):i===s.RPCEvents.ERROR?(e.emit("error",new l.default(u.code,u.message)),void e.disconnect()):void e.emit(p(a,i),u);var c=null;i===s.RPCEvents.ERROR&&(c=new l.default(u.code,u.message),u=null),e.emit(p(a,o),c,u)},E.onclose=E.onerror=function(t){return e.disconnect(t)})}},v.disconnect=function(e){if(null!=e&&"code"in e&&[s.RPCCloseCodes.CLOSE_ABNORMAL,s.RPCCloseCodes.INVALID_CLIENTID].includes(e.code))return _++,E=null,void this.connect();null!=E&&(this.emit("disconnected"),E.close(),E=null)},v.subscribe=function(e,t,n){return this.on(p(s.RPCCommands.DISPATCH,e),n),this.request(s.RPCCommands.SUBSCRIBE,t,e)},v.unsubscribe=function(e,t,n){return this.removeListener(p(s.RPCCommands.DISPATCH,e),n),this.request(s.RPCCommands.UNSUBSCRIBE,t,e)},v.request=function(e,t,n){var r=this;return new Promise((function(a,i){if(!r.connected)return r.once("connected",(function(){r.removeAllListeners("disconnected"),a(r.request(e,t,n))})),r.once("disconnected",(function(){r.removeAllListeners("connected"),i(new Error("disconnected during request"))})),void r.connect();var u=o.default.v4(),l=JSON.stringify({cmd:e,args:t,evt:n,nonce:u});r.once(p(e,u),(function(e,t){return null!=e?i(e):a(t)})),E&&E.send(l)}))},v.requestOnce=function(e,t,n){return u.default.post({url:"http://127.0.0.1:"+this.port+"/rpc?v="+s.RPC_VERSION,body:{cmd:e,args:t,evt:n,nonce:o.default.v4()}}).then((function(e){var t=e.body,n=t.evt,r=t.data;if(n===s.RPCEvents.ERROR)throw new l.default(r.code,r.message);return r}))},v.requestRedirect=function(e,t,n){if("Chrome"===a.default.name&&parseInt(a.default.version,10)>=58)return this.requestOnce(e,t,n);var r=encodeURIComponent(JSON.stringify({cmd:e,args:t,evt:n,nonce:o.default.v4()})),i=encodeURIComponent(location.protocol+"//"+location.host+location.pathname+"?done=true");return window.open("http://127.0.0.1:"+this.port+"/rpc?v="+s.RPC_VERSION+"&payload="+r+"&callback="+i,"_self"),new Promise((function(){return null}))},i=r,(c=[{key:"port",get:function(){return _}},{key:"connected",get:function(){return null!=E&&E.readyState===WebSocket.OPEN}}])&&d(i.prototype,c),h&&d(i,h),r}(r.default));t.default=v},1389:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=p(n(15)),a=p(n(3)),i=p(n(850)),o=p(n(24)),u=p(n(16)),l=p(n(154)),s=p(n(1425)),c=p(n(344)),d=n(1),f=p(n(6));function p(e){return e&&e.__esModule?e:{default:e}}var h={call:function(e,t,n,a,i){var p=this,h=function(n){c.default.selectVoiceChannel(e,t),n&&p.ring(e),null==i||i()};if(null!=a){var _=o.default.getUser(a);r.default.get({url:d.Endpoints.CALL(e),oldFormErrors:!0}).then((function(e){h(n&&e.body.ringable)}),(function(){u.default.track(d.AnalyticEvents.OPEN_POPOUT,{type:"Not Friend",source:"Call"}),l.default.show({title:f.default.Messages.START_CALL,body:f.default.Messages.CALL_INVITE_NOT_FRIENDS.format({username:null!=_?_.username:""}),confirmText:f.default.Messages.ADD_FRIEND_BUTTON,cancelText:f.default.Messages.OKAY,onConfirm:function(){s.default.addRelationship(a,{location:"Call"})}})}))}else h(n)},ring:function(e,t){var n=i.default.getCall(e);null==n||null==n.messageId||i.default.isCallUnavailable(e)?a.default.dispatch({type:d.ActionTypes.CALL_ENQUEUE_RING,channelId:e,recipients:t}):r.default.post({url:d.Endpoints.CALL_RING(e),body:{recipients:t},oldFormErrors:!0})},stopRinging:function(e,t){return r.default.post({url:d.Endpoints.CALL_STOP_RINGING(e),body:{recipients:t},oldFormErrors:!0})}};t.default=h},1391:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(5)),a=o(n(3)),i=n(1);function o(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l={},s={};function c(e,t){var n,r=u({code:e,state:i.InviteStates.RESOLVING},l[e]);t(r),l=u({},l,((n={})[e]=r,n))}function d(e){return c(e.code,(function(t){t.state="banned"in e&&e.banned?i.InviteStates.BANNED:i.InviteStates.EXPIRED}))}var f=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getInvite=function(e){return l[e]},a.getInviteError=function(e){return s[e]},a.getInvites=function(){return l},r}(r.default.Store))(a.default,{INVITE_RESOLVE:function(e){var t,n=e.code;l=u({},l,((t={})[n]={code:n,state:i.InviteStates.RESOLVING},t))},INVITE_RESOLVE_SUCCESS:function(e){return c(e.code,(function(t){t.state=i.InviteStates.RESOLVED,t.guild=e.invite.guild,t.channel=e.invite.channel,t.inviter=e.invite.inviter,t.approximate_member_count=null!=e.invite.approximate_member_count?e.invite.approximate_member_count:null,t.approximate_presence_count=null!=e.invite.approximate_presence_count?e.invite.approximate_presence_count:null,null!=e.invite.guest_token&&(t.guest_token=e.invite.guest_token),null!=e.invite.target_user_type&&null!=e.invite.target_user&&(t.target_user_type=e.invite.target_user_type,t.target_user=e.invite.target_user)}))},INVITE_RESOLVE_FAILURE:d,INSTANT_INVITE_REVOKE_SUCCESS:d,INSTANT_INVITE_CREATE_SUCCESS:function(e){return c(e.invite.code,(function(t){t.state=i.InviteStates.RESOLVED,t.guild=e.invite.guild,t.channel=e.invite.channel,t.inviter=e.invite.inviter,t.approximate_member_count=null!=e.invite.approximate_member_count?e.invite.approximate_member_count:null,t.approximate_presence_count=null!=e.invite.approximate_presence_count?e.invite.approximate_presence_count:null,null!=e.invite.target_user_type&&null!=e.invite.target_user&&(t.target_user_type=e.invite.target_user_type,t.target_user=e.invite.target_user)}))},INVITE_ACCEPT:function(e){return c(e.code,(function(e){e.state=i.InviteStates.ACCEPTED}))},INVITE_ACCEPT_SUCCESS:function(e){return c(e.code,(function(t){t.state=i.InviteStates.ACCEPTED,t.guild=e.invite.guild,t.new_member=e.invite.new_member,t.channel=u({},t.channel,{},e.invite.channel)}))},INVITE_ACCEPT_FAILURE:function(e){return s[e.code]=e.error,c(e.code,(function(e){e.state=i.InviteStates.ERROR}))},INVITE_APP_OPENING:function(e){return c(e.code,(function(e){e.state=i.InviteStates.APP_OPENING}))},INVITE_APP_OPENED:function(e){return c(e.code,(function(e){e.state=i.InviteStates.APP_OPENED}))},INVITE_APP_NOT_OPENED:function(e){return c(e.code,(function(e){e.state=i.InviteStates.APP_NOT_OPENED}))}});t.default=f},1395:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LobbyError=void 0;var r=u(n(7)),a=u(n(5)),i=u(n(3)),o=n(1);function u(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=function(e){this.code=e};t.LobbyError=s;var c={},d={};function f(e,t){if(null==d[e])return null;var n=d[e],r=n.socketId,a=n.timeout,i=n.resolve,o=n.reject;return delete d[e],null!=a&&clearTimeout(a),null!=i&&null!=o&&t(i,o),r}function p(e){var t=e.lobbyId,n=e.member,r=n.user,a=n.metadata,i=c[t];if(null==i)return!1;var o=i.members.find((function(e){return e.user.id===r.id}));null!=o?(o.user=r,o.metadata=a):i.members.push({user:r,metadata:a})}var h=new(function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=a.prototype;return i.getLobbies=function(){return c},i.getLobbiesWithVoice=function(){return r.default.filter(c,(function(e){return e.voice}))},i.getLobby=function(e){return c[e]},i.getPendingLobbies=function(){return r.default.map(d,(function(e,t){return{id:t,secret:e.secret}}))},a}(a.default.Store))(i.default,{CONNECTION_OPEN:function(e){c={}},OVERLAY_INITIALIZE:function(e){c=e.lobbies},LOBBY_CONNECT:function(e){var t=e.socketId,n=e.lobbyId,r=e.lobbySecret,a=e.resolve,u=e.reject;null==d[n]&&null==c[n]?d[n]={socketId:t,secret:r,resolve:a,reject:u,timeout:__OVERLAY__?null:setTimeout((function(){i.default.dispatch({type:o.ActionTypes.LOBBY_DELETE,lobbyId:n,reason:o.LobbyErrors.SERVICE_UNAVAILABLE})}),15e3)}:null!=u&&u(new s(o.LobbyErrors.ALREADY_CONNECTING))},LOBBY_DISCONNECT:function(e){f(e.lobbyId,(function(e,t){return t(new s(o.LobbyErrors.NO_ERROR))}))},LOBBY_CREATE:function(e){var t=e.lobby,n=f(t.id,(function(e){return e(t)}));null!=n&&(c[t.id]=l({socketId:n,voice:!1},c[t.id],{},t))},LOBBY_UPDATE:function(e){var t=e.lobby,n=c[t.id];null!=n&&(c[t.id]=l({},n,{},t))},LOBBY_DELETE:function(e){var t=e.lobbyId,n=e.reason;delete c[t],f(t,(function(e,t){return t(new s(n))}))},LOBBY_MEMBER_CONNECT:p,LOBBY_MEMBER_UPDATE:p,LOBBY_MEMBER_DISCONNECT:function(e){var t=e.lobbyId,n=e.member.user,r=c[t];if(null==r)return!1;r.members=r.members.filter((function(e){return e.user.id!==n.id}))},LOBBY_VOICE_CONNECT:function(e){var t=e.lobbyId,n=c[t];if(null==n)return!1;n.voice=!0},LOBBY_VOICE_DISCONNECT:function(e){var t=e.lobbyId,n=c[t];if(null==n)return!1;n.voice=!1},RPC_APP_DISCONNECTED:function(e){var t=e.socketId;r.default.forEach(c,(function(e){e.socketId===t&&i.default.dirtyDispatch({type:o.ActionTypes.LOBBY_DISCONNECT,lobbyId:e.id})}))}});t.default=h},1396:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(5)),a=n(44),i=u(n(3)),o=n(1449);n(1);function u(e){return e&&e.__esModule?e:{default:e}}var l=o.ApplicationStreamResolutions.RESOLUTION_720,s=o.ApplicationStreamFPS.FPS_30;var c=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(e){null!=e&&(l=e.resolution,s=e.fps)},a.getState=function(){return{resolution:l,fps:s}},r}(r.default.PersistedStore);c.persistKey="ApplicationStreamingSettingStore";var d=new c(i.default,{MEDIA_ENGINE_SET_DESKTOP_SOURCE:function(e){var t=e.resolution,n=e.frameRate,r=e.context;if(null==t||null==n||r!==a.MediaEngineContextTypes.STREAM)return!1;l=t,s=n},STREAM_UPDATE_SETTINGS:function(e){var t=e.resolution,n=e.frameRate,r=!1;return null!=t&&(l=t,r=!0),null!=n&&(s=n,r=!0),r}});t.default=d},1397:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){var t,n;n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.createFromServer=function(e){return new a({id:e.id,subscriptionId:e.subscription_id,premiumGuildSubscription:null!=e.premium_guild_subscription?{id:e.premium_guild_subscription.id,guildId:e.premium_guild_subscription.guild_id}:null,canceled:e.canceled,cooldownEndsAt:e.cooldown_ends_at})};var r=a.prototype;function a(t){var n;return(n=e.call(this)||this).id=t.id,n.subscriptionId=t.subscriptionId,n.premiumGuildSubscription=t.premiumGuildSubscription,n.canceled=t.canceled,n.cooldownEndsAt=t.cooldownEndsAt,n}return r.isOnCooldown=function(){return null!=this.cooldownEndsAt&&new Date(this.cooldownEndsAt)>=Date.now()},r.isAvailable=function(){return null==this.premiumGuildSubscription&&!this.isOnCooldown()},a}(((r=n(58))&&r.__esModule?r:{default:r}).default);t.default=a},1398:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.depunycodeLink=s,t.default=void 0;var r=o(n(821)),a=o(n(113)),i=o(n(193));function o(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=["file:","javascript:","vbscript:","data:"];function s(e){try{var t=i.default.parse(e),n=t.protocol||"";if(l.includes(n.toLowerCase()))throw new Error("bad protocol");if(null==t.hostname||0===t.hostname.length)throw new Error("no hostname");return t.hostname=r.default.toASCII(t.hostname),{displayTarget:i.default.format(u({},t,{auth:void 0})),target:i.default.format(t)}}catch(e){return null}}var c=u({},a.default.defaultRules.link,{match:function(e,t,n){return t.allowLinks?a.default.defaultRules.link.match(e,t,n):null},parse:function(e,t,n){var r=a.default.unescapeUrl(e[2]);if(!/^https?:\/\//i.test(r))return t(e[1],n);var i=s(r);if(null==i)return{type:"text",content:r};var o=i.target;return{content:t(e[1],n),target:o,title:e[3]}}});t.default=c},1399:function(e,t,n){"use strict";function r(e){return Math.max(Math.min(e,1),0)}function a(e,t){var n=e.top,a=e.bottom,i=e.left,o=e.right;return{top:null!=n?Math.floor(r(n)*t.height):null,left:null!=i?Math.floor(r(i)*t.width):null,bottom:null!=a?Math.floor(r(a)*t.height):null,right:null!=o?Math.floor(r(o)*t.width):null}}function i(e,t){var n=e.width,a=e.height;return{width:"auto"===n?n:Math.floor(r(n)*t.width),height:"auto"===a?a:Math.floor(r(a)*t.height)}}function o(e,t){var n=e.top,a=e.bottom,i=e.left,o=e.right;return{top:null!=n?r(n/t.height):null,left:null!=i?r(i/t.width):null,bottom:null!=a?r(a/t.height):null,right:null!=o?r(o/t.width):null}}function u(e,t){var n=e.width,r=e.height;return{width:"auto"===n?n:n/t.width,height:"auto"===r?r:r/t.height}}function l(e,t,n,r,a){var i=e.top,o=e.bottom,u=e.left,l=e.right;if(null==i&&null==o?(i=0,o=n-a):null==i&&null!=o?i=n-(o+a):null!=i&&(o=n-(i+a)),null==u&&null==l?(u=0,l=t-r):null==u&&null!=l?u=t-(l+r):null==l&&null!=u&&(l=t-(u+r)),null==i||null==o||null==u||null==l)throw new Error("Logically this can never happen based on our if/else statements");return{top:i,left:u,bottom:o,right:l}}function s(e){var t=e.top,n=e.left,r=e.bottom,a=e.right;return 0===t||t<=r?r=null:t=null,0===n||n<=a?a=null:n=null,{top:t,left:n,bottom:r,right:a}}function c(e){var t=e.top,n=e.left,r=e.bottom,a=e.right;return r<0&&(t+=r,r=0),t<0&&(r+=t,t=0),a<0&&(n+=a,a=0),n<0&&(a+=n,n=0),{top:t,left:n,bottom:r,right:a}}Object.defineProperty(t,"__esModule",{value:!0}),t.getAnchorCoordsFromLayoutSize=a,t.getSizeFromLayoutSize=i,t.getAnchorPercentageFromLayoutSize=o,t.getSizePercentageFromSize=u,t.getFullCoordsFromAnchorCoords=l,t.getAnchorCoordsFromFullCoords=s,t.fitFullCoordsToContainer=c,t.getFullCoordsFromLayoutSize=function(e,t,n){e=a(e,n);var r=i(t,n),o=r.width,u=r.height;return o="string"==typeof o?0:o,u="string"==typeof u?0:u,l(e,n.width,n.height,o,u)},t.getLeftWidgetSpecs=function(e,t,n,r){var a=e.top,i=e.left,d=void 0===r?{x:0,y:0}:r,f=d.x,p=d.y,h=t.width,_=t.height;return[o(s(c(l({top:a+p,left:i+f,bottom:null,right:null},n.width,n.height,"number"==typeof h?h:0,"number"==typeof _?_:0))),n),u(t,n)]},t.getRightWidgetSpecs=function(e,t,n,r){var a=e.top,i=e.right,d=void 0===r?{x:0,y:0}:r,f=d.x,p=d.y,h=t.width,_=t.height;return[o(s(c(l({top:a+p,left:null,bottom:null,right:i-f},n.width,n.height,"number"==typeof h?h:0,"number"==typeof _?_:0))),n),u(t,n)]}},1400:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDesktopSourceMetadata=function(){var e,t,n,i,o,u=r.default.getDesktopSource();null!=u&&(e=u.resolution,t=u.frameRate,n=u.soundshareSession,i=null!=u.sourcePid?a.default.getGameNameForPID(u.sourcePid):null,o=null!=u.sourcePid?a.default.getGameIdForPID(u.sourcePid):null);return{video_input_resolution:e,video_input_frame_rate:t,soundshare_session:n,share_game_name:i,share_game_id:o}},t.trackWithOverlayMetadata=function(e,t,n){void 0===n&&(n=!1);var r=i.default.getGame();switch(t=c({},t,{overlay_game_name:null!=r?r.name:"Unknown Game",overlay_app_id:null!=r?r.id:null}),e){case l.AnalyticEvents.VOICE_CHANNEL_SELECTED:case l.AnalyticEvents.SETTINGS_PANE_VIEWED:case l.AnalyticEvents.GUILD_VIEWED:case l.AnalyticEvents.CHANNEL_OPENED:return(0,u.trackWithMetadata)(e,t,n);default:return o.default.track(e,t,{flush:n})}};var r=s(n(56)),a=s(n(95)),i=s(n(888)),o=s(n(16)),u=n(211),l=n(1);function s(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},1410:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=p(n(15)),a=p(n(3)),i=p(n(896)),o=p(n(86)),u=p(n(29)),l=p(n(69)),s=n(796),c=p(n(1389)),d=p(n(344)),f=n(1);function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){h(i,r,a,o,u,"next",e)}function u(e){h(i,r,a,o,u,"throw",e)}o(void 0)}))}}var E={openPrivateChannel:function(e,t,n,a){var i=this;return _(regeneratorRuntime.mark((function o(){var u,l,s,d,p,h;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===t&&(t=!1),void 0===n&&(n=!1),u=i._getRecipients(e),l=function(e){t&&c.default.call(e.id,n,!0,e.isDM()?e.getRecipientId():null)},1!==u.length){o.next=10;break}if(s=u[0],null==(d=i._openCachedDMChannel(s))){o.next=10;break}return l(d),o.abrupt("return",Promise.resolve(d.id));case 10:return o.next=12,r.default.post({url:f.Endpoints.USER_CHANNELS,body:{recipients:u},context:{location:a},oldFormErrors:!0});case 12:return p=o.sent,h=i._openPrivateChannel(p.body),l(h),o.abrupt("return",p.body.id);case 16:case"end":return o.stop()}}),o)})))()},_openCachedDMChannel:function(e){var t=u.default.getDMFromUserId(e),n=null!=t?u.default.getChannel(t):null;return n?(d.default.selectPrivateChannel(n.id),n):null},ensurePrivateChannel:function(e){var t=this;return _(regeneratorRuntime.mark((function n(){var i,u,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t._getRecipients(e),n.next=3,r.default.post({url:f.Endpoints.USER_CHANNELS,body:{recipients:i},oldFormErrors:!0});case 3:return u=n.sent,l=o.default.fromServer(u.body),a.default.dispatch({type:f.ActionTypes.CHANNEL_CREATE,channel:l}),n.abrupt("return",l.id);case 7:case"end":return n.stop()}}),n)})))()},_getRecipients:function(e){return null!=e?Array.isArray(e)?e:[e]:[]},_openPrivateChannel:function(e){var t=o.default.fromServer(e);return a.default.dispatch({type:f.ActionTypes.CHANNEL_CREATE,channel:t}),d.default.selectPrivateChannel(t.id),t},closePrivateChannel:function(e,t){return void 0===t&&(t=!1),a.default.dispatch({type:f.ActionTypes.CHANNEL_DELETE,channel:{id:e,guild_id:null,parent_id:null}}),t&&!__OVERLAY__&&l.default.transitionTo(f.Routes.FRIENDS),r.default.delete({url:f.Endpoints.CHANNEL(e),oldFormErrors:!0})},updatePermissionOverwrite:function(e,t){return r.default.put({url:f.Endpoints.CHANNEL_PERMISSIONS_OVERWRITE(e,t.id),body:t,oldFormErrors:!0})},clearPermissionOverwrite:function(e,t){return r.default.delete({url:f.Endpoints.CHANNEL_PERMISSIONS_OVERWRITE(e,t),oldFormErrors:!0})},addRecipient:function(e,t,n){var a=this;return r.default.put({url:f.Endpoints.CHANNEL_RECIPIENT(e,t),context:{location:n},oldFormErrors:!0}).then((function(t){return 201===t.status?a._openPrivateChannel(t.body).id:e}))},addRecipients:function(e,t,n){var r=this;return this.addRecipient(e,t[0],n).then((function(e){return Promise.all(t.slice(1).map((function(t){return r.addRecipient(e,t,n)}))).then((function(){return e}))}))},removeRecipient:function(e,t){return r.default.delete({url:f.Endpoints.CHANNEL_RECIPIENT(e,t),oldFormErrors:!0})},setName:function(e,t){return _(regeneratorRuntime.mark((function n(){var a,o,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=null===(a=u.default.getChannel(e))||void 0===a?void 0:a.getGuildId(),n.next=3,r.default.patch({url:f.Endpoints.CHANNEL(e),body:{name:t},oldFormErrors:!0});case 3:return l=n.sent,null!=o&&i.default.checkGuildTemplateDirty(o),n.abrupt("return",l);case 6:case"end":return n.stop()}}),n)})))()},setIcon:function(e,t){var n,a=null===(n=u.default.getChannel(e))||void 0===n?void 0:n.getGuildId();r.default.patch({url:f.Endpoints.CHANNEL(e),body:{icon:t},oldFormErrors:!0}).then((function(){null!=a&&i.default.checkGuildTemplateDirty(a)}))},convertToGuild:function(e){return r.default.post({url:f.Endpoints.CHANNEL_CONVERT(e),oldFormErrors:!0})},preload:function(e,t){a.default.dispatch({type:f.ActionTypes.CHANNEL_PRELOAD,guildId:e===f.ME?null:e,channelId:t,context:f.CURRENT_APP_CONTEXT})},fetchChannelStoreListing:function(e,t){var n=null!=t?f.Endpoints.CHANNEL_STORE_LISTING_SKU(e,t):f.Endpoints.CHANNEL_STORE_LISTING(e);return(0,s.httpGetWithCountryCodeQuery)(n).then((function(t){a.default.dispatch({type:f.ActionTypes.STORE_LISTING_FETCH_SUCCESS,channelId:e,storeListing:t.body})}))},createTextChannel:function(e,t,n,a){return _(regeneratorRuntime.mark((function o(){var u,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return u={type:f.ChannelTypes.GUILD_TEXT,name:t,permission_overwrites:[]},null!=n&&(u.parent_id=n),null!=a&&(u.topic=a),o.next=5,r.default.post({url:f.Endpoints.GUILD_CHANNELS(e),body:u,oldFormErrors:!0});case 5:return l=o.sent,i.default.checkGuildTemplateDirty(e),o.abrupt("return",l);case 8:case"end":return o.stop()}}),o)})))()}};t.default=E},1411:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var r,a,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=(r=n(57))&&r.__esModule?r:{default:r};function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(e){var t=e.width,n=void 0===t?24:t,r=e.height,a=void 0===r?24:r,u=e.color,c=void 0===u?"currentColor":u,d=e.foreground,f=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["width","height","color","foreground"]);return i.createElement("svg",l({},(0,o.default)(f),{width:n,height:a,viewBox:"0 0 24 24"}),s("path",{foreground:d,fill:c,fillRule:"evenodd",clipRule:"evenodd",d:"M8.99991 16.17L4.82991 12L3.40991 13.41L8.99991 19L20.9999 7.00003L19.5899 5.59003L8.99991 16.17Z"}))}c.displayName="Checkmark"},1412:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=p(n(9)),u=n(218),l=p(n(72)),s=n(217),c=p(n(1411)),d=n(1),f=p(n(5244));function p(e){return e&&e.__esModule?e:{default:e}}function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function _(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}!function(e){e.DEFAULT="default",e.INVERTED="inverted",e.GHOST="ghost"}(a||(a={}));var v={BOX:f.default.box,ROUND:f.default.round},y={TOP:f.default.alignTop,CENTER:f.default.alignCenter},m=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleChange=function(e){var n=t.props.onChange;n&&n(e,e.currentTarget.checked)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.getInputMode=function(){return this.props.disabled?"disabled":this.props.readOnly?"readonly":"default"},i.getStyle=function(){var e=this.props,t=e.value,n=e.type,r=e.color,i=this.props.style||{};if(!1===t)return i;switch(i=E({},i),n){case a.DEFAULT:i.borderColor=r;break;case a.GHOST:i.borderColor=(0,u.hex2rgb)(r,.15),i.backgroundColor=(0,u.hex2rgb)(r,.15);break;case a.INVERTED:i.backgroundColor=r,i.borderColor=r}return i},i.getColor=function(){var e=this.props,t=e.value,n=e.type,r=e.color;return t?n===a.INVERTED?d.Colors.WHITE:r:"transparent"},i.render=function(){var e,t=this.props,n=t.disabled,r=t.readOnly,a=t.value,i=t.shape,u=t.align,p=t.className,h=t.children,v=t.size,y=t.reverse,m=t.checkboxColor,g=t.displayOnly,T=null!=h?_("div",{className:(0,o.default)(f.default.label,n?f.default.labelDisabled:f.default.labelClickable,y?f.default.labelReversed:f.default.labelForward),style:{lineHeight:v+"px"}},void 0,h):null;return _("label",{className:(0,o.default)(n?f.default.checkboxWrapperDisabled:f.default.checkboxWrapper,u,p)},void 0,y?T:null,!g&&_(l.default,{},void 0,_("input",{className:(0,s.getClass)(f.default,"input",this.getInputMode()),type:"checkbox",onChange:n||r?d.NOOP:this.handleChange,checked:a,style:{width:v,height:v}})),_("div",{className:(0,o.default)(f.default.checkbox,i,(e={},e[f.default.checked]=a,e)),style:E({width:v,height:v,borderColor:m},this.getStyle())},void 0,_(c.default,{width:18,height:18,color:this.getColor(),"aria-hidden":!0})),y?null:T)},r}(i.PureComponent);m.displayName="Checkbox",m.Types=a,m.Shapes=v,m.Aligns=y,m.defaultProps={size:24,disabled:!1,readOnly:!1,displayOnly:!1,value:!1,type:a.DEFAULT,color:d.Colors.BRAND,shape:v.BOX,align:y.CENTER,onChange:d.NOOP,reverse:!1};var g=m;t.default=g},1413:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=C(n(7)),i=C(n(149)),o=C(n(15)),u=C(n(3)),l=C(n(87)),s=C(n(25)),c=C(n(558)),d=C(n(213)),f=C(n(84)),p=C(n(136)),h=C(n(40)),_=O(n(140)),E=C(n(288)),v=C(n(14)),y=C(n(45)),m=C(n(1426)),g=O(n(1456)),T=C(n(1475)),A=n(1),I=C(n(6));function S(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return S=function(){return e},e}function O(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=S();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function C(e){return e&&e.__esModule?e:{default:e}}function N(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){N(i,r,a,o,u,"next",e)}function u(e){N(i,r,a,o,u,"throw",e)}o(void 0)}))}}var M=[];function P(e){return e=e.toLowerCase(),v.default.isWindows()&&(e=(e=e.replace(/^[a-z]:/,"")).replace(/\\/g,"/")),e}function R(e){e&&((e=P(e)).endsWith("/")||(e+="/"),M.push(e))}function L(e,t){e=P(e);var n=!1;return M.forEach((function(t){!n&&e.startsWith(t)&&(e=e.substr(t.length),n=!0)})),n||(e=e.split("/").pop()),t||(e=e.includes("dosbox.exe")?e.split("/").slice(-3).join("/"):e.split("/").slice(-2).join("/")),e}function D(){return(D=b(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,y.default.ensureModule("discord_game_utils");case 5:return e.next=7,y.default.requireModule("discord_game_utils");case 7:r=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),new s.default("GamesActionCreators").error("could not load discord_game_utils",e.t0);case 13:return v.default.isWindows()&&(R((t=l.default.process.env).LOCALAPPDATA),R(t["PROGRAMFILES(X86)"]),R(t.PROGRAMFILES),R(t.PROGRAMW6432),R(t.PROGRAMDATA),R("/games/")),n=l.default.remoteApp.getPath,e.t1=R,e.next=18,n("home");case 18:return e.t2=e.sent,(0,e.t1)(e.t2),e.t3=R,e.next=23,n("appData");case 23:return e.t4=e.sent,(0,e.t3)(e.t4),e.t5=R,e.next=28,n("desktop");case 28:return e.t6=e.sent,(0,e.t5)(e.t6),e.t7=R,e.next=33,n("documents");case 33:return e.t8=e.sent,(0,e.t7)(e.t8),e.t9=R,e.next=38,n("downloads");case 38:e.t10=e.sent,(0,e.t9)(e.t10),(M=a.default.uniq(M)).sort((function(e,t){return t.length-e.length}));case 42:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function w(e,t){k(e).then((function(){return E.default.waitConnected(e)})).then((function(){return Promise.race([E.default.waitSubscribed(e,A.RPCEvents.ACTIVITY_JOIN),E.default.waitSubscribed(e,A.RPCEvents.GAME_JOIN)])})).then((function(){return u.default.dispatch({type:A.ActionTypes.ACTIVITY_JOIN,applicationId:e,secret:t})})).catch((function(){return u.default.dispatch({type:A.ActionTypes.ACTIVITY_JOIN_FAILED,applicationId:e})}))}function U(e,t){return null==e||""===e?null:{distributor:e,sku:t}}function k(e,t){if(c.default.isConnected(e))return Promise.resolve();var n,r=null;if(null==t){var a=p.default.getActiveLibraryApplication(e);t=null!=a?a.branchId:e}if(d.default.isLaunchable(e,t)){var l=d.default.getState(e,t),s=p.default.getActiveLaunchOptionId(e,t);if(null==l)throw new Error("Missing dispatch game when launching");var _=p.default.getLibraryApplication(e,t);if(null==_)throw new Error("Missing library application when launching");r=(n=e,o.default.post({url:A.Endpoints.OAUTH2_AUTHORIZE,query:{client_id:n,response_type:"token",scope:[A.OAuth2Scopes.IDENTIFY].join(" ")},retries:3,body:{authorize:!0},oldFormErrors:!0}).then((function(e){var t=e.body.location.split(/#|\?/),n=i.default.parse(t[t.length-1]);if("invalid_request"===n.error)return null;if(null!=n.error)throw new Error("OAuth2 Error: "+n.error+": "+(n.error_description||"unknown error"));return n.access_token}),(function(e){if(404===e.status)return null;throw e}))).then((function(e){return E.default.launchDispatchApplication(l,e,h.default.locale,_.getBranchName(),s)}))}else{var v=f.default.getGame(e);r=null!=v?E.default.launch(v):E.default.launchGame(e)}var y=new Error("game not found");return null!=r?(u.default.dispatch({type:A.ActionTypes.LIBRARY_APPLICATION_ACTIVE_BRANCH_UPDATE,applicationId:e,branchId:t}),u.default.dispatch({type:A.ActionTypes.GAME_LAUNCH_START,applicationId:e}),r.then((function(t){u.default.dispatch({type:A.ActionTypes.GAME_LAUNCH_SUCCESS,applicationId:e,pids:t})})).catch((function(t){T.default.show(A.NoticeTypes.GENERIC,I.default.Messages.GAME_LAUNCH_FAILED_LAUNCH_TARGET_NOT_FOUND),u.default.dispatch({type:A.ActionTypes.GAME_LAUNCH_FAIL,applicationId:e,error:y})}))):(u.default.dispatch({type:A.ActionTypes.GAME_LAUNCH_FAIL,applicationId:e,error:y}),Promise.reject(y))}var G={addGame:function(e){u.default.dispatch({type:A.ActionTypes.RUNNING_GAME_ADD_OVERRIDE,pid:e})},fetchApplication:function(e,t){return void 0===t&&(t=!1),u.default.dirtyDispatch({type:A.ActionTypes.APPLICATION_FETCH,applicationId:e}),o.default.get({url:A.Endpoints.APPLICATION_PUBLIC(e),query:{with_guild:t},oldFormErrors:!0}).then((function(e){return u.default.dispatch({type:A.ActionTypes.APPLICATION_FETCH_SUCCESS,application:e.body}),e.body})).catch((function(t){return u.default.dispatch({type:A.ActionTypes.APPLICATION_FETCH_FAIL,applicationId:e}),Promise.reject(t)}))},fetchApplications:function(e){return b(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u.default.dirtyDispatch({type:A.ActionTypes.APPLICATIONS_FETCH,applicationIds:e}),t.prev=1,t.next=4,o.default.get({url:A.Endpoints.APPLICATIONS_PUBLIC,query:i.default.stringify({application_ids:e}),oldFormErrors:!0});case 4:n=t.sent,t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(1),u.default.dispatch({type:A.ActionTypes.APPLICATIONS_FETCH_FAIL,applicationIds:e}),t.t0;case 11:u.default.dispatch({type:A.ActionTypes.APPLICATIONS_FETCH_SUCCESS,applications:n.body});case 12:case"end":return t.stop()}}),t,null,[[1,7]])})))()},toggleOverlay:function(e){var t=f.default.getGameByName(e.name);if(null!=t){var n=p.default.getActiveLibraryApplication(t.id);if(null!=n){var r=_.toggleFlag(n.getFlags(),A.LibraryApplicationFlags.OVERLAY_DISABLED);return void g.updateFlags(n.id,n.branchId,r)}}u.default.dispatch({type:A.ActionTypes.RUNNING_GAME_TOGGLE_OVERLAY,game:e})},editName:function(e,t){u.default.dispatch({type:A.ActionTypes.RUNNING_GAME_EDIT_NAME,game:e,newName:t})},identifyGame:function(e,t){return function(){return D.apply(this,arguments)}().then((function(){return new Promise((function(t,n){null!=r?r.identifyGame(e,(function(r,a){0===r?a.icon&&a.name?(u.default.dispatch({type:A.ActionTypes.GAME_ICON_UPDATE,gameName:a.name,icon:"data:image/png;base64,"+a.icon}),t(a)):n(new Error("Did not find data on "+e)):n(new Error("Error "+r+" when fetching info on "+e))})):n(new Error("Game utils module not loaded"))}))}))},getDetectableGames:function(){f.default.fetching||null!=f.default.lastFetched||u.default.wait((function(){u.default.dispatch({type:A.ActionTypes.GAMES_DATABASE_FETCH}),o.default.get({url:A.Endpoints.APPLICATIONS_DETECTABLE,headers:{"If-None-Match":f.default.etag},retries:1,oldFormErrors:!0}).then((function(e){var t=e.body,n=e.headers.etag;u.default.dispatch({type:A.ActionTypes.GAMES_DATABASE_UPDATE,games:t,etag:n})}),(function(e){304===e.status?u.default.dispatch({type:A.ActionTypes.GAMES_DATABASE_UPDATE,games:[],etag:f.default.etag}):u.default.dispatch({type:A.ActionTypes.GAMES_DATABASE_FETCH_FAIL})}))}))},reportUnverifiedGame:function(e){var t=e.name,n=e.iconHash,r=e.publisher,a=e.distributor,i=e.sku,l=e.executableName;o.default.post({url:A.Endpoints.UNVERIFIED_APPLICATIONS,body:{name:t,os:v.default.platform,icon:n,distributor_application:U(a,i),executable:L(l,!1),publisher:r,report_version:A.GAME_REPORT_VERSION},retries:1,oldFormErrors:!0}).then((function(e){var t=e.body,n=t.name,r=t.hash,a=t.missing_data;u.default.dispatch({type:A.ActionTypes.UNVERIFIED_GAME_UPDATE,name:n,hash:r,missingData:a})}))},uploadIcon:function(e,t,n){o.default.post({url:A.Endpoints.UNVERIFIED_APPLICATIONS_ICONS,body:{application_name:e,application_hash:t,icon:n},retries:1,oldFormErrors:!0})},deleteEntry:function(e){u.default.dispatch({type:A.ActionTypes.RUNNING_GAME_DELETE_ENTRY,game:e})},launch:k,join:function(e,t,n,r,a){return b(regeneratorRuntime.mark((function i(){var o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!__OVERLAY__){i.next=3;break}return u.default.dispatch({type:A.ActionTypes.OVERLAY_JOIN_GAME,userId:e,sessionId:t,applicationId:n,channelId:r,messageId:a}),i.abrupt("return",Promise.resolve(!0));case 3:return u.default.dispatch({type:A.ActionTypes.ACTIVITY_JOIN_LOADING,applicationId:n}),i.prev=4,i.next=7,m.default.getJoinSecret(e,t,n,r,a);case 7:return o=i.sent,w(n,o),i.abrupt("return",!0);case 12:return i.prev=12,i.t0=i.catch(4),u.default.dispatch({type:A.ActionTypes.ACTIVITY_JOIN_FAILED,applicationId:n}),i.abrupt("return",!1);case 16:case"end":return i.stop()}}),i,null,[[4,12]])})))()},joinWithSecret:w};t.default=G},1415:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=s(n(9)),o=s(n(5115)),u=n(1),l=s(n(5235));function s(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var p={XSMALL:l.default.xsmall,SMALL:l.default.small,MEDIUM:l.default.medium,LARGE:l.default.large};var h=function(e){var t,r=e.game,s=e.skuId,c=e.className,h=e.size,_=void 0===h?p.MEDIUM:h,E=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["game","skuId","className","size"]);return null!=s&&(t=function(e){if(null==e)return null;switch(e){case u.PremiumSubscriptionSKUs.GUILD:return n(5143);case u.PremiumSubscriptionSKUs.TIER_1:return n(5144);case u.PremiumSubscriptionSKUs.TIER_2:case u.PremiumSubscriptionSKUs.LEGACY:return n(5145);default:return null}}(s)),null!=r&&null==t&&(t=r.getIconURL(60)),null==t?f(o.default,{className:(0,i.default)(l.default.gameIcon,_,c)}):a.createElement("div",d({},E,{className:(0,i.default)(l.default.gameIcon,_,c),style:{backgroundImage:"url('"+t+"')"}}))};h.displayName="GameIcon",h.Sizes=p;var _=h;t.default=_},1418:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAndRebuild=K,t.default=void 0;var r=C(n(7)),a=C(n(113)),i=C(n(1469)),o=C(n(793)),u=n(1431),l=C(n(274)),s=C(n(211)),c=C(n(341)),d=C(n(1460)),f=C(n(29)),p=C(n(331)),h=C(n(197)),_=C(n(101)),E=C(n(34)),v=C(n(797)),y=C(n(99)),m=C(n(98)),g=C(n(40)),T=C(n(24)),A=C(n(297)),I=n(892),S=n(1),O=C(n(6));function C(e){return e&&e.__esModule?e:{default:e}}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var b={action:function(e){e.content=(0,S.MARKDOWN_SPOILER_WRAPPER)(e.content).trim()}},M={match:a.default.anyScopeRegex(S.MARKDOWN_SPOILER_REGEXP),parse:function(){return{content:"<"+O.default.Messages.SPOILER.toLowerCase()+">"}}},P={tts:{action:function(e){e.tts=g.default.enableTTSCommand}},me:{action:function(e){e.content="_"+e.content+"_"}},tableflip:{action:function(e){e.content=(e.content+" (╯°□°）╯︵ ┻━┻").trim()}},unflip:{action:function(e){e.content=(e.content+" ┬─┬ ノ( ゜-゜ノ)").trim()}},shrug:{action:function(e){e.content=(e.content+" ¯\\_(ツ)_/¯").trim()}},nick:{action:function(e,t){var n=t.guildId,r=t.channelId;i.default.changeNickname(n,r,S.ME,e.content),e.content=""}},reaction:{match:a.default.anyScopeRegex(/^\+:(.+?): *$/),action:function(e,t){var n=t.isEdit,r=t.channelId,a=t.emojiContext;if(!n&&v.default.hasPresent(r)){var i=v.default.getMessages(r).last();if(i&&i.id){var o=e.content.trim(),l=a.getByName(o.slice(2,-1));null!=l&&(e.content="",(0,u.addReaction)(r,i.id,(0,I.toReactionEmoji)(l)))}}}},searchReplace:{match:a.default.anyScopeRegex(/^s\/((?:.+?)[^\\]|.)\/(.*)/),REMOVE_ESCAPE_CHARS:/\\([*?+/])/g,action:function(e,t){if(!t.isEdit){var n=e.content;e.content="";var r=m.default.getChannelId();if(r){var a=v.default.getLastEditableMessage(r);if(a&&a.id){var i=Array.from(n.match(this.match.regex)||[]),u=i[1],l=i[2];u=u.replace(this.REMOVE_ESCAPE_CHARS,(function(e,t){return t})),l=l.replace(this.REMOVE_ESCAPE_CHARS,(function(e,t){return t}));var s=a.content.replace(u,l);s||a.attachments.length?s!==a.content&&o.default.editMessage(r,a.id,{content:s}):o.default.deleteMessage(r,a.id)}}}}},spoiler:b};function R(e,t,n,r){n[e]=!0,t.action(n,r),s.default.trackWithMetadata(S.AnalyticEvents.SLASH_COMMAND_USED,{command:e})}function L(e,t,n,r){if(void 0===r&&(r=null),t[0]!==e)return null;var a=t.substr(e.length);return n.sortBy((function(e){return-e.text.length})).filter((function(e){var n=e.text;return 1===t.toLowerCase().indexOf(n.toLowerCase())})).sortBy((function(e){return e.text===a?0:1})).map((function(t){var n=t.id,a=t.text,i=t.hasNick;return[e+a,n,r,i]})).first()}function D(e){return{order:e.order,match:e.match,parse:function(t){return{type:e.type,content:t[0]}}}}function w(e){return{match:a.default.anyScopeRegex(e),parse:function(e){return{type:"text",content:e[0]}}}}var U=d.default.RULES,k=a.default.defaultRules.text,G=/^<@!?(\d+)>/,j=/^<@&(\d+)>/,F=/^<#(\d+)>/,x=/^<a?:(\w+):(\d+)>/,V={link:D(a.default.defaultRules.link),autolink:D(a.default.defaultRules.autolink),url:D(a.default.defaultRules.url),inlineCode:D(U.inlineCode),codeBlock:D(U.codeBlock),rawUserMention:w(G),rawRoleMention:w(j),rawChannelMention:w(F),rawEmoji:w(x),mention:{match:function(e,t,n){var r=n.split(" ").pop()+e;if(/^[^ ]+@[^ ]+\.[^ .]+/.test(r))return null;var a=L("@",e,t.users,"mention");return a||(a=L("@",e,t.mentionableRoles,"roleMention"),a||(function(e){var t=e.indexOf(" "),n=-1===t?e:e.substr(0,t);return"@everyone"===n||"@here"===n}(e)?null:L("@",e,t.users.map((function(e){return N({},e,{text:e.text.split("#")[0]})})),"mention")))},parse:function(e){var t=e[1],n=e[2],r=e[3],a="@";return"roleMention"===n?a+="&":r&&(a+="!"),{type:n,content:"<"+a+t+">"}}},channel:{match:function(e,t){return L("#",e,t.channels)},parse:function(e){return{type:"text",content:"<#"+e[1]+">"}}},emoticon:{match:function(e,t,n){if(!g.default.convertEmoticons)return null;if(0!==n.length&&!/\s$/.test(n))return null;var r=l.default.EMOJI_SHORTCUT_RE.exec(e);return null==r||r[0].length!==e.length&&" "!==e[r[0].length]?null:r},parse:function(e){return{type:"emoticon",content:l.default.convertShortcutToName(e[1]),isShortcut:!0}}},emoji:{order:U.emoji.order,match:function(e){return l.default.EMOJI_NAME_RE.exec(e)},parse:function(e,t,n){var r=e[0],a=e[1],i=n.customEmoji,o=Object.prototype.hasOwnProperty.call(i,a)?i[a]:null;return null!=o?{type:"customEmoticon",content:"<"+(!0===o.animated?"a":"")+":"+(o.originalName||o.name)+":"+o.id+">",emoji:o}:{type:"text",content:r}}},customEmoticons:{match:function(e,t){return t.customEmoticonsRegex&&t.customEmoticonsRegex.exec(e)},parse:function(e,t,n){var r=e[0],a=e[1],i=n.emojiContext.getEmoticonByName(a);return null!=i?{type:"customEmoticon",content:"<"+(!0===i.animated?"a":"")+":"+i.name+":"+i.id+">",emoji:i}:{type:"text",content:r}}},text:N({},k,{match:function(e,t){if(t.textExclusions){var n="^[\\s\\S]+?(?="+t.textExclusions+"|[^0-9A-Za-z\\s\\u00ff-\\uffff]|\\n\\n| {2,}\\n|\\w+:\\S|$)";return new RegExp(n).exec(e)}return null!=k.match?k.match(e,t,""):null}})},B={inlineCode:D(U.inlineCode),codeBlock:D(U.codeBlock),mention:{match:a.default.anyScopeRegex(G),parse:function(e){var t=T.default.getUser(e[1]);return{content:null==t?e[0]:"@"+t.username+"#"+t.discriminator}}},roleMention:{match:a.default.anyScopeRegex(j),parse:function(e,t,n){var r=n.guild;if(null!=r){var a=r.roles[e[1]];if(null!=a)return{content:"@"+a.name}}return{content:e[0]}}},channel:{match:a.default.anyScopeRegex(F),parse:function(e){var t=f.default.getChannel(e[1]);return{content:null==t?e[0]:(0,c.default)(t,!0)}}},emoji:{match:a.default.anyScopeRegex(x),parse:function(e,t,n){e[0];var r=e[1],a=e[2],i=n.guild,o=p.default.getDisambiguatedEmojiContext(i?i.id:null).getById(a);return{content:":"+(o?o.name:r)+":"}}},spoiler:N({},M),text:N({},k)};[V,B].forEach((function(e){Object.keys(e).forEach((function(t,n){e[t].order=n}))}));var H=a.default.parserFor(V),W=/(?:<a?:\w+:(\d+)>)|:(?:([^\s:]+?)(?:::skin-tone-\d)?:)/g;function Y(e,t,n,r){var a="";return e.forEach((function(e){if(function(e,t,n){if(null!=n&&("customEmoticon"===t.type&&n(t.emoji,!1),"emoticon"===t.type||"text"===t.type))for(var r,a=l.default.translateSurrogatesToInlineEmoji(t.content);null!==(r=W.exec(a));){var i=void 0;r[1]?e.emojiContext&&(i=e.emojiContext.getById(r[1])):i=l.default.getByName(r[2]),i&&n(i,t.isShortcut||!1)}}(t,e,r),e.content.constructor===String)switch(e.type){case"codeBlock":case"inlineCode":case"mention":case"roleMention":case"channel":case"emoji":a+=e.content;break;default:a+=n(e.content)}else e.content.constructor===Array?a+=Y(e.content,t,n,r):console.warn("Unknown message item type: ",e)})),a}function K(e,t,n){return Y(H(e,t),t,l.default.translateInlineEmojiToSurrogates,n)}function z(e){var t,n=e.getGuildId(),a=n?E.default.getGuild(n):null,i=y.default.can(S.Permissions.MENTION_EVERYONE,e);t=e.isPrivate()?e.recipients.map((function(e){return{userId:e,nick:null}})):null!=n?_.default.getMembers(n).map((function(e){return{userId:e.userId,nick:e.nick}})):[];var o=(0,r.default)(t.reduce((function(e,t){var n=t.userId,r=t.nick,a=T.default.getUser(n);return null==a||e.push({id:n,hasNick:null!=r,text:a.username+"#"+a.discriminator}),e}),[])),u=(0,r.default)(null!=a?a.roles:{}).values().filter((function(e){var t=e.mentionable;return i||t})).map((function(e){return{id:e.id,text:e.name}})),l=(0,r.default)(h.default.getTextChannelNameDisambiguations(e.guild_id)).map((function(e){return{id:e.id,text:e.name}})),s=p.default.getDisambiguatedEmojiContext(n),c=s.getEscapedCustomEmoticonNames(),d=s.getCustomEmoji(),f=s.getCustomEmoticonRegex();return{inline:!0,mentionableRoles:u,guild:a,users:o,channels:l,emojiContext:s,customEmoticonsRegex:f,customEmoji:d,textExclusions:c,disableErrorGuards:!0}}var q={parse:function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!0);var a=z(e),i={content:t,tts:!1,invalidEmojis:[],validNonShortcutEmojis:[]};return r&&function(e,t){for(var n in P){var r=P[n];if(null==r.match){if("/"===e.content[0]){var a=e.content.split(" ");if(n===a[0].slice(1)&&r.action){e.content=a.slice(1).join(" "),R(n,r,e,t);break}}}else if(r.match.regex.test(e.content)){R(n,r,e,t);break}}}(i,{guildId:e.getGuildId(),guild:a.guild,channelId:e.id,channel:e,isEdit:n,emojiContext:a.emojiContext}),i.content=K(i.content,a,(function(t,n){A.default.isEmojiDisabled(t,e)?i.invalidEmojis.push(t):n||i.validNonShortcutEmojis.push(t)})),i},parsePreprocessor:function(e,t){var n=z(e);return H(t,n)},unparse:function(e,t,n){var i=f.default.getChannel(t),o=i?i.getGuildId():null,u=o?E.default.getGuild(o):null,s=n?B:r.default.omit(B,["spoiler"]),c={inline:!0,guild:u};return Y(a.default.parserFor(s)(e,c),c,l.default.translateSurrogatesToInlineEmoji)}};t.default=q},1419:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackAppUIViewed=function(e){l.trackAppUIViewed(e)};var r=o(n(118)),a=o(n(16)),i=n(1);function o(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=new(function(){function e(){this.loadId=r.default.v4(),this.appUIViewed=!1}var t=e.prototype;return t.trackEvent=function(e,t){var n=this,r=Date.now();requestIdleCallback((function(){a.default.track(e,u({},function(){var e=!1,t={total_compressed_byte_size:0,total_uncompressed_byte_size:0,total_transfer_byte_size:0,js_compressed_byte_size:0,js_uncompressed_byte_size:0,js_transfer_byte_size:0,css_compressed_byte_size:0,css_uncompressed_byte_size:0,css_transfer_byte_size:0};null!=window.performance&&null!=window.performance.getEntries&&window.performance.getEntries().forEach((function(n){var r=null!=n.encodedBodySize?n.encodedBodySize:n.decodedBodySize,a=null!=n.decodedBodySize?n.decodedBodySize:n.encodedBodySize,i=n.transferSize;null!=a&&null!=r&&(e=!0,t.total_compressed_byte_size+=r,t.total_uncompressed_byte_size+=a,null!=i&&(t.total_uncompressed_byte_size+=i),"resource"===n.entryType&&("script"===n.initiatorType&&null!=n.name&&n.name.match(/\.js/)&&(t.js_compressed_byte_size+=r,t.js_uncompressed_byte_size+=a,null!=i&&(t.js_uncompressed_byte_size+=i)),"link"===n.initiatorType&&null!=n.name&&n.name.match(/\.css/)&&(t.css_compressed_byte_size+=r,t.css_uncompressed_byte_size+=a,null!=i&&(t.css_uncompressed_byte_size+=i))))}));return e?t:{}}(),{load_id:n.loadId,screen_name:t,duration_ms_since_app_opened:r-window.GLOBAL_ENV.HTML_TIMESTAMP}))}))},t.trackAppUIViewed=function(e){this.appUIViewed||(this.trackEvent(i.AnalyticEvents.APP_UI_VIEWED,e),this.appUIViewed=!0)},e}())},1420:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=S(n(156)),a=S(n(18)),i=S(n(7)),o=S(n(5)),u=n(44),l=S(n(3)),s=n(219),c=n(200),d=S(n(272)),f=S(n(20)),p=S(n(850)),h=S(n(29)),_=S(n(98)),E=S(n(851)),v=S(n(24)),y=S(n(1474)),m=S(n(199)),g=S(n(874)),T=n(880),A=S(n(1463)),I=n(1);function S(e){return e&&e.__esModule?e:{default:e}}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var C=Object.freeze([]),N=[],b={},M={},P={},R={},L={},D={};function w(){var e=[],t=_.default.getChannelId();null!=t&&e.push(t);var n=_.default.getVoiceChannelId();null==n||e.includes(n)||e.push(n),i.default.difference(N,e).forEach(B),N=e}var U=function(e,t){var n;return""+g.default.getName(null===(n=h.default.getChannel(e))||void 0===n?void 0:n.getGuildId(),e,t).toLowerCase().padEnd(32,"!")+t.discriminator};function k(e){return i.default.sortBy(e,(function(e){var t,n,r;switch(e.type){case T.ParticipantTypes.STREAM:var a=e.stream.channelId;return""+(e.userVideo?String.fromCharCode(1):String.fromCharCode(2))+U(a,e.user)+String.fromCharCode(1);case T.ParticipantTypes.USER:var i="";return(null===(t=e.voiceState)||void 0===t?void 0:t.selfVideo)?i=String.fromCharCode(1):(null===(n=e.voiceState)||void 0===n?void 0:n.selfStream)&&(i=String.fromCharCode(2)),""+i+U(null===(r=e.voiceState)||void 0===r?void 0:r.channelId,e.user)}}))}function G(e,t){return void 0===t&&(t=N),t.reduce((function(t,n){if(null==b[n])return t;var r=b[n].reduce((function(t,r,a){var i=e(r);return i!==r?(b[n][a]=i,!0):t}),!1);return r&&(b[n]=k(b[n])),t||r}),!1)}function j(e){return void 0===e&&(e=N),e.reduce((function(e,t){var n=b[t],a=k(function(e){var t=h.default.getChannel(e);if(null==t||t.type===I.ChannelTypes.GUILD_TEXT)return[];var n=p.default.getCall(e);if(t.isPrivate()&&(null==n||n.unavailable))return[];var r,a=f.default.getId(),i=m.default.getVoiceStateMapForChannel(t);if(t.type===I.ChannelTypes.GUILD_VOICE){var o=i[a];r=null!=o&&o.channelId===e?Object.keys(i):[]}else r=[].concat(t.recipients,[a]);var l=[];r.forEach((function(t){var r,a,o=v.default.getUser(t);if(null!=o){var s=i[t];null!=s&&s.channelId!==e&&(s=null);var f=null!==(r=null==n||null===(a=n.ringing)||void 0===a?void 0:a.includes(t))&&void 0!==r&&r;if(null!=s||f){l.push(O({type:T.ParticipantTypes.USER},y.default.getUserStreamData(t),{user:o,id:o.id,voiceState:s,speaking:E.default.isSpeaking(t),soundsharing:E.default.isSoundSharing(t),ringing:f}));var p,h,_=d.default.getStreamForUser(t),m=d.default.getActiveStreamForUser(t);if((null==_?void 0:_.channelId)===e||(null==m?void 0:m.channelId)===e)l.push(O({},y.default.getUserStreamData(t,u.MediaEngineContextTypes.STREAM),{type:T.ParticipantTypes.STREAM,id:(0,c.encodeStreamKey)(null!=_?_:m),userVideo:null!==(p=null===(h=s)||void 0===h?void 0:h.selfVideo)&&void 0!==p&&p,user:o,stream:null!=_?_:m}))}}}));var s=d.default.getAllActiveStreamsForChannel(e),_=new Set(l.map((function(e){return e.id})));return s.forEach((function(e){var t=(0,c.encodeStreamKey)(e);if(!_.has(t)){var n=v.default.getUser(e.ownerId);if(null==n)return;l.push(O({},y.default.getUserStreamData(e.ownerId,u.MediaEngineContextTypes.STREAM),{type:T.ParticipantTypes.STREAM,id:t,userVideo:!1,user:n,stream:e}))}})),l}(t));return(0,r.default)(n,a)?e:(b[t]=a,function(e){var t=b[e];if(null==t)return;var n=Z(e)||t.some(V)?I.ChannelModes.VIDEO:I.ChannelModes.VOICE;n===I.ChannelModes.VOICE?(delete P[e],delete R[e]):P[e]=n}(t),x(t),!0)}),!1)}function F(e){var t=h.default.getChannel(e),n=(null==t?void 0:t.isDM())?T.ParticipantSelectionTypes.AUTO:T.ParticipantSelectionTypes.NONE;return M[e]||[n,T.ParticipantSelectionTypes.NONE]}function x(e){var t=f.default.getId(),n=b[e];if(null!=n&&0!==n.length&&_.default.getVoiceChannelId()===e){var r=T.ParticipantSelectionTypes.NONE,i=n.find((function(e){return e.type===T.ParticipantTypes.STREAM&&d.default.getActiveStreamForStreamKey(e.id)})),o=n.filter((function(e){var t;return e.type===T.ParticipantTypes.USER&&(null===(t=e.voiceState)||void 0===t?void 0:t.selfVideo)}));if(null!=i)(0,a.default)(i.type===T.ParticipantTypes.STREAM,"Impossible condition"),r=i.id;else if(1===n.length)r=t;else if(1===o.length){r=o[0].id}else{var u,l=n.find((function(e){return e.type===T.ParticipantTypes.USER&&e.id!==t&&!e.ringing}));r=null!==(u=null==l?void 0:l.id)&&void 0!==u?u:t}var s=F(e)[0];s===T.ParticipantSelectionTypes.AUTO||s===T.ParticipantSelectionTypes.NONE||n.some((function(e){return s===e.id&&!(e.type===T.ParticipantTypes.STREAM&&null==d.default.getActiveStreamForStreamKey(e.id))}))||(s=T.ParticipantSelectionTypes.NONE),M[e]=[s,r]}else delete M[e]}function V(e){var t,n;return e.type===T.ParticipantTypes.STREAM||e.type===T.ParticipantTypes.USER&&null!==(t=null===(n=e.voiceState)||void 0===n?void 0:n.selfVideo)&&void 0!==t&&t}function B(e){delete b[e],delete M[e],delete P[e],delete R[e]}function H(){return w(),j()}function W(){return w(),j()}function Y(){return G((function(e){var t=E.default.isSpeaking(e.user.id),n=E.default.isSoundSharing(e.user.id);return e.type!==T.ParticipantTypes.USER||e.speaking===t&&e.soundsharing===n?e:O({},e,{speaking:t,soundsharing:n})}))}function K(){return G((function(e){var t=v.default.getUser(e.user.id);return e.user!==t&&null!=t?O({},e,{user:t}):e}))}function z(e){return j([e.channelId])}function q(e){var t=e.streamKey;return j([(0,c.decodeStreamKey)(t).channelId])}function X(e){var t=e.channelId,n=G((function(e){var t=y.default.getUserStreamData(e.user.id,(0,A.default)(e.type))||{},n=t.streamId,r=t.quality;return e.streamId!==n&&(e=O({},e,{streamId:n})),e.quality!==r&&(e=O({},e,{quality:r})),e}),[t]);return x(t),n}function Z(e){var t;return(null===(t=h.default.getChannel(e))||void 0===t?void 0:t.type)===I.ChannelTypes.GUILD_VOICE}var $=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.waitFor(f.default,h.default,d.default,p.default,_.default,y.default,m.default),this.syncWith([v.default],K),this.syncWith([E.default],Y)},a.getParticipants=function(e){return null==e?C:b[e]||C},a.getParticipantsOpen=function(e){var t;return null!=e&&(null===(t=L[e])||void 0===t||t)},a.getVoiceParticipantsHidden=function(e){var t;return null==e||null!==(t=D[e])&&void 0!==t&&t},a.getSelectedParticipantId=function(e){if(null==e)return null;var t=F(e),n=t[0],r=t[1];return n===T.ParticipantSelectionTypes.NONE?null:n!==T.ParticipantSelectionTypes.AUTO?n:r===T.ParticipantSelectionTypes.NONE||r===T.ParticipantSelectionTypes.AUTO?null:r},a.getSelectedParticipant=function(e){var t,n;if(null==e)return null;var r=this.getSelectedParticipantId(e);return null==r?null:null!==(t=null===(n=b[e])||void 0===n?void 0:n.find((function(e){return e.id===r})))&&void 0!==t?t:null},a.getMode=function(e){return null!=e&&P[e]||(Z(e)?I.ChannelModes.VIDEO:I.ChannelModes.VOICE)},a.getLayout=function(e,t){var n,r;return void 0===t&&(t=I.AppContext.APP),__OVERLAY__||null==e?I.ChannelLayouts.NORMAL:null!==(n=null===(r=R[e])||void 0===r?void 0:r[t])&&void 0!==n?n:Z(e)?I.ChannelLayouts.NO_CHAT:I.ChannelLayouts.NORMAL},r}(o.default.Store))(l.default,{CONNECTION_OPEN:function(e){return H()},OVERLAY_INITIALIZE:function(e){return H()},VOICE_STATE_UPDATE:function(e){return j()},VOICE_CHANNEL_SELECT:function(e){return W()},CHANNEL_SELECT:function(e){return W()},CHANNEL_RTC_ACTIVE_CHANNELS:function(e){return W()},CHANNEL_CREATE:function(e){var t=e.channel;if(t.type===I.ChannelTypes.GROUP_DM){var n,r,a,i=t.originChannelId;if(null!=i)return R[t.id]=((a={})[I.AppContext.APP]=null!==(n=null===(r=R[i])||void 0===r?void 0:r[I.AppContext.APP])&&void 0!==n?n:I.ChannelLayouts.NORMAL,a),!0}return!1},CHANNEL_DELETE:function(e){return B(e.channel.id)},CALL_CREATE:z,CALL_UPDATE:z,CALL_DELETE:function(e){return B(e.channelId)},RTC_CONNECTION_VIDEO:X,CHANNEL_RTC_SELECT_PARTICIPANT:function(e){var t,n,r=e.channelId,a=e.id;!a&&j([r]);var i=F(r)[1];M[r]=[null!=a?a:T.ParticipantSelectionTypes.NONE,i],((null==a?void 0:a.startsWith(s.StreamTypes.GUILD))||(null==a?void 0:a.startsWith(s.StreamTypes.CALL)))&&(null!==(t=null===(n=b[r])||void 0===n?void 0:n.some((function(e){var t;return e.type===T.ParticipantTypes.USER&&(null===(t=e.voiceState)||void 0===t?void 0:t.selfVideo)})))&&void 0!==t&&t||(L[r]=!1))},CHANNEL_RTC_UPDATE_LAYOUT:function(e){var t,n=e.channelId,r=e.layout,a=e.appContext;R[n]=O({},R[n],((t={})[a]=r,t))},CHANNEL_RTC_UPDATE_PARTICIPANTS_OPEN:function(e){var t=e.channelId,n=e.participantsOpen;L[t]=n},CHANNEL_RTC_UPDATE_VOICE_PARTICIPANTS_HIDDEN:function(e){var t=e.channelId,n=e.voiceParticipantsHidden;D[t]=n},MEDIA_ENGINE_VIDEO_QUALITY_CHANGED:X,STREAM_CLOSE:q,STREAM_DELETE:q});t.default=$},1421:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(5)),a=o(n(3)),i=n(1);function o(e){return e&&e.__esModule?e:{default:e}}var u=[];function l(){u=[]}var s=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.hasLayers=function(){return u.length>0},a.getLayers=function(){return u},r}(r.default.Store))(a.default,{LAYER_PUSH:function(e){var t=e.component;return(u.length>0?u[u.length-1]:null)!==i.Layers.VERIFICATION&&(!(u.indexOf(t)>=0)&&void(u=[].concat(u,[t])))},LAYER_POP:function(e){return function(){if(!u.length)return!1;u=u.slice(0,-1)}()},LAYER_POP_ALL:function(e){return l()},LOGOUT:function(e){return l()},NOTIFICATION_CLICK:function(e){return l()}});t.default=s},1422:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(5)),a=s(n(3)),i=s(n(29)),o=s(n(556)),u=s(n(197)),l=n(1);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d={},f=d,p=0;function h(){p+=1}function _(e){if(null==f[e])return!1;delete f[e]}var E=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,u,l,s=r.prototype;return s.initialize=function(e){this.waitFor(i.default,o.default),this.removeChangeListener(h),this.addChangeListener(h),f=e||d},s.getState=function(){return f},s.isCollapsed=function(e){return!(null==e||"null"===e||!f[e])&&f[e]},s.getCollapsedCategories=function(){return f},a=r,(u=[{key:"version",get:function(){return p}}])&&c(a.prototype,u),l&&c(a,l),r}(r.default.PersistedStore);E.persistKey="collapsedCategories";var v=new E(a.default,{CONNECTION_OPEN:function(e){Object.keys(f).forEach((function(e){0===o.default.totalUnavailableGuilds&&null==i.default.getChannel(e)&&delete f[e]}))},CATEGORY_COLLAPSE:function(e){var t=e.id;if(f[t])return!1;f[t]=!0},CATEGORY_EXPAND:function(e){return _(e.id)},CATEGORY_COLLAPSE_ALL:function(e){var t=e.guildId;u.default.getChannels(t)[l.ChannelTypes.GUILD_CATEGORY].forEach((function(e){var t=e.channel;"null"!==t.id&&(f[t.id]=!0)}))},CATEGORY_EXPAND_ALL:function(e){var t=e.guildId;u.default.getChannels(t)[l.ChannelTypes.GUILD_CATEGORY].forEach((function(e){var t=e.channel;delete f[t.id]}))},CHANNEL_DELETE:function(e){return _(e.channel.id)}});t.default=v},1425:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=h(n(15)),a=h(n(3)),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(811)),o=h(n(24)),u=n(1473),l=h(n(154)),s=n(792),c=h(n(1430)),d=n(1),f=h(n(6));function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function h(e){return e&&e.__esModule?e:{default:e}}function _(e){(0,s.closeContextMenu)(),c.default.close(),l.default.show(e)}function E(e,t){var n=e.status,r=e.body,a=r&&r.code;switch(n){case 429:_({title:f.default.Messages.FRIEND_REQUEST_RATE_LIMITED_HEADER,body:f.default.Messages.FRIEND_REQUEST_RATE_LIMITED_BODY,confirmText:f.default.Messages.FRIEND_REQUEST_RATE_LIMITED_BUTTON});break;case 403:if(a===d.AbortCodes.EMAIL_VERIFICATION_REQUIRED){_({title:f.default.Messages.FRIEND_REQUEST_REQUIRES_EMAIL_VALIDATION_HEADER,body:f.default.Messages.FRIEND_REQUEST_REQUIRES_EMAIL_VALIDATION_BODY,confirmText:f.default.Messages.FRIEND_REQUEST_REQUIRES_EMAIL_VALIDATION_BUTTON,onConfirm:function(){i.openClaimAccountModal()}});break}default:var o=null!=t?(0,u.humanizeAbortCode)(a||0,t):f.default.Messages.ADD_FRIEND_ERROR_OTHER;_({title:f.default.Messages.FRIEND_REQUEST_FAILED_HEADER,body:o,confirmText:f.default.Messages.OKAY})}throw e}var v={sendRequest:function(e,t){var n=e.split("#"),a=n[0],i=n[1];return r.default.post({url:d.Endpoints.USER_RELATIONSHIPS(),body:{username:a,discriminator:parseInt(i)},context:t,oldFormErrors:!0}).catch((function(t){E(t,e)}))},addRelationship:function(e,t,n,a){var i=o.default.getUser(e);return r.default.put({url:d.Endpoints.USER_RELATIONSHIP(e),body:{type:n,friendToken:a},context:t,oldFormErrors:!0}).catch((function(e){E(e,null==i?void 0:i.tag)}))},removeRelationship:function(e,t){r.default.delete({url:d.Endpoints.USER_RELATIONSHIP(e),context:t,oldFormErrors:!0})},fetchRelationships:function(){r.default.get({url:d.Endpoints.USER_RELATIONSHIPS(),oldFormErrors:!0}).then((function(e){return a.default.dispatch({type:d.ActionTypes.LOAD_RELATIONSHIPS_SUCCESS,relationships:e.body})}),(function(){return a.default.dispatch({type:d.ActionTypes.LOAD_RELATIONSHIPS_FAILURE})}))}};t.default=v},1426:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(n(15)),a=d(n(3)),i=d(n(211)),o=d(n(1418)),u=d(n(29)),l=d(n(1410)),s=d(n(793)),c=n(1);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}var p={updateActivity:function(e,t,n,i,o,u){void 0===i&&(i=null),void 0===o&&(o=0),void 0===u&&(u=!1),a.default.wait((function(){return a.default.dispatch({type:c.ActionTypes.ACTIVITY_UPDATE_START,applicationId:e,duration:o,distributor:t})})),r.default.post({url:c.Endpoints.ACTIVITIES,body:{application_id:e,token:i,duration:o,share_activity:n,distributor:t,closed:u},retries:1,oldFormErrors:!0}).then((function(n){var r=n.body.token;a.default.dispatch({type:c.ActionTypes.ACTIVITY_UPDATE_SUCCESS,applicationId:e,token:r,duration:o,distributor:t})})).catch((function(){a.default.dispatch({type:c.ActionTypes.ACTIVITY_UPDATE_FAIL,applicationId:e})}))},sendActivityInvite:function(e){var t=e.channelId,n=e.type,r=e.activity,a=e.content,l=e.location,d=u.default.getChannel(t);if(null==d)return Promise.resolve(null);var f=o.default.parse(d,a||"");return s.default.sendMessage(d.id,f,!1,{activityAction:{type:n,activity:r}}).then((function(e){return i.default.trackWithMetadata(c.AnalyticEvents.INVITE_SENT,{location:l,invite_type:r.type===c.ActivityTypes.LISTENING?c.InviteTypes.SPOTIFY:c.InviteTypes.APPLICATION,application_id:r.application_id,guild_id:d.getGuildId(),channel_id:d.id,message_id:null!=e?e.body.id:null}),Promise.resolve(d)}),(function(e){return Promise.reject(e)}))},sendActivityInviteUser:function(e){var t=this,n=e.userId,r=e.type,a=e.activity,i=e.content,o=e.location;return l.default.ensurePrivateChannel(n).then((function(e){return t.sendActivityInvite({channelId:e,type:r,activity:a,content:i,location:o})}))},getJoinSecret:function(e,t,n,a,i){return(o=regeneratorRuntime.mark((function o(){var u,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return u={},null!=a&&(u.channel_id=a),null!=i&&(u.message_id=i),o.next=5,r.default.get({url:c.Endpoints.USER_ACTIVITY_JOIN(e,t,n),retries:3,query:u});case 5:return l=o.sent,o.abrupt("return",l.body.secret);case 7:case"end":return o.stop()}}),o)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=o.apply(e,t);function i(e){f(a,n,r,i,u,"next",e)}function u(e){f(a,n,r,i,u,"throw",e)}i(void 0)}))})();var o}};t.default=p},1427:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=p(n(7)),a=p(n(5)),i=p(n(3)),o=n(553),u=p(n(20)),l=p(n(29)),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(197)),c=p(n(34)),d=n(1);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(e){return e&&e.__esModule?e:{default:e}}var h={},_=null;function E(){return h={},r.default.forEach(c.default.getGuilds(),(function(e){y(e.id)})),!0}function v(e,t){e.index=t}function y(e){if(null==e||null==c.default.getGuild(e))return!1;var t=s.default.getChannels(e),n={_categories:[],null:[]},r=function(e){var t=e.channel;(n[null!=t.parent_id?t.parent_id:"null"]||n.null).push({channel:t,index:-1})};return t[d.ChannelTypes.GUILD_CATEGORY].forEach((function(e){var t=e.channel;n._categories.push({channel:t,index:-1}),n[t.id]=[]})),t[s.GUILD_SELECTABLE_CHANNELS_KEY].forEach(r),t[d.ChannelTypes.GUILD_VOICE].forEach(r),(0,o.getFlattenedChannelList)(n._categories,n).forEach(v),h[e]=n,!0}function m(){E()}function g(e){return y(e.guild.id)}function T(e){return y(e.channel.guild_id)}function A(e){return y(e.guildId)}function I(e,t){return _=t,null!=e&&null!=e.getGuildId()&&y(e.getGuildId())}var S=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.waitFor(s.default,c.default,u.default,l.default)},a.getCategories=function(e){return function(e){return h[String(e)]||{_categories:[],null:[]}}(e)},r}(a.default.Store))(i.default,{CONNECTION_OPEN:function(e){return m()},OVERLAY_INITIALIZE:function(e){return m()},CACHE_LOADED_LAZY:function(e){return m()},GUILD_CREATE:g,GUILD_UPDATE:g,GUILD_DELETE:function(e){var t=e.guild.id;delete h[t]},CHANNEL_CREATE:T,CHANNEL_UPDATE:T,CHANNEL_DELETE:T,GUILD_MEMBER_UPDATE:function(e){return y(e.guildId)},CURRENT_USER_UPDATE:function(e){return E()},GUILD_ROLE_CREATE:A,GUILD_ROLE_UPDATE:A,GUILD_ROLE_DELETE:A,VIEW_AS_ROLES_UPDATE:A,VIEW_AS_ROLES_STOP:A,VOICE_CHANNEL_SELECT:function(e){var t=e.channelId;return null==t&&null!=_?I(l.default.getChannel(_),null):I(l.default.getChannel(t),t)},VOICE_STATE_UPDATE:function(e){var t=e.channelId,n=e.sessionId;return u.default.getSessionId()===n&&I(l.default.getChannel(t),t)}});t.default=S},1428:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XBOX_ACTIVITY_APPLICATION_ID=t.validStreamURL=t.ACTIVITY_INVITE_COVER_IMAGE_SIZE=void 0;t.ACTIVITY_INVITE_COVER_IMAGE_SIZE=160;t.validStreamURL=/^https?:\/\/(?:www\.)?(twitch\.tv\/(.+)|youtube.com\/watch\?v=)/;t.XBOX_ACTIVITY_APPLICATION_ID="438122941302046720"},1429:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(5)),a=s(n(3)),i=s(n(101)),o=s(n(34)),u=s(n(24)),l=n(1);function s(e){return e&&e.__esModule?e:{default:e}}var c={notClaimed:!1,notEmailVerified:!1,notPhoneVerified:!1,newAccount:!1,newMember:!1,canChat:!0},d={};function f(e){p(e);var t=o.default.getGuild(e),n=u.default.getCurrentUser();if(null!=t&&t.verificationLevel!==l.VerificationLevels.NONE&&!t.isOwner(n)){var r=i.default.getMember(t.id,n.id);if(!(null!=r&&r.roles.length>0)){var s=+n.createdAt+6e4*l.VerificationCriteria.ACCOUNT_AGE-Date.now(),c=+t.joinedAt+6e4*l.VerificationCriteria.MEMBER_AGE-Date.now(),f=t.verificationLevel>=l.VerificationLevels.LOW&&!n.isClaimed(),h=!1,_=!1,E=!1,v=!1;n.isPhoneVerified()||(h=t.verificationLevel>=l.VerificationLevels.LOW&&!n.verified,_=t.verificationLevel>=l.VerificationLevels.VERY_HIGH,E=t.verificationLevel>=l.VerificationLevels.MEDIUM&&s>0,v=t.verificationLevel>=l.VerificationLevels.HIGH&&c>0);var y,m=[];v&&m.push(c),E&&m.push(s),m.length&&(y=setTimeout((function(){return a.default.dispatch({type:l.ActionTypes.GUILD_VERIFICATION_CHECK,guildId:e})}),Math.max.apply(Math,m))),d[e]={notClaimed:f,notEmailVerified:h,notPhoneVerified:_,newAccount:E,newMember:v,canChat:!(f||h||_||E||v),accountDeadline:new Date(Date.now()+s),memberDeadline:new Date(Date.now()+c),timeoutRef:y}}}}function p(e){var t=d[e];null!=t&&clearTimeout(t.timeoutRef),delete d[e]}function h(e){f(e.guild.id)}var _=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.waitFor(o.default,u.default)},a.getCheck=function(e){return d[e]||c},a.canChatInGuild=function(e){return(d[e]||c).canChat},r}(r.default.Store))(a.default,{CONNECTION_OPEN:function(e){Object.keys(d).forEach(p),e.guilds.forEach((function(e){return f(e.id)}))},CONNECTION_CLOSED:function(e){Object.keys(d).forEach(p)},CURRENT_USER_UPDATE:function(e){Object.keys(d).forEach(f)},GUILD_CREATE:h,GUILD_UPDATE:h,GUILD_DELETE:function(e){p(e.guild.id)},GUILD_MEMBER_UPDATE:function(e){var t=e.guildId;if(e.user.id!==u.default.getCurrentUser().id)return!1;f(t)},GUILD_VERIFICATION_CHECK:function(e){f(e.guildId)}});t.default=_},1430:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_(n(15)),a=_(n(3)),i=_(n(1383)),o=_(n(25)),u=_(n(20)),l=_(n(84)),s=_(n(281)),c=_(n(280)),d=_(n(24)),f=_(n(16)),p=n(803),h=n(1);function _(e){return e&&e.__esModule?e:{default:e}}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){v(i,r,a,o,u,"next",e)}function u(e){v(i,r,a,o,u,"throw",e)}o(void 0)}))}}function m(e,t){return g.apply(this,arguments)}function g(){return(g=y(regeneratorRuntime.mark((function e(t,n){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.default.isGuest()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,r.default.get({url:h.Endpoints.USER_PROFILE(t),query:{friendToken:n},oldFormErrors:!0});case 6:i=e.sent,a.default.dispatch({type:h.ActionTypes.USER_UPDATE,user:i.body.user}),a.default.dispatch(E({type:h.ActionTypes.USER_PROFILE_MODAL_FETCH_SUCCESS},i.body)),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(3),null!=e.t0&&null!=e.t0.body&&new o.default("UserProfileModalActionCreators").warn("fetchProfile error: "+e.t0.body.code+" - "+e.t0.body.message),e.t0;case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}function T(e,t,n){a.default.dispatch({type:h.ActionTypes.USER_PROFILE_MODAL_OPEN,userId:e,guildId:t,friendToken:n});var r,o,u,d=s.default.getPrimaryActivity(e);null!=d&&(r=d.party,o=d.assets,u=null!=d.application_id?l.default.getGame(d.application_id):null);var _=s.default.getStatus(e),E=s.default.isMobileOnline(e),v=_;_===h.StatusTypes.ONLINE&&(v=E?h.AnalyticsUserStatusTypes.ONLINE_MOBILE:h.AnalyticsUserStatusTypes.ONLINE_DESKTOP),f.default.track(h.AnalyticEvents.OPEN_MODAL,{type:"Profile Modal",other_user_id:e,application_id:null!=d?d.application_id:null,application_name:null!=d?d.name:void 0,sku_id:null!=u?u.primarySkuId:null,is_friend:c.default.isFriend(e),has_images:!(null==o||!o.large_image&&!o.small_image),party_max:null!=r&&null!=r.size?r.size[1]:void 0,party_id:null!=r?r.id:void 0,party_platform:null!=r&&(0,p.isSpotifyParty)(r.id)?h.PlatformTypes.SPOTIFY:null,game_platform:(0,i.default)(d),profile_user_status:v})}var A={open:function(e,t,n){if(void 0===t&&(t=h.ME),null==d.default.getUser(e))return m(e,n).then((function(){return T(e,t,n)}));m(e,n),T(e,t,n)},push:function(e,t){void 0===t&&(t=h.ME),m(e),a.default.dispatch({type:h.ActionTypes.USER_PROFILE_MODAL_PUSH,userId:e,guildId:t})},pop:function(){a.default.dispatch({type:h.ActionTypes.USER_PROFILE_MODAL_POP})},close:function(){a.default.dispatch({type:h.ActionTypes.USER_PROFILE_MODAL_CLOSE})},setSection:function(e){a.default.dispatch({type:h.ActionTypes.USER_PROFILE_MODAL_SET_SECTION,section:e})},fetchMutualFriends:function(e){r.default.get({url:h.Endpoints.USER_RELATIONSHIPS(e),oldFormErrors:!0}).then((function(t){a.default.dispatch({type:h.ActionTypes.LOAD_MUTUAL_FRIENDS,userId:e,mutualFriends:t.body})}))},fetchProfile:m};t.default=A},1431:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReactions=function(e,t,n,i){return r.default.get({url:p(e,t,n),query:{limit:100,after:i},oldFormErrors:!0}).then((function(r){return a.default.dispatch({type:l.ActionTypes.MESSAGE_REACTION_ADD_USERS,channelId:e,messageId:t,users:r.body,emoji:n}),r.body}))},t.addReaction=function e(t,n,a){f(l.ActionTypes.MESSAGE_REACTION_ADD,t,n,a),r.default.put({url:p(t,n,a,"@me"),oldFormErrors:!0}).catch((function(r){d(r,(function(){return e(t,n,a)}))&&f(l.ActionTypes.MESSAGE_REACTION_REMOVE,t,n,a)}))},t.removeAllReactions=function e(t,n){r.default.delete({url:l.Endpoints.REMOVE_REACTIONS(t,n),oldFormErrors:!0}).catch((function(r){d(r,(function(){return e(t,n)}))}))},t.removeReaction=function e(t,n,a,i){f(l.ActionTypes.MESSAGE_REACTION_REMOVE,t,n,a,i),r.default.delete({url:p(t,n,a,i||"@me"),oldFormErrors:!0}).catch((function(r){d(r,(function(){return e(t,n,a,i)}))&&f(l.ActionTypes.MESSAGE_REACTION_ADD,t,n,a,i)}))};var r=c(n(15)),a=c(n(3)),i=c(n(20)),o=n(97),u=c(n(154)),l=n(1),s=c(n(6));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=e.status,r=e.body;if(429===n)return setTimeout(t,1e3*e.body.retry_after),!1;if(403===n)switch(r&&r.code){case l.AbortCodes.TOO_MANY_REACTIONS:u.default.show({title:s.default.Messages.TOO_MANY_REACTIONS_ALERT_HEADER,body:s.default.Messages.TOO_MANY_REACTIONS_ALERT_BODY,confirmText:s.default.Messages.OKAY});break;case l.AbortCodes.REACTION_BLOCKED:o.ComponentDispatch.dispatch(l.ComponentActions.SHAKE_APP,{duration:200,intensity:2})}return!0}function f(e,t,n,r,o){a.default.dispatch({type:e,channelId:t,messageId:n,userId:o||i.default.getId(),emoji:r,optimistic:!0})}function p(e,t,n,r){var a=null!=n.id?n.name+":"+n.id:n.name;return null!=r?l.Endpoints.REACTION(e,t,a,r):l.Endpoints.REACTIONS(e,t,a)}},1432:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return null!=e&&(e.application_id===r.XBOX_ACTIVITY_APPLICATION_ID||e.platform===a.ActivityGamePlatforms.XBOX)};var r=n(1428),a=n(1)},1433:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=U(n(7)),a=U(n(5)),i=U(n(3)),o=w(n(289)),u=U(n(1409)),l=w(n(886)),s=U(n(349)),c=U(n(87)),d=U(n(4860)),f=U(n(4877)),p=U(n(4878)),h=U(n(25)),_=n(200),E=U(n(86)),v=U(n(1397)),y=U(n(16)),m=U(n(195)),g=U(n(14)),T=w(n(4879)),A=U(n(1421)),I=U(n(1395)),S=U(n(20)),O=U(n(29)),C=U(n(101)),N=U(n(56)),b=U(n(580)),M=U(n(98)),P=U(n(842)),R=U(n(1455)),L=n(1);function D(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return D=function(){return e},e}function w(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=D();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function U(e){return e&&e.__esModule?e:{default:e}}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function G(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var x=new h.default("ConnectionStore");function V(e,t,n){var a=n.roles,o=n.nick,u=n.premium_since,l=n.is_pending,s=C.default.getMember(e,t.id);null!=s&&s.nick===o&&r.default.isEqual(s.roles,a)&&s.premiumSince===u&&s.isPending===l||i.default.dispatch({type:L.ActionTypes.GUILD_MEMBER_ADD,guildId:e,user:t,roles:a,nick:o,premiumSince:u,isPending:l})}function B(e,t,n,r,a){i.default.dispatch({type:L.ActionTypes.PRESENCE_UPDATE,guildId:e,user:t,status:n,clientStatus:a,activities:r})}function H(e){var t=e.member,n=e.mentions,r=e.author,a=e.guild_id;null!=t&&V(a,r,t),null!=n&&n.forEach((function(e){if(null!=e.member){var t=e.member;delete e.member,V(a,e,t)}}))}var W=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).didCommit=(0,p.default)(5,2e4,(function(e){var t=e.status,n=e.since,r=e.activities,a=e.afk;J.presenceUpdate(t,n,r,a)})),t}F(t,e);var n=t.prototype;return n.getInitialState=function(){return P.default.getPresence(!1)},n.getNextState=function(){return P.default.getPresence(!1)},n.shouldCommit=function(){return J.isSessionEstablished()},t}(f.default),Y=function(e){function t(){return e.apply(this,arguments)||this}F(t,e);var n,r,a,i=t.prototype;return i.getInitialState=function(){return{guildId:null,channelId:null,selfMute:N.default.isSelfMute(),selfDeaf:N.default.isSelfDeaf(),selfVideo:N.default.isVideoEnabled(),preferredRegion:null}},i.getNextState=function(e){var t=e.guildId;return{guildId:t,channelId:e.channelId,selfMute:N.default.isSelfMute(),selfDeaf:N.default.isSelfDeaf(),selfVideo:N.default.isVideoEnabled(),preferredRegion:b.default.getPreferredRegion(t)}},i.shouldCommit=function(){return J.isSessionEstablished()},i.didCommit=function(e){var t=e.guildId,n=e.channelId,r=e.selfMute,a=e.selfDeaf,i=e.selfVideo,o=e.preferredRegion;J.voiceStateUpdate(t,n,r,a,i,o)},n=t,(r=[{key:"guildId",get:function(){return this.getState().guildId}},{key:"channelId",get:function(){return this.getState().channelId}}])&&j(n.prototype,r),a&&j(n,a),t}(f.default),K=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._hadLobbyVoiceStates=!1,t}F(t,e);var n=t.prototype;return n.getInitialState=function(){return this.getNextState()},n.getNextState=function(){var e=I.default.getLobbiesWithVoice();return e.length>0&&(this._hadLobbyVoiceStates=!0),{lobbies:e.map((function(e){return{lobbyId:e.id,selfMute:N.default.isSelfMute(e.application_id),selfDeaf:N.default.isSelfDeaf(e.application_id)}}))}},n.shouldCommit=function(){return this._hadLobbyVoiceStates&&J.isSessionEstablished()},n.didCommit=function(e){var t=e.lobbies;J.lobbyVoiceStatesUpdate(t)},n.forceUpdate=function(){this._hadLobbyVoiceStates&&e.prototype.forceUpdate.call(this)},t}(f.default),z=!1,q=0,X=null,Z=new W,$=new Y,Q=new K,J=new d.default(L.Endpoints.GATEWAY,(function(){var e=S.default.getToken();return x.log("handleIdentify called",{hasToken:null!=e}),e?{token:e,properties:y.default.getSuperProperties(),presence:Z.getState()}:null}));function ee(e){return e.map((function(e){return{sessionId:e.session_id,lastModified:e.last_modified,status:e.status,activities:e.activities,active:!!e.active,clientInfo:e.client_info}}))}function te(){J.isSessionEstablished()&&I.default.getPendingLobbies().forEach((function(e){J.lobbyConnect(e.id,e.secret)}))}function ne(e){a.default.Store.pauseEmittingChanges();try{e()}finally{a.default.Store.resumeEmittingChanges(),a.default.Store.emitChanges()}}function re(){return $.update(),Q.update(),!1}function ae(){return Z.update(),!1}function ie(){return Q.update(),!1}function oe(e){J.isSessionEstablished()&&J.streamDelete(e)}function ue(){var e=R.default.getAllActiveStreamKeys().find((function(e){return(0,_.decodeStreamKey)(e).ownerId===S.default.getId()}));R.default.getAllActiveStreamKeys().filter((function(t){return t!==e})).forEach((function(e){return oe(e)}))}g.default.isDesktop()&&c.default.remotePowerMonitor.on("resume",(function(){J.expeditedHeartbeat(5e3,"power monitor resumed")})),m.default.addOfflineCallback((function(){J.expeditedHeartbeat(15e3,"network detected offline.",!1)})),m.default.addOnlineCallback((function(){J.expeditedHeartbeat(5e3,"network detected online.")})),J.on("disconnect",(function(e){var t=e.code,n=e.reason;i.default.dirtyDispatch({type:L.ActionTypes.CONNECTION_CLOSED,code:t,reason:n})})),J.on("close",(function(e){var t=e.code,n=e.reason;i.default.dirtyDispatch({type:L.ActionTypes.CONNECTION_INTERRUPTED,code:t,reason:n})})),J.on("dispatch",(function(e,t){switch(e){case"READY_SUPPLEMENTAL":ne((function(){t=T.hydrateReadySupplementalPayload(t);var e=function(e){return e.map((function(e){return{user:e.user,status:e.status,clientStatus:e.client_status,activities:e.activities}}))},n=t.guilds.filter((function(e){return!0!==e.unavailable}));n.forEach((function(t){t.presences=e(t.presences||[])}));var r=t.presences?e(t.presences):[];i.default.dispatch({type:L.ActionTypes.CONNECTION_OPEN_SUPPLEMENTAL,guilds:n,presences:r}),n.forEach((function(e){e.voice_states.forEach((function(t){i.default.dispatch({type:L.ActionTypes.VOICE_STATE_UPDATE,userId:t.user_id,guildId:e.id,sessionId:t.session_id,channelId:t.channel_id,mute:t.mute,deaf:t.deaf,selfMute:t.self_mute,selfDeaf:t.self_deaf,selfVideo:t.self_video||!1,suppress:t.suppress,selfStream:t.self_stream||!1})}))})),$.update(),Q.update({},!0)}));break;case"READY":if(t.user.bot)return void i.default.dispatch({type:L.ActionTypes.LOGOUT});ne((function(){t=T.hydrateReadyPayloadPrioritized(t);var e=[];t.private_channels.forEach((function(t){t.guild_id=null,e.push(E.default.fromServer(t))}));var n=t.guilds.filter((function(e){return e.unavailable})).map((function(e){return e.id})),r=t.guilds.filter((function(e){return!0!==e.unavailable}));r.forEach((function(t){t.channels.forEach((function(n){n.guild_id=t.id,e.push(E.default.fromServer(n))})),t.presences=[],delete t.channels})),i.default.dispatch({type:L.ActionTypes.CONNECTION_OPEN,sessionId:t.session_id,user:t.user,users:t.users,guilds:r,unavailableGuilds:n,channels:e,readState:t.read_state,userGuildSettings:t.user_guild_settings,tutorial:t.tutorial,relationships:t.relationships,presences:t.presences,analyticsToken:t.analytics_token,experiments:t.experiments,connectedAccounts:t.connected_accounts,guildExperiments:t.guild_experiments,requiredAction:t.required_action,consents:t.consents,sessions:ee(t.sessions||[]),pendingPayments:t.pending_payments}),s.default.updateLocalSettings(t.user_settings,!0)})),Z.update(),$.update(),Q.update(),te();break;case"RESUMED":Z.forceUpdate(),$.forceUpdate(),Q.forceUpdate(),te(),i.default.dispatch({type:L.ActionTypes.CONNECTION_RESUMED});break;case L.ActionTypes.TYPING_START:null!=t.member&&V(t.guild_id,t.member.user,t.member),i.default.dispatch({type:L.ActionTypes.TYPING_START,channelId:t.channel_id,userId:t.user_id});break;case L.ActionTypes.ACTIVITY_START:i.default.dispatch({type:L.ActionTypes.ACTIVITY_START,userId:t.user_id,activity:t.activity});break;case L.ActionTypes.ACTIVITY_USER_ACTION:i.default.dispatch({type:L.ActionTypes.ACTIVITY_USER_ACTION,actionType:t.action_type,user:t.user,applicationId:t.application_id,channelId:t.channel_id,messageId:t.message_id});break;case L.ActionTypes.MESSAGE_CREATE:H(t),null!=t.author&&i.default.dirtyDispatch({type:L.ActionTypes.MESSAGE_CREATE,channelId:t.channel_id,message:t,optimistic:!1,isPushNotification:!1});break;case L.ActionTypes.MESSAGE_UPDATE:H(t),i.default.dispatch({type:L.ActionTypes.MESSAGE_UPDATE,message:t});break;case L.ActionTypes.MESSAGE_DELETE:i.default.dispatch({type:L.ActionTypes.MESSAGE_DELETE,id:t.id,channelId:t.channel_id});break;case L.ActionTypes.MESSAGE_DELETE_BULK:i.default.dispatch({type:L.ActionTypes.MESSAGE_DELETE_BULK,ids:t.ids,channelId:t.channel_id});break;case L.ActionTypes.MESSAGE_ACK:i.default.dispatch({type:L.ActionTypes.MESSAGE_ACK,channelId:t.channel_id,messageId:t.message_id,manual:t.manual,newMentionCount:t.mention_count,version:t.version});break;case L.ActionTypes.CHANNEL_PINS_ACK:i.default.dispatch({type:L.ActionTypes.CHANNEL_PINS_ACK,channelId:t.channel_id,timestamp:t.timestamp,version:t.version});break;case L.ActionTypes.CHANNEL_PINS_UPDATE:i.default.dispatch({type:L.ActionTypes.CHANNEL_PINS_UPDATE,channelId:t.channel_id,lastPinTimestamp:t.last_pin_timestamp});break;case L.ActionTypes.CHANNEL_UNREAD_UPDATE:i.default.dispatch({type:L.ActionTypes.CHANNEL_UNREAD_UPDATE,channelUnreadUpdates:t.channel_unread_updates});break;case L.ActionTypes.CHANNEL_CREATE:case L.ActionTypes.CHANNEL_UPDATE:case L.ActionTypes.CHANNEL_DELETE:var n=t,r=n.guild_hashes,c=G(n,["guild_hashes"]);i.default.dispatch({type:e,guildHashes:r,channel:E.default.fromServer(c)});break;case L.ActionTypes.CHANNEL_RECIPIENT_ADD:case L.ActionTypes.CHANNEL_RECIPIENT_REMOVE:i.default.dispatch({type:e,channelId:t.channel_id,user:t.user,nick:t.nick});break;case L.ActionTypes.GUILD_CREATE:t.unavailable?i.default.dispatch({type:L.ActionTypes.GUILD_UNAVAILABLE,guildId:t.id}):((t=T.hydrateGuild(t)).channels=t.channels.map((function(e){return e.guild_id=t.id,E.default.fromServer(e)})),u.default.createGuild(t),ne((function(){t.voice_states.forEach((function(e){i.default.dispatch({type:L.ActionTypes.VOICE_STATE_UPDATE,userId:e.user_id,guildId:t.id,sessionId:e.session_id,channelId:e.channel_id,mute:e.mute,deaf:e.deaf,selfMute:e.self_mute,selfDeaf:e.self_deaf,selfVideo:e.self_video||!1,suppress:e.suppress,selfStream:e.self_stream||!1})}))})));break;case L.ActionTypes.GUILD_UPDATE:var d=t,f=d.guild_hashes,p=G(d,["guild_hashes"]);i.default.dispatch({type:L.ActionTypes.GUILD_UPDATE,guildHashes:f,guild:p}),t.unavailable&&i.default.dispatch({type:L.ActionTypes.GUILD_UNAVAILABLE,guildId:t.id});break;case L.ActionTypes.GUILD_DELETE:i.default.dispatch({type:L.ActionTypes.GUILD_DELETE,guild:t}),t.unavailable&&i.default.dispatch({type:L.ActionTypes.GUILD_UNAVAILABLE,guildId:t.id});break;case L.ActionTypes.GUILD_MEMBERS_CHUNK:a.default.Store.pauseEmittingChanges(),i.default.dispatch({type:L.ActionTypes.GUILD_MEMBERS_CHUNK,guildId:t.guild_id,members:t.members,notFound:t.not_found}),null!=t.presences&&t.presences.forEach((function(e){var n=e.user,r=e.status,a=e.client_status,i=e.activities;return B(t.guild_id,n,r,i,a)})),a.default.Store.resumeEmittingChanges();break;case L.ActionTypes.GUILD_BAN_ADD:case L.ActionTypes.GUILD_BAN_REMOVE:case L.ActionTypes.GUILD_MEMBER_ADD:case L.ActionTypes.GUILD_MEMBER_UPDATE:case L.ActionTypes.GUILD_MEMBER_REMOVE:i.default.dispatch({type:e,guildId:t.guild_id,user:t.user,roles:t.roles,nick:t.nick,premiumSince:t.premium_since,isPending:t.is_pending});break;case L.ActionTypes.GUILD_ROLE_CREATE:case L.ActionTypes.GUILD_ROLE_UPDATE:i.default.dispatch({type:e,guildId:t.guild_id,guildHashes:t.guild_hashes,role:t.role});break;case L.ActionTypes.GUILD_ROLE_DELETE:i.default.dispatch({type:L.ActionTypes.GUILD_ROLE_DELETE,guildId:t.guild_id,guildHashes:t.guild_hashes,roleId:t.role_id});break;case L.ActionTypes.GUILD_EMOJIS_UPDATE:i.default.dispatch({type:L.ActionTypes.GUILD_EMOJIS_UPDATE,guildId:t.guild_id,guildHashes:t.guild_hashes,emojis:t.emojis});break;case L.ActionTypes.GUILD_INTEGRATIONS_UPDATE:i.default.dispatch({type:L.ActionTypes.GUILD_INTEGRATIONS_UPDATE,guildId:t.guild_id});break;case L.ActionTypes.USER_UPDATE:i.default.dispatch({type:L.ActionTypes.CURRENT_USER_UPDATE,user:t});break;case L.ActionTypes.USER_SETTINGS_UPDATE:s.default.updateLocalSettings(t,!0);break;case"USER_GUILD_SETTINGS_UPDATE":i.default.dispatch({type:L.ActionTypes.USER_GUILD_SETTINGS_FULL_UPDATE,userGuildSettings:[t]});break;case L.ActionTypes.USER_CONNECTIONS_UPDATE:i.default.dispatch({type:L.ActionTypes.USER_CONNECTIONS_UPDATE});break;case L.ActionTypes.USER_REQUIRED_ACTION_UPDATE:i.default.dispatch({type:L.ActionTypes.USER_REQUIRED_ACTION_UPDATE,requiredAction:t.required_action});break;case L.ActionTypes.USER_NOTE_UPDATE:i.default.dispatch(k({type:L.ActionTypes.USER_NOTE_UPDATE},t));break;case L.ActionTypes.RELATIONSHIP_ADD:i.default.dispatch({type:L.ActionTypes.RELATIONSHIP_ADD,relationship:{id:t.id,type:t.type,user:t.user,nickname:t.nickname},shouldNotify:!0===t.should_notify});break;case L.ActionTypes.RELATIONSHIP_REMOVE:i.default.dispatch({type:L.ActionTypes.RELATIONSHIP_REMOVE,relationship:t});break;case L.ActionTypes.PRESENCE_UPDATE:B(t.guild_id,t.user,t.status,t.activities,t.client_status);break;case L.ActionTypes.PRESENCES_REPLACE:i.default.dispatch({type:L.ActionTypes.PRESENCES_REPLACE,presences:t});break;case L.ActionTypes.SESSIONS_REPLACE:i.default.dispatch({type:L.ActionTypes.SESSIONS_REPLACE,sessions:ee(t)});break;case L.ActionTypes.VOICE_STATE_UPDATE:null!=t.member&&V(t.guild_id,t.member.user,t.member),i.default.dispatch({type:L.ActionTypes.VOICE_STATE_UPDATE,userId:t.user_id,guildId:t.guild_id,sessionId:t.session_id,channelId:t.channel_id,mute:t.mute,deaf:t.deaf,selfMute:t.self_mute,selfDeaf:t.self_deaf,selfVideo:t.self_video||!1,suppress:t.suppress,selfStream:t.self_stream||!1});break;case L.ActionTypes.LOBBY_VOICE_STATE_UPDATE:i.default.dispatch({type:L.ActionTypes.LOBBY_VOICE_STATE_UPDATE,userId:t.user_id,lobbyId:t.lobby_id,sessionId:t.session_id,channelId:t.channel_id,mute:t.mute,deaf:t.deaf,selfMute:t.self_mute,selfDeaf:t.self_deaf});break;case L.ActionTypes.VOICE_SERVER_UPDATE:i.default.dispatch({type:L.ActionTypes.VOICE_SERVER_UPDATE,guildId:t.guild_id,channelId:t.channel_id,endpoint:t.endpoint,token:t.token});break;case L.ActionTypes.LOBBY_VOICE_SERVER_UPDATE:i.default.dispatch({type:L.ActionTypes.LOBBY_VOICE_SERVER_UPDATE,lobbyId:t.lobby_id,endpoint:t.endpoint,token:t.token});break;case L.ActionTypes.CALL_CREATE:i.default.dispatch({type:L.ActionTypes.CALL_CREATE,channelId:t.channel_id,messageId:t.message_id,region:t.region,ringing:t.ringing});var h=t.voice_states;null!=h&&h.forEach((function(e){i.default.dispatch({type:L.ActionTypes.VOICE_STATE_UPDATE,userId:e.user_id,guildId:null,sessionId:e.session_id,channelId:e.channel_id,mute:e.mute,deaf:e.deaf,selfMute:e.self_mute,selfDeaf:e.self_deaf,selfVideo:e.self_video||!1,suppress:e.suppress,selfStream:e.self_stream||!1})}));break;case L.ActionTypes.CALL_UPDATE:i.default.dispatch({type:L.ActionTypes.CALL_UPDATE,channelId:t.channel_id,messageId:t.message_id,region:t.region,ringing:t.ringing});break;case L.ActionTypes.CALL_DELETE:i.default.dispatch({type:L.ActionTypes.CALL_DELETE,channelId:t.channel_id,unavailable:t.unavailable});break;case L.ActionTypes.OAUTH2_TOKEN_REVOKE:i.default.dispatch({type:L.ActionTypes.OAUTH2_TOKEN_REVOKE,accessToken:t.access_token});break;case L.ActionTypes.RECENT_MENTION_DELETE:i.default.dispatch({type:L.ActionTypes.RECENT_MENTION_DELETE,id:t.message_id});break;case L.ActionTypes.WEBHOOKS_UPDATE:i.default.dispatch({type:L.ActionTypes.WEBHOOKS_UPDATE,guildId:t.guild_id,channelId:t.channel_id});break;case L.ActionTypes.MESSAGE_REACTION_ADD:case L.ActionTypes.MESSAGE_REACTION_REMOVE:i.default.dispatch({type:e,channelId:t.channel_id,messageId:t.message_id,userId:t.user_id,emoji:t.emoji});break;case L.ActionTypes.MESSAGE_REACTION_REMOVE_ALL:i.default.dispatch({type:L.ActionTypes.MESSAGE_REACTION_REMOVE_ALL,channelId:t.channel_id,messageId:t.message_id});break;case L.ActionTypes.MESSAGE_REACTION_REMOVE_EMOJI:i.default.dispatch({type:L.ActionTypes.MESSAGE_REACTION_REMOVE_EMOJI,channelId:t.channel_id,messageId:t.message_id,emoji:t.emoji});break;case L.ActionTypes.PAYMENT_UPDATE:i.default.dispatch({type:L.ActionTypes.PAYMENT_UPDATE,payment:t});break;case L.ActionTypes.ENTITLEMENT_CREATE:case L.ActionTypes.ENTITLEMENT_UPDATE:case L.ActionTypes.ENTITLEMENT_DELETE:i.default.dispatch({type:e,entitlement:t});break;case L.ActionTypes.USER_PAYMENT_SOURCES_UPDATE:A.default.hasLayers()&&o.fetchPaymentSources();break;case L.ActionTypes.USER_SUBSCRIPTIONS_UPDATE:l.fetchCurrentUser(),A.default.hasLayers()&&o.fetchSubscriptions();break;case L.ActionTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_SLOT_CREATE:i.default.dispatch({type:L.ActionTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_SLOT_CREATE,userPremiumGuildSubscriptionSlot:v.default.createFromServer(t)});break;case L.ActionTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_SLOT_UPDATE:i.default.dispatch({type:L.ActionTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_SLOT_UPDATE,userPremiumGuildSubscriptionSlot:v.default.createFromServer(t)});break;case L.ActionTypes.BRAINTREE_POPUP_BRIDGE_CALLBACK:i.default.dispatch({type:L.ActionTypes.BRAINTREE_POPUP_BRIDGE_CALLBACK,state:t.state,path:t.path,query:t.query});break;case L.ActionTypes.GUILD_MEMBER_LIST_UPDATE:a.default.Store.pauseEmittingChanges();var _=function(e){if(null!=e.member){var n=e.member;if(V(t.guild_id,n.user,n),null!=n.presence){var r=n.presence;B(t.guild_id,r.user,r.status,r.activities,r.client_status)}}};t.ops.forEach((function(e){var t=e.op,n=e.items,r=e.item;switch(t){case"SYNC":n.forEach(_);break;case"UPDATE":case"INSERT":_(r)}})),i.default.dispatch({type:L.ActionTypes.GUILD_MEMBER_LIST_UPDATE,guildId:t.guild_id,id:t.id,ops:t.ops,groups:t.groups,memberCount:t.member_count}),a.default.Store.resumeEmittingChanges();break;case L.ActionTypes.LOBBY_CREATE:i.default.dispatch({type:L.ActionTypes.LOBBY_CREATE,lobby:t}),t.voice_states.forEach((function(e){i.default.dispatch({type:L.ActionTypes.LOBBY_VOICE_STATE_UPDATE,lobbyId:t.id,userId:e.user_id,sessionId:e.session_id,channelId:e.channel_id,mute:e.mute,deaf:e.deaf,selfMute:e.self_mute,selfDeaf:e.self_deaf})}));break;case L.ActionTypes.LOBBY_UPDATE:i.default.dispatch({type:L.ActionTypes.LOBBY_UPDATE,lobby:t});break;case L.ActionTypes.LOBBY_DELETE:i.default.dispatch({type:L.ActionTypes.LOBBY_DELETE,lobbyId:t.id,reason:t.reason});break;case L.ActionTypes.LOBBY_MEMBER_CONNECT:case L.ActionTypes.LOBBY_MEMBER_UPDATE:case L.ActionTypes.LOBBY_MEMBER_DISCONNECT:i.default.dispatch({type:e,lobbyId:t.lobby_id,member:t.member});break;case L.ActionTypes.LOBBY_MESSAGE:i.default.dispatch({type:L.ActionTypes.LOBBY_MESSAGE,lobbyId:t.lobby_id,senderId:t.sender_id,data:t.data});break;case L.ActionTypes.GIFT_CODE_UPDATE:i.default.dispatch({type:L.ActionTypes.GIFT_CODE_UPDATE,uses:t.uses,code:t.code});break;case L.ActionTypes.GIFT_CODE_CREATE:i.default.dispatch({type:L.ActionTypes.GIFT_CODE_CREATE,giftCode:t});break;case L.ActionTypes.USER_ACHIEVEMENT_UPDATE:i.default.dispatch({type:L.ActionTypes.USER_ACHIEVEMENT_UPDATE,userAchievement:t});break;case L.ActionTypes.LIBRARY_APPLICATION_UPDATE:i.default.dispatch({type:L.ActionTypes.LIBRARY_APPLICATION_UPDATE,libraryApplication:t});break;case L.ActionTypes.STREAM_CREATE:i.default.dispatch({type:L.ActionTypes.STREAM_CREATE,streamKey:t.stream_key,region:t.region,viewerIds:t.viewer_ids,rtcServerId:t.rtc_server_id,paused:t.paused});break;case L.ActionTypes.STREAM_SERVER_UPDATE:i.default.dispatch({type:L.ActionTypes.STREAM_SERVER_UPDATE,streamKey:t.stream_key,endpoint:t.endpoint,token:t.token});break;case L.ActionTypes.STREAM_UPDATE:i.default.dispatch({type:L.ActionTypes.STREAM_UPDATE,streamKey:t.stream_key,region:t.region,viewerIds:t.viewer_ids,paused:t.paused});break;case L.ActionTypes.STREAM_DELETE:i.default.dispatch({type:L.ActionTypes.STREAM_DELETE,streamKey:t.stream_key,unavailable:t.unavailable,reason:t.reason});break;case L.ActionTypes.USER_STICKER_PACK_UPDATE:i.default.dispatch({type:L.ActionTypes.USER_STICKER_PACK_UPDATE,userId:t.user_id,packId:t.pack_id,entitlementId:t.entitlement_id});break;case L.ActionTypes.GUILD_APPLICATION_COMMANDS_UPDATE:i.default.dispatch({type:L.ActionTypes.GUILD_APPLICATION_COMMANDS_UPDATE,applicationCommands:t.application_commands,applications:t.applications,nonce:t.nonce})}}));var le=new(function(e){function t(){return e.apply(this,arguments)||this}F(t,e);var n=t.prototype;return n.initialize=function(){this.waitFor(S.default,M.default,O.default,I.default),this.syncWith([N.default],re),this.syncWith([P.default],ae)},n.isTryingToConnect=function(){return!J.isDisconnected()},n.isConnected=function(){return z},n.isConnectedOrOverlay=function(){return z||__OVERLAY__},n.lastTimeConnectedChanged=function(){return q},t}(a.default.Store))(i.default,{START_SESSION:function(e){return!!J.isDisconnected()&&J.connect()},LOGIN_SUCCESS:function(e){return!!J.isSessionEstablished()&&(J.close(),J.connect())},LOGOUT:function(e){J.close()},CONNECTION_OPEN:function(e){z=!0,q=Date.now(),X=e.sessionId,Z.update({},!0);var t={},n=M.default.getVoiceChannelId();if(null!=n){var r=O.default.getChannel(n);null!=r&&(t={guildId:r.getGuildId(),channelId:n})}$.update(t,!0),Q.update({},!0)},CONNECTION_CLOSED:function(e){return function(){if(!z)return!1;z=!1,q=Date.now()}()},RTC_CONNECTION_STATE:function(e){var t=e.state,n=e.willReconnect,r=e.streamKey;if(t!==L.RTCConnectionStates.DISCONNECTED)return!1;n&&(null!=r?J.streamPing(r):J.voiceServerPing())},VOICE_CHANNEL_SELECT:function(e){return $.update({guildId:e.guildId,channelId:e.channelId}),!1},VOICE_STATE_UPDATE:function(e){if(S.default.getId()!==e.userId)return!1;if(e.sessionId===X)$.setState({guildId:e.guildId,channelId:e.channelId});else{if(e.guildId!==$.guildId)return!1;$.setState({guildId:null,channelId:null})}},GUILD_DELETE:function(e){e.guild.id===$.guildId&&$.setState({guildId:null,channelId:null})},CHANNEL_DELETE:function(e){e.channel.id===$.channelId&&$.setState({guildId:null,channelId:null})},CALL_DELETE:function(e){e.channelId===$.channelId&&$.setState({guildId:null,channelId:null})},APP_STATE_UPDATE:function(e){return e.state===L.AppStates.ACTIVE&&J.resetBackoff("App state is active"),!1},GUILD_MEMBERS_REQUEST:function(e){var t=e.guildIds,n=e.query,a=e.limit,i=e.userIds,o=e.presences;return J.isSessionEstablished()&&(null!=i?(0,r.default)(i).chunk(100).forEach((function(e){J.requestGuildMembers(t,{userIds:e,limit:a,presences:o})})):J.requestGuildMembers(t,{query:n,limit:a,presences:o})),!1},GUILD_SUBSCRIPTIONS_FLUSH:function(e){var t=e.guildId,n=e.subscriptions;return J.isSessionEstablished()&&J.updateGuildSubscriptions(t,n),!1},CALL_CONNECT:function(e){var t=e.channelId;return J.isSessionEstablished()&&J.callConnect(t),!1},LOBBY_CONNECT:function(e){var t=e.lobbyId,n=e.lobbySecret;return J.isSessionEstablished()&&J.lobbyConnect(t,n),!1},LOBBY_DISCONNECT:function(e){var t=e.lobbyId;return J.isSessionEstablished()&&J.lobbyDisconnect(t),Q.update(),!1},LOBBY_VOICE_CONNECT:function(e){return ie()},LOBBY_VOICE_DISCONNECT:function(e){return ie()},RPC_APP_DISCONNECTED:function(e){return ie()},STREAM_START:function(e){var t=e.streamType,n=e.guildId,r=e.channelId;return J.isSessionEstablished()&&J.streamCreate(t,n,r,b.default.getPreferredRegion()),!1},STREAM_WATCH:function(e){var t=e.streamKey,n=e.allowMultiple;return J.isSessionEstablished()&&(n||ue(),J.streamWatch(t)),!1},STREAM_STOP:function(e){return oe(e.streamKey),!1},STREAM_SET_PAUSED:function(e){var t=e.streamKey,n=e.paused;J.isSessionEstablished()&&J.streamSetPaused(t,n)},PUSH_NOTIFICATION_CLICK:function(e){return J.expeditedHeartbeat(5e3,"user clicked on notification",!0),!1},APPLICATION_COMMAND_QUERY_REQUEST:function(e){var t=e.guildId,n=e.query,r=e.limit,a=e.nonce;return J.queryApplicationCommands(t,!1,a,null,n,null,r),!1},APPLICATION_COMMAND_DISCOVERY_REQUEST:function(e){var t=e.guildId,n=e.limit,r=e.offset,a=e.nonce;return J.queryApplicationCommands(t,!1,a,null,null,r,n),!1},APPLICATIONS_REQUEST:function(e){var t=e.guildId,n=e.nonce;return J.queryApplicationCommands(t,!0,n),!1}});t.default=le},1434:function(e){e.exports=JSON.parse('[{"alpha2":"AF","code":"+93","name":"Afghanistan"},{"alpha2":"AL","code":"+355","name":"Albania"},{"alpha2":"DZ","code":"+213","name":"Algeria"},{"alpha2":"AS","code":"+1 684","name":"American Samoa"},{"alpha2":"AD","code":"+376","name":"Andorra"},{"alpha2":"AO","code":"+244","name":"Angola"},{"alpha2":"AI","code":"+1 264","name":"Anguilla"},{"alpha2":"AG","code":"+1 268","name":"Antigua and Barbuda"},{"alpha2":"AR","code":"+54","name":"Argentina"},{"alpha2":"AM","code":"+374","name":"Armenia"},{"alpha2":"AW","code":"+297","name":"Aruba"},{"alpha2":"AC","code":"+247","name":"Ascension"},{"alpha2":"AU","code":"+61","name":"Australia"},{"alpha2":"AT","code":"+43","name":"Austria"},{"alpha2":"AZ","code":"+994","name":"Azerbaijan"},{"alpha2":"BS","code":"+1 242","name":"Bahamas"},{"alpha2":"BH","code":"+973","name":"Bahrain"},{"alpha2":"BD","code":"+880","name":"Bangladesh"},{"alpha2":"BB","code":"+1 246","name":"Barbados"},{"alpha2":"BY","code":"+375","name":"Belarus"},{"alpha2":"BE","code":"+32","name":"Belgium"},{"alpha2":"BZ","code":"+501","name":"Belize"},{"alpha2":"BJ","code":"+229","name":"Benin"},{"alpha2":"BM","code":"+1 441","name":"Bermuda"},{"alpha2":"BT","code":"+975","name":"Bhutan"},{"alpha2":"BO","code":"+591","name":"Bolivia"},{"alpha2":"BA","code":"+387","name":"Bosnia and Herzegovina"},{"alpha2":"BW","code":"+267","name":"Botswana"},{"alpha2":"BR","code":"+55","name":"Brazil"},{"alpha2":"IO","code":"+246","name":"British Indian Ocean Territory"},{"alpha2":"VG","code":"+1 284","name":"British Virgin Islands"},{"alpha2":"BN","code":"+673","name":"Brunei"},{"alpha2":"BG","code":"+359","name":"Bulgaria"},{"alpha2":"BF","code":"+226","name":"Burkina Faso"},{"alpha2":"BI","code":"+257","name":"Burundi"},{"alpha2":"KH","code":"+855","name":"Cambodia"},{"alpha2":"CM","code":"+237","name":"Cameroon"},{"alpha2":"CA","code":"+1","name":"Canada"},{"alpha2":"CV","code":"+238","name":"Cape Verde"},{"alpha2":"KY","code":"+1 345","name":"Cayman Islands"},{"alpha2":"CF","code":"+236","name":"Central African Republic"},{"alpha2":"TD","code":"+235","name":"Chad"},{"alpha2":"CL","code":"+56","name":"Chile"},{"alpha2":"CN","code":"+86","name":"China"},{"alpha2":"CX","code":"+61","name":"Christmas Island"},{"alpha2":"CC","code":"+61","name":"Cocos-Keeling Islands"},{"alpha2":"CO","code":"+57","name":"Colombia"},{"alpha2":"KM","code":"+269","name":"Comoros"},{"alpha2":"CG","code":"+242","name":"Congo"},{"alpha2":"CD","code":"+243","name":"Congo, Dem. Rep. of (Zaire)"},{"alpha2":"CK","code":"+682","name":"Cook Islands"},{"alpha2":"CR","code":"+506","name":"Costa Rica"},{"alpha2":"HR","code":"+385","name":"Croatia"},{"alpha2":"CU","code":"+53","name":"Cuba"},{"alpha2":"CW","code":"+599","name":"Curacao"},{"alpha2":"CY","code":"+357","name":"Cyprus"},{"alpha2":"CZ","code":"+420","name":"Czech Republic"},{"alpha2":"DK","code":"+45","name":"Denmark"},{"alpha2":"DG","code":"+246","name":"Diego Garcia"},{"alpha2":"DJ","code":"+253","name":"Djibouti"},{"alpha2":"DM","code":"+1 767","name":"Dominica"},{"alpha2":"DO","code":"+1 809","name":"Dominican Republic"},{"alpha2":"TP","code":"+670","name":"East Timor"},{"alpha2":"EC","code":"+593","name":"Ecuador"},{"alpha2":"EG","code":"+20","name":"Egypt"},{"alpha2":"SV","code":"+503","name":"El Salvador"},{"alpha2":"GQ","code":"+240","name":"Equatorial Guinea"},{"alpha2":"ER","code":"+291","name":"Eritrea"},{"alpha2":"EE","code":"+372","name":"Estonia"},{"alpha2":"ET","code":"+251","name":"Ethiopia"},{"alpha2":"FK","code":"+500","name":"Falkland Islands"},{"alpha2":"FO","code":"+298","name":"Faroe Islands"},{"alpha2":"FJ","code":"+679","name":"Fiji"},{"alpha2":"FI","code":"+358","name":"Finland"},{"alpha2":"FR","code":"+33","name":"France"},{"alpha2":"GF","code":"+594","name":"French Guiana"},{"alpha2":"PF","code":"+689","name":"French Polynesia"},{"alpha2":"GA","code":"+241","name":"Gabon"},{"alpha2":"GM","code":"+220","name":"Gambia"},{"alpha2":"GE","code":"+995","name":"Georgia"},{"alpha2":"DE","code":"+49","name":"Germany"},{"alpha2":"GH","code":"+233","name":"Ghana"},{"alpha2":"GI","code":"+350","name":"Gibraltar"},{"alpha2":"GR","code":"+30","name":"Greece"},{"alpha2":"GL","code":"+299","name":"Greenland"},{"alpha2":"GD","code":"+1 473","name":"Grenada"},{"alpha2":"GP","code":"+590","name":"Guadeloupe"},{"alpha2":"GU","code":"+1 671","name":"Guam"},{"alpha2":"GT","code":"+502","name":"Guatemala"},{"alpha2":"GN","code":"+224","name":"Guinea"},{"alpha2":"GW","code":"+245","name":"Guinea-Bissau"},{"alpha2":"GY","code":"+592","name":"Guyana"},{"alpha2":"HT","code":"+509","name":"Haiti"},{"alpha2":"HN","code":"+504","name":"Honduras"},{"alpha2":"HK","code":"+852","name":"Hong Kong SAR China"},{"alpha2":"HU","code":"+36","name":"Hungary"},{"alpha2":"IS","code":"+354","name":"Iceland"},{"alpha2":"IN","code":"+91","name":"India"},{"alpha2":"ID","code":"+62","name":"Indonesia"},{"alpha2":"IR","code":"+98","name":"Iran"},{"alpha2":"IQ","code":"+964","name":"Iraq"},{"alpha2":"IE","code":"+353","name":"Ireland"},{"alpha2":"IL","code":"+972","name":"Israel"},{"alpha2":"IT","code":"+39","name":"Italy"},{"alpha2":"CI","code":"+225","name":"Ivory Coast"},{"alpha2":"JM","code":"+1 876","name":"Jamaica"},{"alpha2":"JP","code":"+81","name":"Japan"},{"alpha2":"JO","code":"+962","name":"Jordan"},{"alpha2":"KZ","code":"+7","name":"Kazakhstan"},{"alpha2":"KE","code":"+254","name":"Kenya"},{"alpha2":"KI","code":"+686","name":"Kiribati"},{"alpha2":"XK","code":"+383","name":"Kosovo"},{"alpha2":"KW","code":"+965","name":"Kuwait"},{"alpha2":"KG","code":"+996","name":"Kyrgyzstan"},{"alpha2":"LA","code":"+856","name":"Laos"},{"alpha2":"LV","code":"+371","name":"Latvia"},{"alpha2":"LB","code":"+961","name":"Lebanon"},{"alpha2":"LS","code":"+266","name":"Lesotho"},{"alpha2":"LR","code":"+231","name":"Liberia"},{"alpha2":"LY","code":"+218","name":"Libya"},{"alpha2":"LI","code":"+423","name":"Liechtenstein"},{"alpha2":"LT","code":"+370","name":"Lithuania"},{"alpha2":"LU","code":"+352","name":"Luxembourg"},{"alpha2":"MO","code":"+853","name":"Macau SAR China"},{"alpha2":"MK","code":"+389","name":"Macedonia"},{"alpha2":"MG","code":"+261","name":"Madagascar"},{"alpha2":"MW","code":"+265","name":"Malawi"},{"alpha2":"MY","code":"+60","name":"Malaysia"},{"alpha2":"MV","code":"+960","name":"Maldives"},{"alpha2":"ML","code":"+223","name":"Mali"},{"alpha2":"MT","code":"+356","name":"Malta"},{"alpha2":"MH","code":"+692","name":"Marshall Islands"},{"alpha2":"MQ","code":"+596","name":"Martinique"},{"alpha2":"MR","code":"+222","name":"Mauritania"},{"alpha2":"MU","code":"+230","name":"Mauritius"},{"alpha2":"YT","code":"+262","name":"Mayotte"},{"alpha2":"MX","code":"+52","name":"Mexico"},{"alpha2":"FM","code":"+691","name":"Micronesia"},{"alpha2":"MI","code":"+1 808","name":"Midway Island"},{"alpha2":"MD","code":"+373","name":"Moldova"},{"alpha2":"MC","code":"+377","name":"Monaco"},{"alpha2":"MN","code":"+976","name":"Mongolia"},{"alpha2":"ME","code":"+382","name":"Montenegro"},{"alpha2":"MS","code":"+1664","name":"Montserrat"},{"alpha2":"MA","code":"+212","name":"Morocco"},{"alpha2":"MZ","code":"+258","name":"Mozambique"},{"alpha2":"MM","code":"+95","name":"Myanmar"},{"alpha2":"NA","code":"+264","name":"Namibia"},{"alpha2":"NR","code":"+674","name":"Nauru"},{"alpha2":"NP","code":"+977","name":"Nepal"},{"alpha2":"NL","code":"+31","name":"Netherlands"},{"alpha2":"AN","code":"+599","name":"Netherlands Antilles"},{"alpha2":"KN","code":"+1 869","name":"Nevis"},{"alpha2":"NC","code":"+687","name":"New Caledonia"},{"alpha2":"NZ","code":"+64","name":"New Zealand"},{"alpha2":"NI","code":"+505","name":"Nicaragua"},{"alpha2":"NE","code":"+227","name":"Niger"},{"alpha2":"NG","code":"+234","name":"Nigeria"},{"alpha2":"NU","code":"+683","name":"Niue"},{"alpha2":"NF","code":"+672","name":"Norfolk Island"},{"alpha2":"KP","code":"+850","name":"North Korea"},{"alpha2":"MP","code":"+1 670","name":"Northern Mariana Islands"},{"alpha2":"NO","code":"+47","name":"Norway"},{"alpha2":"OM","code":"+968","name":"Oman"},{"alpha2":"PK","code":"+92","name":"Pakistan"},{"alpha2":"PW","code":"+680","name":"Palau"},{"alpha2":"PS","code":"+970","name":"Palestinian Territory"},{"alpha2":"PA","code":"+507","name":"Panama"},{"alpha2":"PG","code":"+675","name":"Papua New Guinea"},{"alpha2":"PY","code":"+595","name":"Paraguay"},{"alpha2":"PE","code":"+51","name":"Peru"},{"alpha2":"PH","code":"+63","name":"Philippines"},{"alpha2":"PL","code":"+48","name":"Poland"},{"alpha2":"PT","code":"+351","name":"Portugal"},{"alpha2":"PR","code":"+1 787","name":"Puerto Rico"},{"alpha2":"QA","code":"+974","name":"Qatar"},{"alpha2":"RE","code":"+262","name":"Reunion"},{"alpha2":"RO","code":"+40","name":"Romania"},{"alpha2":"RU","code":"+7","name":"Russia"},{"alpha2":"RW","code":"+250","name":"Rwanda"},{"alpha2":"WS","code":"+685","name":"Samoa"},{"alpha2":"SM","code":"+378","name":"San Marino"},{"alpha2":"SA","code":"+966","name":"Saudi Arabia"},{"alpha2":"SN","code":"+221","name":"Senegal"},{"alpha2":"RS","code":"+381","name":"Serbia"},{"alpha2":"SC","code":"+248","name":"Seychelles"},{"alpha2":"SL","code":"+232","name":"Sierra Leone"},{"alpha2":"SG","code":"+65","name":"Singapore"},{"alpha2":"SX","code":"+1721","name":"Sint Maarten"},{"alpha2":"SK","code":"+421","name":"Slovakia"},{"alpha2":"SI","code":"+386","name":"Slovenia"},{"alpha2":"SB","code":"+677","name":"Solomon Islands"},{"alpha2":"SO","code":"+252","name":"Somalia"},{"alpha2":"ZA","code":"+27","name":"South Africa"},{"alpha2":"GS","code":"+500","name":"South Georgia and the South Sandwich Islands"},{"alpha2":"KR","code":"+82","name":"South Korea"},{"alpha2":"ES","code":"+34","name":"Spain"},{"alpha2":"LK","code":"+94","name":"Sri Lanka"},{"alpha2":"SD","code":"+249","name":"Sudan"},{"alpha2":"SR","code":"+597","name":"Suriname"},{"alpha2":"SZ","code":"+268","name":"Swaziland"},{"alpha2":"SE","code":"+46","name":"Sweden"},{"alpha2":"CH","code":"+41","name":"Switzerland"},{"alpha2":"SY","code":"+963","name":"Syria"},{"alpha2":"TW","code":"+886","name":"Taiwan"},{"alpha2":"TJ","code":"+992","name":"Tajikistan"},{"alpha2":"TZ","code":"+255","name":"Tanzania"},{"alpha2":"TH","code":"+66","name":"Thailand"},{"alpha2":"TL","code":"+670","name":"Timor Leste"},{"alpha2":"TG","code":"+228","name":"Togo"},{"alpha2":"TK","code":"+690","name":"Tokelau"},{"alpha2":"TO","code":"+676","name":"Tonga"},{"alpha2":"TT","code":"+1 868","name":"Trinidad and Tobago"},{"alpha2":"TN","code":"+216","name":"Tunisia"},{"alpha2":"TR","code":"+90","name":"Turkey"},{"alpha2":"TM","code":"+993","name":"Turkmenistan"},{"alpha2":"TC","code":"+1 649","name":"Turks and Caicos Islands"},{"alpha2":"TV","code":"+688","name":"Tuvalu"},{"alpha2":"VI","code":"+1 340","name":"U.S. Virgin Islands"},{"alpha2":"UG","code":"+256","name":"Uganda"},{"alpha2":"UA","code":"+380","name":"Ukraine"},{"alpha2":"AE","code":"+971","name":"United Arab Emirates"},{"alpha2":"GB","code":"+44","name":"United Kingdom"},{"alpha2":"US","code":"+1","name":"United States"},{"alpha2":"UY","code":"+598","name":"Uruguay"},{"alpha2":"UZ","code":"+998","name":"Uzbekistan"},{"alpha2":"VU","code":"+678","name":"Vanuatu"},{"alpha2":"VE","code":"+58","name":"Venezuela"},{"alpha2":"VN","code":"+84","name":"Vietnam"},{"alpha2":"WK","code":"+1 808","name":"Wake Island"},{"alpha2":"WF","code":"+681","name":"Wallis and Futuna"},{"alpha2":"YE","code":"+967","name":"Yemen"},{"alpha2":"ZM","code":"+260","name":"Zambia"},{"alpha2":"ZW","code":"+263","name":"Zimbabwe"}]')},1436:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(3)),a=n(211),i=u(n(16)),o=n(1);function u(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s={rebuildRTCActiveChannels:function(){r.default.dispatch({type:o.ActionTypes.CHANNEL_RTC_ACTIVE_CHANNELS})},selectParticipant:function(e,t){r.default.dispatch({type:o.ActionTypes.CHANNEL_RTC_SELECT_PARTICIPANT,channelId:e,id:t})},updateLayout:function(e,t,n){void 0===n&&(n=o.AppContext.APP),i.default.track(o.AnalyticEvents.VIDEO_LAYOUT_TOGGLED,l({video_layout:t},(0,a.collectVoiceAnalyticsMetadata)(e))),r.default.dirtyDispatch({type:o.ActionTypes.CHANNEL_RTC_UPDATE_LAYOUT,channelId:e,layout:t,appContext:n})},toggleParticipants:function(e,t){r.default.dispatch({type:o.ActionTypes.CHANNEL_RTC_UPDATE_PARTICIPANTS_OPEN,channelId:e,participantsOpen:t})},toggleVoiceParticipantsHidden:function(e,t){r.default.dispatch({type:o.ActionTypes.CHANNEL_RTC_UPDATE_VOICE_PARTICIPANTS_HIDDEN,channelId:e,voiceParticipantsHidden:t})}};t.default=s},1444:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){void 0===e&&(e="");void 0===t&&(t=!0);var n,r=window.GLOBAL_ENV.INVITE_HOST;null!=r?n="/"+e:(r=location.host,n="/invite/"+e);return(t?location.protocol+"//":"")+r+n}},1445:function(e,t,n){e.exports=n.p+"0f4d1ff76624bb45a3fee4189279ee92.svg"},1449:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationStreamFPSButtonsWithSuffixLabel=t.ApplicationStreamFPSButtons=t.ApplicationStreamFPSRequirements=t.ApplicationStreamResolutionButtonsWithSuffixLabel=t.ApplicationStreamResolutionButtons=t.ApplicationStreamResolutionRequirements=t.ApplicationStreamFPS=t.ApplicationStreamResolutions=void 0;var r,a,i,o,u,l=n(1),s=(r=n(6))&&r.__esModule?r:{default:r};function c(e,t){return{value:e,get label(){return null!=t?t():e}}}t.ApplicationStreamResolutions=o,function(e){e[e.RESOLUTION_480=480]="RESOLUTION_480",e[e.RESOLUTION_720=720]="RESOLUTION_720",e[e.RESOLUTION_1080=1080]="RESOLUTION_1080",e[e.RESOLUTION_SOURCE=0]="RESOLUTION_SOURCE"}(o||(t.ApplicationStreamResolutions=o={})),t.ApplicationStreamFPS=u,function(e){e[e.FPS_15=15]="FPS_15",e[e.FPS_30=30]="FPS_30",e[e.FPS_60=60]="FPS_60"}(u||(t.ApplicationStreamFPS=u={}));var d=((a={})[o.RESOLUTION_480]=null,a[o.RESOLUTION_720]=null,a[o.RESOLUTION_1080]={userPremiumType:l.PremiumTypes.TIER_1,guildPremiumTier:l.PremiumGuildTiers.TIER_2},a[o.RESOLUTION_SOURCE]={userPremiumType:l.PremiumTypes.TIER_2},a);t.ApplicationStreamResolutionRequirements=d;var f=[c(o.RESOLUTION_480),c(o.RESOLUTION_720),c(o.RESOLUTION_1080),c(o.RESOLUTION_SOURCE,(function(){return s.default.Messages.SCREENSHARE_SOURCE}))];t.ApplicationStreamResolutionButtons=f;var p=function(e){return e+"p"},h=[c(o.RESOLUTION_480,(function(){return p(o.RESOLUTION_480)})),c(o.RESOLUTION_720,(function(){return p(o.RESOLUTION_720)})),c(o.RESOLUTION_1080,(function(){return p(o.RESOLUTION_1080)})),c(o.RESOLUTION_SOURCE,(function(){return s.default.Messages.SCREENSHARE_SOURCE}))];t.ApplicationStreamResolutionButtonsWithSuffixLabel=h;var _=((i={})[u.FPS_15]=null,i[u.FPS_30]=null,i[u.FPS_60]={userPremiumType:l.PremiumTypes.TIER_1,guildPremiumTier:l.PremiumGuildTiers.TIER_1},i);t.ApplicationStreamFPSRequirements=_;var E=[c(u.FPS_15),c(u.FPS_30),c(u.FPS_60)];t.ApplicationStreamFPSButtons=E;var v=[c(u.FPS_15,(function(){return s.default.Messages.STREAM_FPS_OPTION.format({value:u.FPS_15})})),c(u.FPS_30,(function(){return s.default.Messages.STREAM_FPS_OPTION.format({value:u.FPS_30})})),c(u.FPS_60,(function(){return s.default.Messages.STREAM_FPS_OPTION.format({value:u.FPS_60})}))];t.ApplicationStreamFPSButtonsWithSuffixLabel=v},1452:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=F(n(0)),i=G(n(9)),o=n(1414),u=n(5),l=G(n(282)),s=n(813),c=G(n(5180)),d=G(n(1384)),f=G(n(5085)),p=n(4958),h=G(n(5192)),_=G(n(5194)),E=n(1419),v=G(n(20)),y=G(n(859)),m=G(n(5068)),g=G(n(61)),T=F(n(549)),A=G(n(794)),I=n(55),S=G(n(68)),O=G(n(16)),C=n(97),N=n(334),b=G(n(5120)),M=G(n(5114)),P=F(n(5089)),R=G(n(5197)),L=G(n(5116)),D=n(1),w=G(n(6)),U=G(n(5258)),k=G(n(829));function G(e){return e&&e.__esModule?e:{default:e}}function j(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return j=function(){return e},e}function F(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=j();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function V(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function B(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var W=V(T.AuthSpinner,{}),Y=V(P.InviteResolvingHeader,{}),K=function(e){var t,r;function u(t){var n;(n=e.call(this,t)||this).handleAuthToken=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.loginToken(t,!1);case 2:O.default.track(D.AnalyticEvents.LOGIN_SUCCESSFUL,{source:D.LoginSuccessfulSources.QR_CODE,login_source:n.loginSource,gift_code_sku_id:n.giftCodeSKUId,is_new_user:!1});case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){B(i,r,a,o,u,"next",e)}function u(e){B(i,r,a,o,u,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),n.setLoginRef=function(e){n.loginRef=e},n.setPasswordRef=function(e){n.passwordRef=e},n.setCodeRef=function(e){n.codeRef=e},n.renderError=function(e){var t=n.props.errors;if(n.hasError(e)){var r=t[e];return Array.isArray(r)?r[0]:r}return null},n.handleLogin=function(e){var t=n.state,r=t.loginPrefix,a=t.login,i=t.password,o=t.captchaKey,u=t.undelete;null!=e&&e.preventDefault(),l.default.login({login:r+a,password:i,undelete:u,captchaKey:o,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId}),C.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE)},n.handleTokenSubmit=function(e){var t=n.state.code,r=n.props.mfaTicket;null!=e&&e.preventDefault(),l.default.loginMFA({code:t.replace(/ /g,""),ticket:r,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId}),C.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE)},n.handleSMSTokenSubmit=function(e){var t=n.state.smsCode,r=n.props.mfaTicket;null!=e&&e.preventDefault(),l.default.loginSMS({code:t.replace(/ /g,""),ticket:r}),C.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE)},n.handleToggleSMSLogin=function(e){var t=n.props.mfaTicket;null!=e&&e.preventDefault(),l.default.requestSMSToken(t),C.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE)},n.handleForgotPassword=function(){var e=n.state,t=e.loginPrefix,r=e.login;null!=n.loginRef&&n.loginRef.focus(),l.default.forgotPassword(r,(function(){(0,I.openModal)((function(e){return a.createElement(A.default,x({header:w.default.Messages.EMAIL_VERIFICATION_INSTRUCTIONS_HEADER,confirmText:w.default.Messages.OKAY,confirmButtonColor:T.Button.Colors.BRAND,className:N.isMobile?U.default.mobile:""},e),V(S.default,{size:S.default.Sizes.SIZE_16},void 0,w.default.Messages.EMAIL_VERIFICATION_INSTRUCTIONS_BODY.format({email:t+r})))}))})),C.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE)},n.handleReset=function(e){null!=e&&e.preventDefault(),l.default.loginReset(),n.setState({password:"",loginPrefix:"",login:"",code:"",smsCode:"",captchaKey:null,undelete:!1,checkingHandoff:!1})},n.handleCancelAccountDeletion=function(){n.setState({undelete:!0},n.handleLogin)},n.handleCaptchaVerify=function(e){n.setState({captchaKey:e},n.handleLogin)},n.handleGotoRegister=function(){var e=n.state.login,t=n.props,r=t.invite,a=t.giftCode,i=t.closeLogin,u=t.openRegister,s=t.guildTemplate,c=t.location,d=t.transitionTo,f=t.redirectTo;if(t.isGuest)return void 0!==i&&i(),void(void 0!==u&&u());var p,h=null!=c?(0,o.parse)(c.search):{};""!==e&&(h.email=e),null!=r?(h.mode="register",p=D.Routes.INVITE(r.code)):null!=a?(h.mode="register",p=D.Routes.GIFT_CODE(a.code)):null!=s?p=D.Routes.GUILD_TEMPLATE(s.code):null!=f?(p=D.Routes.REGISTER,h.redirect_to=f):p=D.Routes.REGISTER,l.default.loginReset(),d(p,{search:(0,o.stringify)(h)}),C.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE)};var r=null!=t.location?(0,o.parse)(t.location.search):{};return n.state={redirecting:t.authenticated,checkingHandoff:t.handoffAvailable,loginPrefix:"",login:r.email||r.login||"",password:"",code:"",smsCode:"",captchaKey:null,undelete:!1},n}r=e,(t=u).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,u.getDerivedStateFromProps=function(e){var t=e.handoffAvailable,n=e.authenticated;return t||n?null:{checkingHandoff:!1}};var c,h,y,m=u.prototype;return m.componentDidMount=function(){var e=this.props,t=e.handoffAvailable,n=e.authenticated,r=e.giftCodeSKU,a=e.invite,i=e.location;t&&!n?(0,s.handoffBegin)():n&&this.loginOrSSO(n,i,!0),O.default.track(D.AnalyticEvents.LOGIN_VIEWED,x({location:null!=a?"Invite Login Page":"Non-Invite Login Page",login_source:this.loginSource},null!=r?(0,d.default)(r,!1,!1):{}),{flush:!0}),(0,E.trackAppUIViewed)("login")},m.componentDidUpdate=function(e){var t,n=this.props,r=n.authenticated,a=n.location,i=this.state.checkingHandoff;if(!r||e.authenticated||i||this.loginOrSSO(r,a),e.errors!==this.props.errors)if(this.hasError("password"))null===(t=this.passwordRef)||void 0===t||t.focus();else if(this.hasError("email")||this.hasError("login")){var o;null===(o=this.loginRef)||void 0===o||o.focus()}else if(this.hasError("code")){var u;null===(u=this.codeRef)||void 0===u||u.focus()}},m.loginOrSSO=function(e,t,n){var r=this;void 0===n&&(n=!1);var a=this.props.isGuest;e&&(null!=t||a)&&(n?l.default.verifySSOToken().then((function(){return r.transitionSSO(t)})):this.transitionSSO(t))},m.transitionSSO=function(e){var t=this.props,n=t.transitionTo,r=t.redirectTo;if(t.isGuest&&null!=r)n(r);else{var a=null!=e?(0,o.parse)(e.search):{},i=(a.redirect_to,function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(a,["redirect_to"]));if(null!=r)n(r);else if(null==i.service)n(D.Routes.APP);else{var u=window.location.protocol+window.GLOBAL_ENV.API_ENDPOINT+D.Endpoints.SSO,l=x({},i,{token:v.default.getToken()});window.location=u+"?"+(0,o.stringify)(l)}}},m.hasError=function(e){return null!=this.props.errors[e]},m.renderHandOffAvailable=function(){var e=this.props.authBoxClassName;return V(T.default,{className:e},void 0,W,V(T.Title,{className:k.default.marginBottom8},void 0,w.default.Messages.BROWSER_HANDOFF_DETECTING_TITLE),V(T.SubTitle,{},void 0,w.default.Messages.AUTH_BROWSER_HANDOFF_DETECTING_DESCRIPTION))},m.renderHandOffContinue=function(){var e=this.props,t=e.user,n=e.transitionTo,r=e.authBoxClassName;return null==t?null:V(T.default,{className:r},void 0,V(T.Avatar,{src:t.getAvatarURL(),size:T.Avatar.Sizes.DEPRECATED_SIZE_100,className:k.default.marginBottom20}),V(T.Title,{className:k.default.marginBottom8},void 0,w.default.Messages.BROWSER_HANDOFF_SUCCESS_TITLE.format({name:t.toString()})),V(T.SubTitle,{className:k.default.marginBottom40},void 0,w.default.Messages.BROWSER_HANDOFF_SUCCESS_BODY),V(T.Block,{},void 0,V(T.Button,{onClick:function(){return n(D.Routes.APP)},className:k.default.marginBottom8},void 0,w.default.Messages.BROWSER_HANDOFF_SUCCESS_ACTION.format({name:t.toString()})),V(T.Button,{look:T.Button.Looks.LINK,onClick:this.handleReset},void 0,w.default.Messages.BROWSER_HANDOFF_SUCCESS_CANCEL)))},m.renderDisabledAccount=function(){var e=this.props.authBoxClassName,t=this.props.loginStatus===D.LoginStates.ACCOUNT_DISABLED,n=t?w.default.Messages.ACCOUNT_DISABLED_TITLE:w.default.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_TITLE,r=t?w.default.Messages.ACCOUNT_DISABLED_DESCRIPTION:w.default.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_DESCRIPTION;return V(T.default,{tag:"form",onSubmit:this.handleReset,className:e},void 0,V(T.Title,{className:k.default.marginBottom8},void 0,n),V(T.SubTitle,{className:k.default.marginBottom20},void 0,r),V(T.Block,{},void 0,V(T.Button,{color:T.Button.Colors.BRAND,type:"submit"},void 0,w.default.Messages.RETURN_TO_LOGIN),V("div",{className:(0,i.default)(k.default.marginTop8,U.default.needAccount)},void 0,w.default.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_CANCEL.format({onClick:this.handleCancelAccountDeletion}))))},m.renderResolving=function(){var e=this,t=this.props,n=t.authBoxClassName,r=t.country,a=t.phoneLoginEnabled;return V(T.default,{className:n},void 0,Y,V(T.Block,{className:k.default.marginTop20},void 0,V(_.default,{className:k.default.marginBottom20,alpha2:r.alpha2,countryCode:r.code.split(" ")[0],label:a?w.default.Messages.FORM_LABEL_EMAIL_OR_PHONE_NUMBER:w.default.Messages.FORM_LABEL_EMAIL,onChange:function(t,n){return e.setState({login:t,loginPrefix:n})},setRef:this.setLoginRef,autoComplete:"off",spellCheck:"false",value:this.state.login,forceMode:a?void 0:p.PhoneOrEmailSelectorForceMode.EMAIL,autoFocus:!0}),V(T.Input,{className:k.default.marginBottom20,label:w.default.Messages.FORM_LABEL_PASSWORD,onChange:function(t){return e.setState({password:t})},type:"password",setRef:this.setPasswordRef,autoComplete:"off",spellCheck:"false",value:this.state.password}),V(T.Button,{className:k.default.marginBottom8,type:"submit",disabled:!0},void 0,w.default.Messages.LOGIN),V(T.Button,{disabled:!0,look:T.Button.Looks.LINK},void 0,w.default.Messages.FORGOT_PASSWORD),V(T.Button,{disabled:!0,className:k.default.marginTop4,look:T.Button.Looks.LINK},void 0,w.default.Messages.NEED_ACCOUNT)))},m.renderDefaultForm=function(e){var t,n,r=this,o=this.props,u=o.invite,l=o.giftCode,s=o.loginStatus,c=o.isGuest,d=o.country,f=o.phoneLoginEnabled,h=!this.hasError("email")&&this.hasError("password");return n=null!=u&&null!=u.channel?V(P.default,{invite:u}):null!=l?V(M.default,{giftCode:l}):c?null:V(a.Fragment,{},void 0,V(T.Title,{className:k.default.marginBottom8},"title",w.default.Messages.LOGIN_TITLE),V(T.SubTitle,{},"subtitle",w.default.Messages.AUTH_LOGIN_BODY)),V(g.default,{direction:g.default.Direction.HORIZONTAL,align:g.default.Align.CENTER},void 0,V("div",{className:U.default.mainLoginContainer},void 0,n,V(T.Block,{className:k.default.marginTop20},void 0,V(_.default,{alpha2:d.alpha2,countryCode:d.code.split(" ")[0],className:k.default.marginBottom20,label:f?w.default.Messages.FORM_LABEL_EMAIL_OR_PHONE_NUMBER:w.default.Messages.FORM_LABEL_EMAIL,error:null!==(t=this.renderError("login"))&&void 0!==t?t:this.renderError("email"),onChange:function(e,t){return r.setState({login:e,loginPrefix:t})},setRef:this.setLoginRef,autoComplete:"off",spellCheck:"false",value:this.state.login,autoFocus:!h,forceMode:f?void 0:p.PhoneOrEmailSelectorForceMode.EMAIL}),V(T.Input,{label:w.default.Messages.FORM_LABEL_PASSWORD,error:this.renderError("password"),onChange:function(e){return r.setState({password:e})},name:"password",type:"password",setRef:this.setPasswordRef,autoComplete:"off",spellCheck:"false",autoFocus:h,value:this.state.password}),V(T.Button,{onClick:this.handleForgotPassword,look:T.Button.Looks.LINK,className:(0,i.default)(k.default.marginBottom20,k.default.marginTop4)},void 0,w.default.Messages.FORGOT_PASSWORD),V(T.Button,{type:"submit",submitting:s===D.LoginStates.LOGGING_IN,className:k.default.marginBottom8},void 0,w.default.Messages.LOGIN),V("div",{className:k.default.marginTop4},void 0,V("span",{className:U.default.needAccount},void 0,w.default.Messages.NEED_ACCOUNT),V(T.Button,{onClick:this.handleGotoRegister,look:T.Button.Looks.LINK,className:U.default.smallRegisterLink},void 0,w.default.Messages.REGISTER)))),e?V(R.default,{authTokenCallback:this.handleAuthToken}):null)},m.renderDefault=function(){var e=this.props,t=e.authBoxClassName,n=e.isGuest;return V("div",{className:U.default.pageContainer},void 0,V(T.default,{onSubmit:this.handleLogin,tag:"form",className:t,expanded:!0},void 0,this.renderDefaultForm(!n)))},m.renderGuildTemplate=function(e){var t=this,n=V(f.default,{guildTemplate:e});return V(L.default,{onSubmit:this.handleLogin,tag:"form",className:(0,i.default)(this.props.authBoxClassName,U.default.horizontalAuthBox)},void 0,(function(){return[n,t.renderDefaultForm(!1)]}))},m.renderMFA=function(){var e=this,t=this.props,r=t.loginStatus,a=t.mfaSMS,i=t.authBoxClassName;return V(T.default,{onSubmit:this.handleTokenSubmit,tag:"form",className:i},void 0,V("img",{alt:"",src:n(1445),className:k.default.marginBottom20}),V(T.Title,{className:k.default.marginBottom8},void 0,w.default.Messages.TWO_FA),V(T.SubTitle,{},void 0,w.default.Messages.TWO_FA_ENTER_TOKEN_BODY),V(T.Block,{className:k.default.marginTop40},void 0,V(T.Input,{className:k.default.marginBottom20,error:this.renderError("code"),setRef:this.setCodeRef,onChange:function(t){return e.setState({code:t})},autoComplete:"off",placeholder:w.default.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,label:w.default.Messages.TWO_FA_ENTER_TOKEN_LABEL,value:this.state.code},"totpCode"),V(T.Button,{type:"submit",submitting:r===D.LoginStates.LOGGING_IN_MFA},void 0,w.default.Messages.LOGIN),a?V(T.Button,{onClick:this.handleToggleSMSLogin,submitting:r===D.LoginStates.LOGGING_IN_MFA_SMS,className:k.default.marginTop8,look:T.Button.Looks.LINK},void 0,w.default.Messages.MFA_SMS_RECEIVE_CODE):null,V(T.Button,{look:T.Button.Looks.LINK,className:k.default.marginTop4,onClick:this.handleReset},void 0,w.default.Messages.TWO_FA_LOGIN_FOOTER)))},m.renderMFASMS=function(){var e=this,t=this.props,r=t.loginStatus,a=t.maskedPhone,i=t.authBoxClassName,o=r===D.LoginStates.LOGGING_IN_MFA_SMS||""===a;return V(T.default,{onSubmit:this.handleSMSTokenSubmit,tag:"form",className:i},void 0,V("img",{alt:"",src:n(1445),className:k.default.marginBottom20}),V(T.Title,{className:k.default.marginBottom8},void 0,w.default.Messages.TWO_FA),V(T.SubTitle,{className:k.default.marginBottom8},void 0,o?w.default.Messages.TWO_FA_ENTER_SMS_TOKEN_SENDING:w.default.Messages.TWO_FA_ENTER_SMS_TOKEN_SENT.format({phoneNumber:a})),V(T.Block,{className:k.default.marginTop40},void 0,V(T.Input,{className:k.default.marginBottom20,error:this.renderError("code"),setRef:this.setCodeRef,onChange:function(t){return e.setState({smsCode:t})},autoComplete:"off",placeholder:w.default.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,label:w.default.Messages.TWO_FA_ENTER_SMS_TOKEN_LABEL,value:this.state.smsCode},"smsCode"),V(T.Button,{type:"submit",submitting:o,color:o?T.Button.Colors.TRANSPARENT:T.Button.Colors.BRAND},void 0,w.default.Messages.LOGIN),o?null:V(T.Button,{onClick:this.handleToggleSMSLogin,className:k.default.marginTop8,look:T.Button.Looks.LINK},void 0,w.default.Messages.MFA_SMS_RESEND),V(T.Button,{look:T.Button.Looks.LINK,className:k.default.marginTop4,onClick:this.handleReset},void 0,w.default.Messages.TWO_FA_LOGIN_FOOTER)))},m.render=function(){var e=this.props,t=e.authenticated,n=e.invite,r=e.guildTemplate,a=e.loginStatus,i=e.handoffAvailable,o=e.isGuest,u=e.authBoxClassName,l=this.state,s=l.checkingHandoff;if(l.redirecting)return null;if(this.hasError("captcha_key"))return V(b.default,{authBoxClassName:u,onVerify:this.handleCaptchaVerify,title:o?null:w.default.Messages.LOGIN_TITLE});if(i)return this.renderHandOffAvailable();if(t&&s)return this.renderHandOffContinue();switch(a){case D.LoginStates.LOGGING_IN_MFA_SMS:case D.LoginStates.MFA_SMS_STEP:return this.renderMFASMS();case D.LoginStates.LOGGING_IN_MFA:case D.LoginStates.MFA_STEP:return this.renderMFA();case D.LoginStates.ACCOUNT_SCHEDULED_FOR_DELETION:case D.LoginStates.ACCOUNT_DISABLED:return this.renderDisabledAccount();case D.LoginStates.LOGGING_IN:case D.LoginStates.NONE:default:return null!=n&&n.state===D.InviteStates.RESOLVING?this.renderResolving():null!=r?r.state===D.InviteStates.RESOLVING?this.renderResolving():this.renderGuildTemplate(r):this.renderDefault()}},c=u,(h=[{key:"loginSource",get:function(){var e=this.props,t=e.giftCode,n=e.guildTemplate,r=e.invite,a=e.isGuest;return null!=t?"gift":null!=n?"guild_template":null!=r?null!=r.guild?"guild_invite":"dm_invite":a?"guest_lurker":null}},{key:"giftCodeSKUId",get:function(){var e=this.props.giftCode;return null!=e?e.skuId:null}}])&&H(c.prototype,h),y&&H(c,y),u}(a.PureComponent);function z(e){var t=c.default.useExperiment({})[0].phoneLoginEnabled,n=(0,u.useStateFromStoresObject)([y.default,m.default,v.default,h.default],(function(){return{authenticated:v.default.isAuthenticated(),handoffAvailable:y.default.isHandoffAvailable(),user:y.default.user,loginStatus:v.default.getLoginStatus(),mfaTicket:v.default.getMFATicket(),mfaSMS:v.default.getMFASMS(),maskedPhone:v.default.getMaskedPhone(),errors:v.default.getErrors(),defaultRoute:m.default.defaultRoute,country:h.default.getCountryCode()}}));return a.useEffect((function(){c.default.trigger({})}),[]),a.createElement(K,x({},e,{phoneLoginEnabled:t},n))}K.displayName="Login",K.defaultProps={isGuest:!1,transitionTo:function(t){return e.location.assign(t)}},z.displayName="ConnectedLogin";var q=z;t.default=q}).call(this,n(32))},1455:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=A(n(18)),o=A(n(7)),u=A(n(5)),l=n(44),s=n(70),c=A(n(3)),d=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=T();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(4880)),f=n(200),p=n(893),h=A(n(932)),_=A(n(20)),E=A(n(56)),v=A(n(281)),y=A(n(144)),m=A(n(95)),g=n(1);function T(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return T=function(){return e},e}function A(e){return e&&e.__esModule?e:{default:e}}var I={},S={},O={},C={},N=g.StreamLayouts.THEATRE,b={},M=[],P=new s.Interval;function R(){o.default.forEach(b,(function(e,t){e.destroy(e.isOwner?"sender-disconnect":"receiver-disconnect"),delete b[t]}))}function L(){var e=l.MediaEngineContextTypes.STREAM;E.default.getMediaEngine().eachConnection((function(e){e.getStats().then((function(e){c.default.dispatch({type:g.ActionTypes.STREAM_STATS_UPDATE,stats:e})}))}),e)}var D=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.getActiveStreamKey=function(){return(0,h.default)(E.default)?a:null},i.getAllActiveStreamKeys=function(){return Object.keys(b)},i.getStatsHistory=function(e,t){return(0,h.default)(E.default)?null==e?null:M.map((function(n){return t?(r=n.rtp.outbound,null!=(a=r.find((function(e){return"video"===e.type})))&&"video"===a.type?{type:"streamer",fractionLost:a.fractionLost||0,frameRate:a.frameRateInput||0,resolution:null!=a.resolution?a.resolution.height:0,bitrate:0}:null):function(e){if(null==e)return null;var t=e.find((function(e){return"video"===e.type}));return null!=t&&"video"===t.type?{type:"spectator",fractionLost:t.fractionLost||0,frameRate:t.frameRateNetwork||0,bitrate:t.bitrate||0,resolution:null!=t.resolution?t.resolution.height:0}:null}(n.rtp.inbound[e]);var r,a})):null},i.getQuality=function(){if(!(0,h.default)(E.default))return g.RTCConnectionQuality.UNKNOWN;var e=this.getActiveStreamKey(),t=null!=e?b[e]:null;return null!=t?t.quality:g.RTCConnectionQuality.UNKNOWN},i.getActiveMediaSessionId=function(){if(null==a)return null;var e=b[a];return null!=e?e.getMediaSessionId():null},i.getActiveRTCConnectionId=function(){if(null==a)return null;var e=b[a];return null!=e?e.getRTCConnectionId():null},i.getHostname=function(){if(null==a)return"";var e=b[a];return null!=e.hostname?e.hostname:""},i.getStreamSourceId=function(e){return C[e]},r}(u.default.Store))(c.default,!E.default.isSupported()||__OVERLAY__?{}:{CONNECTION_OPEN:function(e){r=e.sessionId,a=null,R()},CONNECTION_CLOSED:function(e){return r=null,a=null,void R()},RTC_CONNECTION_STATE:function(e){return!0},RTC_CONNECTION_PING:function(e){return!0},RTC_CONNECTION_LOSS_RATE:function(e){return!0},STREAM_START:function(e){var t=e.streamType,n=e.guildId,r=e.channelId,a=e.appContext,i=e.pid,u=e.sourceId,l=(0,f.encodeStreamKey)({streamType:t,guildId:n,channelId:r,ownerId:_.default.getId()});if(I[l]=a,o.default.forEach(b,(function(e){e.analyticsContext.setActionContext(a)})),C[l]=u,O[l]=i,null!=i){var s=m.default.getGameForPID(i);null!=s&&(S[l]={name:s.name,id:s.id,exe:s.exeName})}},STREAM_STOP:function(e){var t=e.appContext,n=e.streamKey;I[n]=t,o.default.forEach(b,(function(e){e.analyticsContext.setActionContext(t)})),C[n]=null,O[n]=null},STREAM_CREATE:function(e){var t=e.streamKey,n=e.rtcServerId,o=e.region,u=e.viewerIds;a=t;var s=b[t];null==s&&null!=n&&(null==O[t]&&(S[t]=null),null==S[t]&&null==C[t]&&(S[t]=(0,p.getStreamerApplication)((0,f.decodeStreamKey)(t),v.default)),s=function(e,t,n){(0,i.default)(null!=r,"Creating RTCConnection without session.");var a=new d.default(r,e,t,N,n,null!=S[e],y.default.getMediaSessionId());return E.default.isSelfMute(l.MediaEngineContextTypes.STREAM)||c.default.dirtyDispatch({type:g.ActionTypes.AUDIO_TOGGLE_SELF_MUTE,context:l.MediaEngineContextTypes.STREAM}),a}(t,n,new d.StreamRTCAnalyticsContext({streamRegion:o,streamApplication:S[t],actionContext:I[t],numViewers:null!=u?u.length:0})),b[t]=s),M=[],L(),P.start(1e3,L)},STREAM_SERVER_UPDATE:function(e){var t=b[e.streamKey];if(null==t)return!1;t.connect(e.endpoint,e.token)},STREAM_UPDATE:function(e){var t=e.streamKey,n=e.viewerIds,r=e.paused,a=b[t];if(null==a)return!1;null!=n&&a.analyticsContext.trackViewerCount(n.length),a.streamUpdate(r)},STREAM_DELETE:function(e){var t=e.streamKey,n=b[t];if(null==n)return!1;t===a&&(a=null,P.stop()),n.destroy("stream-end"),delete b[t]},STREAM_STATS_UPDATE:function(e){var t=e.stats;if(null==t)return!1;M.push(t),M.length>30&&M.shift()},STREAM_LAYOUT_UPDATE:function(e){var t=e.layout;N=t,Object.values(b).forEach((function(e){return e.layoutChange(t)}))}});t.default=D},1456:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateFlags=function(e,t,n){return a.default.dispatch({type:i.ActionTypes.LIBRARY_APPLICATION_FLAGS_UPDATE_START,applicationId:e,branchId:t,flags:n}),r.default.patch({url:i.Endpoints.LIBRARY_APPLICATION_BRANCH(e,t),body:{flags:n},oldFormErrors:!0}).then((function(e){a.default.dispatch({type:i.ActionTypes.LIBRARY_APPLICATION_FLAGS_UPDATE_SUCCESS,libraryApplication:e.body})}))};var r=o(n(15)),a=o(n(3)),i=n(1);function o(e){return e&&e.__esModule?e:{default:e}}},1460:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=y(n(7)),a=y(n(113)),i=y(n(274)),o=y(n(341)),u=n(86),l=y(n(29)),s=y(n(34)),c=y(n(99)),d=y(n(24)),f=y(n(874)),p=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=v();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(1398)),h=y(n(4883)),_=y(n(1461)),E=n(1);function v(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return v=function(){return e},e}function y(e){return e&&e.__esModule?e:{default:e}}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g=/^( *>>> +([\s\S]*))|^( *>(?!>>) +[^\n]*(\n *>(?!>>) +[^\n]*)*\n?)/,T=/^$|\n *$/,A=/^ *>>> ?/,I=/^ *> ?/gm;function S(e){var t=(0,p.depunycodeLink)(e[1]);return null==t?{type:"text",content:e[1]}:{type:"link",content:[{type:"text",content:t.displayTarget}],target:t.target,title:void 0}}var O={newline:a.default.defaultRules.newline,paragraph:a.default.defaultRules.paragraph,escape:a.default.defaultRules.escape,blockQuote:m({},a.default.defaultRules.blockQuote,{match:function(e,t){var n=t.prevCapture,r=t.inQuote,a=t.nested;return!T.test(null!=n?n[0]:"")||r||a?null:g.exec(e)},parse:function(e,t,n){var r=e[0],a=Boolean(A.exec(r)),i=a?A:I,o=r.replace(i,""),u=n.inQuote||!1,l=n.inline||!1;n.inQuote=!0,a||(n.inline=!0);var s=t(o,n);return n.inQuote=u,n.inline=l,0===s.length&&s.push({type:"text",content:" "}),{content:s,type:"blockQuote"}}}),link:p.default,autolink:m({},a.default.defaultRules.autolink,{parse:S}),url:m({},a.default.defaultRules.url,{match:function(e,t){if(!t.inline)return null;var n=/^((?:https?|steam):\/\/[^\s<]+[^<.,:;"'\]\s])/.exec(e);if(null!=n){for(var r=0,a=n[0],i=a.length-1;i>=0&&")"===a[i];i--){var o=a.indexOf("(",r);if(-1===o){a=a.slice(0,a.length-1);break}r=o+1}n[0]=n[1]=a}return n},parse:S}),strong:a.default.defaultRules.strong,em:a.default.defaultRules.em,u:a.default.defaultRules.u,br:a.default.defaultRules.br,text:a.default.defaultRules.text,inlineCode:a.default.defaultRules.inlineCode,emoticon:{order:a.default.defaultRules.text.order,match:function(e){return/^(¯\\_\(ツ\)_\/¯)/.exec(e)},parse:function(e){return{type:"text",content:e[1]}}},codeBlock:{order:a.default.defaultRules.codeBlock.order,match:function(e){return/^```(?:([a-z0-9_+\-.]+?)\n)?\n*([^\n][^]*?)\n*```/i.exec(e)},parse:function(e,t,n){return{lang:e[1]||"",content:e[2]||"",inQuote:n.inQuote||!1}}},roleMention:{order:a.default.defaultRules.text.order,match:function(e){return/^<@&(\d+)>/.exec(e)},parse:function(e,t,n){e[0];var r=e[1];if(n.returnMentionIds)return{type:"roleMention",id:r};var a=l.default.getChannel(n.channelId),i=a?a.getGuildId():null,o=i?s.default.getGuild(i):null,u=o?o.roles[r]:null;return null==u?{type:"text",content:"@deleted-role"}:{type:"mention",color:u.color,colorString:u.colorString,content:[{type:"text",content:"@"+u.name}]}}},mention:{order:a.default.defaultRules.text.order,match:function(e){return/^<@!?(\d+)>|^(@(?:everyone|here))/.exec(e)},parse:function(e,t,n){if(n.returnMentionIds)return null==e[1]?{type:"mention",text:e[0]}:{type:"mention",id:e[1]};var r,a,i=d.default.getUser(e[1]);if(null!=i){a=i.id,r=i.toString();var o=l.default.getChannel(n.channelId);null!=o&&(r=f.default.getNickname(o.getGuildId(),n.channelId,i)||r)}return{userId:a,channelId:n.channelId,content:[{type:"text",content:null!=r?"@"+r:e[0]}]}}},channel:{order:a.default.defaultRules.text.order,match:function(e){return/^<#(\d+)>/.exec(e)},parse:function(e,t,n){if(n.returnMentionIds)return{type:"channel",id:e[1]};var r=l.default.getChannel(e[1]),a=n.mentionChannels,i=null!=r?r.guild_id:null,s=null!=r?r.id:null,d=null!=r?(0,o.default)(r):null,f=null!=a?a.find((function(t){return t.id===e[1]})):null;return null!=f&&(i=f.guild_id,s=f.id,d=f.name),null!=f||null!=r&&(0,u.isGuildSelectableChannelType)(r.type)&&c.default.can(E.Permissions.VIEW_CHANNEL,r)?{channelId:s,guildId:i,content:[{type:"text",content:null!=d?"#"+d:"#deleted-channel"}]}:{type:"text",content:null!=d?"#"+d:"#deleted-channel"}}},emoji:{order:a.default.defaultRules.text.order,match:function(e){var t=i.default.EMOJI_NAME_RE.exec(e);if(null!=t&&""!==i.default.convertNameToSurrogate(t[1]))return t},parse:function(e){var t=i.default.convertNameToSurrogate(e[1]);return{type:"text",content:t||":"+e[1]+":"}}},customEmoji:{order:a.default.defaultRules.text.order,match:function(e){return/^<a?:(\w+):(\d+)>/.exec(e)},parse:function(e){return{type:"text",content:":"+e[1]+":"}}},s:{order:a.default.defaultRules.u.order,match:a.default.inlineRegex(/^~~([\s\S]+?)~~(?!_)/),parse:a.default.defaultRules.u.parse},spoiler:{order:a.default.defaultRules.text.order,match:function(e){return E.MARKDOWN_SPOILER_REGEXP.exec(e)},parse:function(e,t,n){return{content:t(e[1],n),channelId:n.channelId}}}},C=(0,_.default)([O,h.default]),N=r.default.omit(C,["inlineCode","codeBlock","br","blockQuote"]),b=r.default.omit(C,["codeBlock","br","mention","channel","roleMention"]),M=r.default.omit((0,_.default)([C,{inlineCode:{match:function(e,t,n){var r=C.codeBlock.match(e,t,n);if(null!=r)return r;var a=C.inlineCode.match(e,t,n);return null!=a?a:void 0}}}]),["blockQuote","codeBlock","br"]),P=r.default.omit(C,["codeBlock","br","blockQuote"]),R={RULES:C,CHANNEL_TOPIC_RULES:N,EMBED_TITLE_RULES:b,INLINE_REPLY_RULES:M,GUILD_VERIFICATION_FORM_RULES:P};t.default=R},1461:function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,n={},i=function(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}(e);!(t=i()).done;){var o=t.value;for(var u in o)n[u]=u in n?r({},n[u],{},o[u]):r({},o[u])}return n}},1462:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpacityBounds=t.BackgroundOpacityClasses=void 0;var r=Object.freeze({LOW:"background-opacity-low",MEDIUM:"background-opacity-medium",HIGH:"background-opacity-high",FULL:"background-opacity-full",DISABLED:null});t.BackgroundOpacityClasses=r;var a=Object.freeze({BOTTOM:0,LOWER:.25,UPPER:.75,TOP:1});t.OpacityBounds=a},1463:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return o[e]};var r,a=n(44),i=n(880),o=Object.freeze(((r={})[i.ParticipantTypes.STREAM]=a.MediaEngineContextTypes.STREAM,r[i.ParticipantTypes.USER]=a.MediaEngineContextTypes.DEFAULT,r))},1465:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MessageDataType=void 0;var r=c(n(337)),a=c(n(277)),i=c(n(119)),o=c(n(15)),u=c(n(25)),l=c(n(1466)),s=n(1);function c(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f,p=null;__OVERLAY__&&(p=n(555).default),t.MessageDataType=f,function(e){e[e.SEND=0]="SEND",e[e.EDIT=1]="EDIT"}(f||(t.MessageDataType=f={}));var h=new(function(e){var t,n;function l(t){var n;return void 0===t&&(t=5),(n=e.call(this,new u.default("MessageQueue"))||this).maxSize=t,n.requests=new Map,n}n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var c=l.prototype;return c.isFull=function(){return this.queue.length>=this.maxSize},c.drain=function(e,t){switch(e.type){case f.SEND:this.handleSend(e.message,t);break;case f.EDIT:this.handleEdit(e.message,t)}},c.cancelRequest=function(e){var t;null===(t=this.requests.get(e))||void 0===t||t.abort(),this.requests.delete(e)},c.createResponseHandler=function(e,t){var n=this;return function(r){if(null!=e&&n.requests.has(e)&&n.requests.delete(e),r.hasErr)return t(null,r);(null==r.body||r.body.code!==s.AbortCodes.SLOWMODE_RATE_LIMITED&&r.body.code!==s.AbortCodes.CHANNEL_FOLLOWING_EDIT_RATE_LIMITED)&&429===r.status?t({retryAfter:1e3*r.body.retry_after}):t(null,r)}},c.handleSend=function(e,t){var n,u=this,l=e.channelId,c=e.file,f=e.filename,h=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["channelId","file","filename"]);null!=p&&(p.isInstanceUILocked()?n={location:s.AnalyticsOverlayLocations.OVERLAY_LOCKED_ACTIVATED}:p.isInstanceUILocked()||(n=p.isPinned(s.OverlayWidgets.TEXT)?{location:s.AnalyticsOverlayLocations.OVERLAY_UNLOCKED_PINNED}:{location:s.AnalyticsOverlayLocations.OVERLAY_UNLOCKED}));var _=this.createResponseHandler(e.nonce,t);if(c&&f){for(var E=r.default.post(s.Endpoints.MESSAGES(l)),v=0,y=Object.entries(h);v<y.length;v++){var m=y[v],g=m[0],T=m[1];null!=T&&E.field(g,T)}if(null!=n){var A=a.default.encodeProperties(n);E.set("X-Context-Properties",A)}E.attach("file",c,f),E.ok((function(e){return null!=e.status})),E.then((function(e){return _({ok:!0,hasErr:!1,headers:e.headers,body:e.body,text:e.text,status:e.status})}),(function(e){return _({ok:!1,hasErr:!0,err:e})}))}else{var I={timeout:6e4,retries:3,backoff:new i.default};0,o.default.post(d({url:s.Endpoints.MESSAGES(l),body:h,context:n,oldFormErrors:!0},I,{onRequestCreated:function(t){null!=e.nonce&&u.requests.set(e.nonce,t)}}),_)}},c.handleEdit=function(e,t){var n=this,r=e.channelId,a=e.messageId,i=e.content;o.default.patch({url:s.Endpoints.MESSAGE(r,a),body:{content:i},retries:1,oldFormErrors:!0,onRequestCreated:function(e){n.requests.set(a,e)}},this.createResponseHandler(a,t))},l}(l.default));t.default=h},1466:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(4853));function a(e){return e&&e.__esModule?e:{default:e}}var i=new(a(n(25)).default)("Queue"),o=function(){function t(e,t){void 0===e&&(e=i),void 0===t&&(t=100),this.logger=e,this.defaultRetryAfter=t,this.queue=new r.default,this.timeout=null,this.draining=!1}var n=t.prototype;return n.enqueue=function(e,t){this.queue.push({message:e,success:t}),this._drainIfNecessary()},n._drainIfNecessary=function(){var t=this;if(null===this.timeout&&0!==this.queue.length&&!0!==this.draining){this.draining=!0;var n=this.queue.shift(),r=n.message,a=n.success;this.drain(r,(function(r,i){if(t.draining=!1,r){var o=r.retryAfter||t.defaultRetryAfter;t.logger.info("Rate limited. Delaying draining of queue for "+o+" ms."),t.timeout=setTimeout((function(){t.queue.unshift(n),t.timeout=null,t._drainIfNecessary()}),o)}else{e((function(){return t._drainIfNecessary()}));try{a(i)}catch(e){t.logger.error("",e)}}}))}},t}();t.default=o}).call(this,n(54).setImmediate)},1467:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return r.default.get({url:u.Endpoints.INVITE(e),query:s({},n,{with_counts:!0}),oldFormErrors:!0}).then((function(r){var l=r.body,s=null,c=l.channel;return null!=c&&(l.target_user_type===u.InviteTargetUserTypes.STREAM?s=u.InviteTypes.STREAM:(0,a.isMultiUserDM)(c.type)?s=u.InviteTypes.GDM_INVITE:(0,a.isPrivate)(c.type)||(s=u.InviteTypes.SERVER_INVITE)),t&&o.default.track(u.AnalyticEvents.INVITE_RESOLVED,{resolved:!0,guild_id:null!=l.guild?l.guild.id:null,channel_id:l.channel.id,channel_type:l.channel.type,inviter_id:l.inviter?l.inviter.id:null,code:e,input_value:null==n?void 0:n.inputValue,location:t,authenticated:i.default.isAuthenticated(),size_total:l.approximate_member_count,size_online:l.approximate_presence_count,destination_user_id:null!=l.target_user?l.target_user.id:null,invite_type:s},{flush:!0}),{invite:l,code:e}}),(function(r){var a=null!=r.body&&r.body.code===u.AbortCodes.USER_BANNED;return t&&o.default.track(u.AnalyticEvents.INVITE_RESOLVED,{resolved:!1,code:e,input_value:null==n?void 0:n.inputValue,location:t,authenticated:i.default.isAuthenticated(),user_banned:a},{flush:!0}),{invite:null,code:e,banned:a}}))};var r=l(n(15)),a=n(86),i=l(n(20)),o=l(n(16)),u=n(1);function l(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},1468:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){a.default.transitionTo(i.Routes.CHANNEL(e.guildId,e.channelId))};var r,a=(r=n(69))&&r.__esModule?r:{default:r},i=n(1)},1469:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(15)),a=u(n(793)),i=n(1),o=u(n(6));function u(e){return e&&e.__esModule?e:{default:e}}var l={changeNickname:function(e,t,n,u){return r.default.patch({url:i.Endpoints.GUILD_MEMBER_NICK(e,n),body:{nick:u},oldFormErrors:!0}).then((function(e){u=e.body.nick,a.default.sendBotMessage(t,u?o.default.Messages.COMMAND_NICK_SUCCESS.plainFormat({nick:u}):o.default.Messages.COMMAND_NICK_RESET)}),(function(e){403===e.status?a.default.sendBotMessage(t,o.default.Messages.COMMAND_NICK_FAILURE_PERMISSION.plainFormat()):a.default.sendBotMessage(t,o.default.Messages.COMMAND_NICK_FAILURE)}))}};t.default=l},1473:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateDiscordTag=function(e){if(/^(.+?@.+?\..+?|.+?#\d{4})$/.test(e))return null;if(/^DiscordTag/i.test(e))return i.default.Messages.ADD_FRIEND_ERROR_DISCORD_TAG_USERNAME;if(/^\d+$/.test(e))return i.default.Messages.ADD_FRIEND_ERROR_NUMBERS_ONLY;if(e.length>0&&-1===e.indexOf("#"))return i.default.Messages.ADD_FRIEND_ERROR_USERNAME_ONLY.format({username:e});return i.default.Messages.ADD_FRIEND_ERROR_OTHER},t.humanizeAbortCode=function(e,t){switch(e){case a.AbortCodes.RELATIONSHIP_INCOMING_DISABLED:return i.default.Messages.ADD_FRIEND_ERROR_INVALID_DISCORD_TAG.format({discordTag:t});case a.AbortCodes.TOO_MANY_FRIENDS:return i.default.Messages.ADD_FRIEND_ERROR_TOO_MANY_FRIENDS;case a.AbortCodes.RELATIONSHIP_INCOMING_BLOCKED:case a.AbortCodes.RELATIONSHIP_INVALID_SELF:case a.AbortCodes.RELATIONSHIP_INVALUD_USER_BOT:case a.AbortCodes.RELATIONSHIP_INVALID_DISCORD_TAG:default:return i.default.Messages.ADD_FRIEND_ERROR_OTHER}};var r,a=n(1),i=(r=n(6))&&r.__esModule?r:{default:r}},1474:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(5)),a=n(44),i=o(n(3));n(1);function o(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=null,s=null,c={};function d(e,t){void 0===t&&(t=null);for(var n=c[e]||{},r=0,i=Object.values(a.MediaEngineContextTypes);r<i.length;r++){var o=i[r];t!==o&&null!=t||delete n[o]}c[e]=n}var f=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.getStreamId=function(e,t){var n,r;return void 0===t&&(t=a.MediaEngineContextTypes.DEFAULT),null===(n=c[e])||void 0===n||null===(r=n[t])||void 0===r?void 0:r.streamId},i.getQuality=function(e,t){var n,r;return void 0===t&&(t=a.MediaEngineContextTypes.DEFAULT),null===(n=c[e])||void 0===n||null===(r=n[t])||void 0===r?void 0:r.quality},i.getUserStreamData=function(e,t){var n;return void 0===t&&(t=a.MediaEngineContextTypes.DEFAULT),null===(n=c[e])||void 0===n?void 0:n[t]},r}(r.default.Store))(i.default,{CONNECTION_OPEN:function(e){var t=e.user,n=e.sessionId;l=t.id,s=n},OVERLAY_INITIALIZE:function(e){var t=e.user,n=e.sessionId;l=t.id,s=n},RTC_CONNECTION_VIDEO:function(e){var t=e.userId,n=e.streamId,r=e.quality,a=e.context;null!=n?function(e,t,n,r){var a,i=c[e]||{};c[e]=u({},i,((a={})[r]={streamId:t,quality:n},a))}(t,n,r,a):d(t,a)},VOICE_STATE_UPDATE:function(e){var t=e.userId,n=e.sessionId,r=e.channelId;if(null==r&&t===l){if(n!==s)return!1;c={}}else{if(null!=r||null==c[t])return!1;d(t)}},MEDIA_ENGINE_VIDEO_QUALITY_CHANGED:function(e){var t=e.senderUserId,n=e.context,r=e.quality,a=c[t]||{};return null!=a[n]&&(a[n].quality=r),!1}});t.default=f},1475:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=(r=n(3))&&r.__esModule?r:{default:r},i=n(1);var o={show:function(e,t,n,r,o){a.default.dispatch({type:i.ActionTypes.NOTICE_SHOW,notice:{id:o,type:e,message:t,buttonText:n,callback:r}})},dismiss:function(e,t){a.default.dispatch({type:i.ActionTypes.NOTICE_DISMISS,id:e,isTemporary:t})}};t.default=o},211:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectGuildAnalyticsMetadata=C,t.collectChannelAnalyticsMetadata=N,t.collectVoiceAnalyticsMetadata=function(e){if(null==e)return null;var t=o.default.getChannel(e);if(null==t)return null;var n=d.default.isVideoEnabled(),r=h.default.getMediaSessionId();return S({channel_id:t.id,channel_type:t.type,guild_id:t.getGuildId(),media_session_id:r},P(t.getGuildId(),t.id,n),{},(0,g.getVoiceAnalyticsMetadataAdditional)())},t.trackWithMetadata=b,t.trackWithGroupMetadata=M,t.getVoiceStateMetadata=P,t.getCustomStatusMetadata=function(e,t){var n={custom_status_count:0};return(0,r.default)(v.default.getVoiceStates(e)).forEach((function(e){e.channelId===t&&null!=p.default.findActivity(e.userId,(function(e){return e.type===T.ActivityTypes.CUSTOM_STATUS}))&&n.custom_status_count++})),n},t.default=void 0;var r=I(n(7)),a=I(n(108)),i=I(n(20)),o=I(n(29)),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=A();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(197)),l=I(n(552)),s=I(n(101)),c=I(n(34)),d=I(n(56)),f=I(n(99)),p=I(n(281)),h=I(n(144)),_=I(n(98)),E=I(n(271)),v=I(n(199)),y=I(n(16)),m=I(n(273)),g=n(4847),T=n(1);function A(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return A=function(){return e},e}function I(e){return e&&e.__esModule?e:{default:e}}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e){var t=0;for(var n in e)t+=1;return t}function C(e){var t;if(null==e)return null;var n=c.default.getGuild(e);if(null==n)return null;var r=i.default.getId(),a=s.default.getMember(e,r),o=u.default.getChannels(e),d=o[u.GUILD_SELECTABLE_CHANNELS_KEY].length,p=o[T.ChannelTypes.GUILD_VOICE].length,h=v.default.getVoiceStates(e);return{guild_id:n.id,guild_size_total:l.default.getMemberCount(e),guild_num_channels:d+p,guild_num_text_channels:d,guild_num_voice_channels:p,guild_num_roles:O(n.roles),guild_member_num_roles:a?a.roles.length:0,guild_member_perms:String(null!==(t=f.default.getGuildPermissions(e))&&void 0!==t?t:m.default.NONE),guild_is_vip:n.hasFeature(T.GuildFeatures.VIP_REGIONS),is_member:null!=a,num_voice_channels_active:O(h)}}function N(e){var t;if(null==e)return null;var n=!1,r=e.getGuildId();if(null!=r){var i=e.permissionOverwrites[r];i&&a.default.has(i.deny,T.Permissions.VIEW_CHANNEL)&&(n=!0)}return{channel_id:e.id,channel_type:e.type,channel_size_total:r?0:e.recipients.length,channel_member_perms:String(r&&null!==(t=f.default.getChannelPermissions(e.id))&&void 0!==t?t:m.default.NONE),channel_hidden:n}}function b(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n=!1),!y.default.isThrottled(e)){var r=t.location!==T.AnalyticsLocations.GUILD_CREATE_INVITE_SUGGESTION,a=t.guild_id||(r?E.default.getGuildId():null),i=t.channel_id||(r?_.default.getChannelId(a):null),u=S({},t,{},C(a),{},N(o.default.getChannel(i)));y.default.track(e,u,{flush:n})}}function M(e,t,n){if(void 0===n&&(n={}),!y.default.isThrottled(e)){var r=S({},n,{},N(t.channel),{channel_type:T.ChannelTypes.GROUP_DM,game_id:t.game_id},(0,g.getGroupMetadataAdditional)(t.game_id),{owner_id:t.ownerId,total_size:t.size,free_size:t.available,title:t.title,description:t.description});y.default.track(e,r)}}function P(e,t,n){var a={voice_state_count:0,video_stream_count:0,video_enabled:n};return(0,r.default)(v.default.getVoiceStates(e)).filter((function(e){return e.channelId===t})).filter((function(e){return e.userId!==i.default.getId()})).forEach((function(e){a.voice_state_count++,(e.selfVideo||e.selfStream)&&a.video_stream_count++})),a}var R={trackWithMetadata:b,trackWithGroupMetadata:M,getVoiceStateMetadata:P};t.default=R},289:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deletePaymentSource=function(e){return _.apply(this,arguments)},t.updatePaymentSource=function(e,t){return E.apply(this,arguments)},t.createPaymentSource=m,t.createPaymentRequestPaymentSource=function(e,t){var n=u.parseStripePaymentMethod(e),r=n.token,a=n.billingAddressInfo;return m(l.PaymentGateways.STRIPE,r,t||a)},t.createCardPaymentSource=function(e){return I.apply(this,arguments)},t.createPaypalPaymentSource=function(e,t){return m(l.PaymentGateways.BRAINTREE,e,t)},t.fetchPaymentSources=function(){return S.apply(this,arguments)},t.fetchPayments=function(e,t){return O.apply(this,arguments)},t.fetchSubscriptions=function(){return C.apply(this,arguments)},t.createSubscription=function(e){return N.apply(this,arguments)},t.cancelSubscription=function(e){return b.apply(this,arguments)},t.updateSubscription=M,t.resubscribeToSubscription=function(e,t){return M(e,{status:l.SubscriptionStatusTypes.ACTIVE,paymentSourceId:null!=t?t.id:null})},t.upgradeSubscription=function(e,t){return M(e,{status:l.SubscriptionStatusTypes.ACTIVE,plan:t})},t.changePaymentSource=function(e,t){return M(e,{paymentSourceId:t.id})},t.clearUpdatePaymentSourceError=function(){a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENT_SOURCE_UPDATE_CLEAR_ERROR})},t.clearRemovePaymentSourceError=function(){a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENT_SOURCE_REMOVE_CLEAR_ERROR})},t.clearPaymentAuthenticationError=function(){a.default.dispatch({type:l.ActionTypes.PAYMENT_AUTHENTICATION_CLEAR_ERROR})},t.voidPendingPayment=function(e){return R.apply(this,arguments)};var r=c(n(15)),a=c(n(3)),i=n(283),o=c(n(355)),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(557)),l=n(1);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function p(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){p(i,r,a,o,u,"next",e)}function u(e){p(i,r,a,o,u,"throw",e)}o(void 0)}))}}function _(){return(_=h(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENT_SOURCE_REMOVE_START}),e.prev=1,e.next=4,r.default.delete({url:l.Endpoints.BILLING_PAYMENT_SOURCE(t),oldFormErrors:!0});case 4:a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENT_SOURCE_REMOVE_SUCCESS,id:t}),e.next=12;break;case 7:throw e.prev=7,e.t0=e.catch(1),n=new i.BillingError(e.t0),a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENT_SOURCE_REMOVE_FAIL,error:n}),n;case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function E(){return(E=h(regeneratorRuntime.mark((function e(t,n){var u,s,c,p,h,_,E,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENT_SOURCE_UPDATE_START}),e.prev=1,u=n.billingAddress,s=u.line1,c=u.line2,p=u.postalCode,h=f(u,["line1","line2","postalCode"]),e.next=5,r.default.patch({url:l.Endpoints.BILLING_PAYMENT_SOURCE(t),body:{billing_address:d({},h,{line_1:s,line_2:c,postal_code:p}),expires_month:n.expiresMonth,expires_year:n.expiresYear,default:n.isDefault},oldFormErrors:!0});case 5:_=e.sent,E=o.default.createFromServer(_.body),a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENT_SOURCE_UPDATE_SUCCESS,paymentSource:E}),e.next=15;break;case 10:throw e.prev=10,e.t0=e.catch(1),v=new i.BillingError(e.t0),a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENT_SOURCE_UPDATE_FAIL,error:v}),v;case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function v(){return y.apply(this,arguments)}function y(){return(y=h(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.post({url:l.Endpoints.BILLING_STRIPE_SETUP_INTENT_SECRET,oldFormErrors:!0});case 2:return t=e.sent,e.abrupt("return",t.body.client_secret);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t,n){return g.apply(this,arguments)}function g(){return(g=h(regeneratorRuntime.mark((function e(t,n,u){var s,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENT_SOURCE_CREATE_START}),e.prev=1,e.next=4,r.default.post({url:l.Endpoints.BILLING_PAYMENT_SOURCES,body:{payment_gateway:t,token:n,billing_address:{name:u.name,line_1:u.line1,line_2:u.line2,city:u.city,state:u.state,postal_code:u.postalCode,country:u.country}},oldFormErrors:!0});case 4:return s=e.sent,c=o.default.createFromServer(s.body),a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENT_SOURCE_CREATE_SUCCESS,paymentSource:c}),e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(1),d=new i.BillingError(e.t0),a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENT_SOURCE_CREATE_FAIL,error:d}),d;case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function T(e){return A.apply(this,arguments)}function A(){return(A=h(regeneratorRuntime.mark((function e(t){var n,r,o,s,c,d,f,p,h,_,E,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type===l.PaymentSourceTypes.CARD){e.next=2;break}throw new Error("Stripe is only for Card types");case 2:return e.next=4,u.ensureStripeIsLoaded();case 4:return n=e.sent,r=t.cardNumber,o=t.cvc,s=t.expirationDate,c=t.billingAddress,d=c.name,f=c.line1,p=c.line2,h=c.city,_=c.state,E=c.postalCode,v=c.country,e.abrupt("return",new Promise((function(e,t){n.card.createToken({number:r,cvc:o,exp:s,name:d,address_line1:f,address_line2:p,address_city:h,address_state:_,address_zip:E,address_country:v},(function(n,r){200===n&&null!=r&&r.id?e(r):(a.default.dispatch({type:l.ActionTypes.STRIPE_TOKEN_FAILURE,error:null!=r?new i.StripeError(r):null}),t(r))}))})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=h(regeneratorRuntime.mark((function e(t){var n,r,o,s,c,d,f,p,h,_,E,y,g,A,I,S,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type===l.PaymentSourceTypes.CARD){e.next=2;break}throw new Error("Stripe is only for Card types");case 2:return a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENT_SOURCE_CREATE_START}),n=null,e.prev=4,e.next=7,v();case 7:n=e.sent,e.next=15;break;case 10:throw e.prev=10,e.t0=e.catch(4),r=new i.BillingError(e.t0),a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENT_SOURCE_CREATE_FAIL,error:r}),r;case 15:return e.next=17,T(t);case 17:return o=e.sent,s=o.id,e.next=21,u.ensureStripeV3IsLoaded();case 21:return c=e.sent,d=t.billingAddress,f=d.name,p=d.line1,h=d.line2,_=d.city,E=d.state,y=d.postalCode,g=d.country,e.next=25,c.handleCardSetup(n,{payment_method_data:{card:{token:s},billing_details:{address:{line1:p,line2:h,city:_,state:E,postal_code:y,country:g},name:f}}});case 25:if(A=e.sent,I=A.setupIntent,null==(S=A.error)){e.next=32;break}throw O=new i.BillingError(S.message),a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENT_SOURCE_CREATE_FAIL,error:O}),O;case 32:return e.abrupt("return",m(l.PaymentGateways.STRIPE,I.payment_method,t.billingAddress));case 33:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function S(){return(S=h(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.wait((function(){return a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENT_SOURCES_FETCH_START})})),e.prev=1,e.next=4,r.default.get({url:l.Endpoints.BILLING_PAYMENT_SOURCES,oldFormErrors:!0});case 4:return t=e.sent,a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENT_SOURCES_FETCH_SUCCESS,paymentSources:t.body}),e.abrupt("return",t);case 9:throw e.prev=9,e.t0=e.catch(1),a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENT_SOURCES_FETCH_FAIL}),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function O(){return(O=h(regeneratorRuntime.mark((function e(t,n){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=10),a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENTS_FETCH_START}),e.prev=2,e.next=5,r.default.get({url:l.Endpoints.BILLING_PAYMENTS,query:{limit:t,before:n},oldFormErrors:!0});case 5:return i=e.sent,a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENTS_FETCH_SUCCESS,payments:i.body}),e.abrupt("return",i);case 10:throw e.prev=10,e.t0=e.catch(2),a.default.dispatch({type:l.ActionTypes.BILLING_PAYMENTS_FETCH_FAIL}),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function C(){return(C=h(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.dispatch({type:l.ActionTypes.BILLING_SUBSCRIPTION_FETCH_START}),e.prev=1,e.next=4,r.default.get({url:l.Endpoints.BILLING_SUBSCRIPTIONS,oldFormErrors:!0});case 4:return t=e.sent,a.default.dispatch({type:l.ActionTypes.BILLING_SUBSCRIPTION_FETCH_SUCCESS,subscriptions:t.body}),e.abrupt("return",t);case 9:throw e.prev=9,e.t0=e.catch(1),a.default.dispatch({type:l.ActionTypes.BILLING_SUBSCRIPTION_FETCH_FAIL}),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function N(){return(N=h(regeneratorRuntime.mark((function e(t){var n,o,u,s,c,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(n=void 0===t?{}:t).additionalPlans,u=n.paymentSourceId,s=n.planId,c=n.trialId,a.default.dispatch({type:l.ActionTypes.BILLING_SUBSCRIPTION_UPDATE_START}),e.prev=2,e.next=5,r.default.post({url:l.Endpoints.BILLING_SUBSCRIPTIONS,body:{plan_id:s,payment_source_id:null!=u?u:null,trial_id:c,additional_plans:null!=o?o.map((function(e){return{plan_id:e.planId,quantity:e.quantity}})):null},oldFormErrors:!0});case 5:return d=e.sent,a.default.dispatch({type:l.ActionTypes.BILLING_SUBSCRIPTION_UPDATE_SUCCESS,subscription:d.body}),e.abrupt("return",d.body);case 10:throw e.prev=10,e.t0=e.catch(2),f=new i.BillingError(e.t0),a.default.dispatch({type:l.ActionTypes.BILLING_SUBSCRIPTION_UPDATE_FAIL,error:f}),f;case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function b(){return(b=h(regeneratorRuntime.mark((function e(t){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.dispatch({type:l.ActionTypes.BILLING_SUBSCRIPTION_CANCEL_START}),e.prev=1,e.next=4,r.default.delete({url:l.Endpoints.BILLING_SUBSCRIPTION(t),oldFormErrors:!0});case 4:return n=e.sent,a.default.dispatch({type:l.ActionTypes.BILLING_SUBSCRIPTION_CANCEL_SUCCESS}),e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(1),o=new i.BillingError(e.t0),a.default.dispatch({type:l.ActionTypes.BILLING_SUBSCRIPTION_CANCEL_FAIL,error:o}),o;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function M(e,t){return P.apply(this,arguments)}function P(){return(P=h(regeneratorRuntime.mark((function e(t,n){var o,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.dispatch({type:l.ActionTypes.BILLING_SUBSCRIPTION_UPDATE_START}),e.prev=1,o={status:n.status,plan_id:n.plan,payment_source_id:n.paymentSourceId},null!=n.additionalPlans&&(o.additional_plans=n.additionalPlans.map((function(e){return{plan_id:e.planId,quantity:e.quantity}}))),e.next=6,r.default.patch({url:l.Endpoints.BILLING_SUBSCRIPTION(t.id),body:o,oldFormErrors:!0});case 6:return u=e.sent,a.default.dispatch({type:l.ActionTypes.BILLING_SUBSCRIPTION_UPDATE_SUCCESS,subscription:u.body}),e.abrupt("return",u);case 11:throw e.prev=11,e.t0=e.catch(1),s=new i.BillingError(e.t0),a.default.dispatch({type:l.ActionTypes.BILLING_SUBSCRIPTION_UPDATE_FAIL,error:s}),s;case 16:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function R(){return(R=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.post({url:l.Endpoints.BILLING_PAYMENTS_VOID(t),oldFormErrors:!0});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},344:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(n(3)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(338)),i=d(n(29)),o=d(n(56)),u=d(n(69)),l=n(4849),s=n(1);function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function d(e){return e&&e.__esModule?e:{default:e}}var f={selectChannel:function(e,t,n){r.default.dirtyDispatch({type:s.ActionTypes.CHANNEL_SELECT,guildId:e===s.ME?null:e,channelId:t,messageId:n})},selectPrivateChannel:function(e){u.default.transitionTo(s.Routes.CHANNEL(s.ME,e))},selectVoiceChannel:function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=i.default.getChannel(e),u=null==r?void 0:r.getGuildId();o.default.isSupported()&&(null!=e&&(o.default.getMediaEngine().interact(),a.default.requestPermission(a.NativePermissionTypes.AUDIO),o.default.getMode()===s.InputModes.PUSH_TO_TALK&&a.default.requestPermission(a.NativePermissionTypes.INPUT_MONITORING)),(0,l.selectVoiceChannelAdditional)(e,u,t,n))}};t.default=f},4839:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeObject=function(e){return a.default.cloneDeepWith(e,(function(e){if(e instanceof i.BigFlag)return{__tag__:"bigflag",data:e.toJSON()}}))},t.deserializeObject=function(e){return a.default.cloneDeepWith(e,(function(e){if(null!=e&&"object"==typeof e&&"__tag__"in e&&"bigflag"===e.__tag__)return i.default.deserialize(e.data)}))},t.deserializeToBigFlag=function(e){return i.default.deserialize(e.data)};var r,a=(r=n(7))&&r.__esModule?r:{default:r},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(108));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}},4840:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){var t,n;function r(t){var n;return(n=e.call(this)||this).id=t.id||"",n.widgets=t.widgets||[],n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(((r=n(58))&&r.__esModule?r:{default:r}).default);t.default=a},4841:function(e,t,n){"use strict";var r;function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){var t,n;function r(t){var n;return(n=e.call(this)||this).id=t.id||"",n.layoutId=t.layoutId||"",n.type=t.type,n.anchor=a({left:0,top:0},t.anchor),n.size=a({width:0,height:0},t.size),n.pinned=!!t.pinned,n.zIndex=t.zIndex||0,n.meta=a({},t.meta),n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(((r=n(58))&&r.__esModule?r:{default:r}).default);t.default=i},4847:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVoiceAnalyticsMetadataAdditional=function(){var e=a.default.getCurrentGame();return{game_name:null!=e?e.name:null,game_id:null!=e?e.id:null}},t.getGroupMetadataAdditional=function(e){var t=r.default.getGame(e);return{game_name:null!=t?t.name:"Unknown Game"}};var r=i(n(84)),a=i(n(95));function i(e){return e&&e.__esModule?e:{default:e}}},4848:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/[\s-~]+/g,"-").replace(/^-+/,"").replace(/[\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").toLowerCase()}},4849:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectVoiceChannelAdditional=void 0;var r=h(n(3)),a=h(n(4850)),i=h(n(4851)),o=h(n(29)),u=h(n(34)),l=h(n(1429)),s=h(n(98)),c=h(n(199)),d=n(55),f=n(553),p=n(1);function h(e){return e&&e.__esModule?e:{default:e}}t.selectVoiceChannelAdditional=function(e,t,n,h){void 0===n&&(n=!1),void 0===h&&(h=!1);var _=o.default.getChannel(e),E=c.default.getCurrentClientVoiceChannelId(t)===e,v=null!=_?l.default.getCheck(_.guild_id):null;(null==v||v.canChat)&&(null==_||!(0,f.isChannelFull)(_,c.default,u.default)||E?(0,i.default)((function(){r.default.dirtyDispatch({type:p.ActionTypes.VOICE_CHANNEL_SELECT,guildId:t,channelId:e,currentVoiceChannelId:s.default.getVoiceChannelId(),video:n,stream:h})}),e,h,n):(0,d.openModal)(a.default))}},4850:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=h;!function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n)}(n(0));var r,a=d(n(47)),i=d(n(330)),o=n(83),u=d(n(209)),l=d(n(68)),s=d(n(6)),c=d(n(4974));function d(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(e){var t=e.transitionState,n=e.onClose;return p(o.ModalRoot,{size:o.ModalSize.DYNAMIC,transitionState:t,"aria-label":s.default.Messages.UNABLE_TO_JOIN_CHANNEL_FULL_MODAL_HEADER},void 0,p(o.ModalHeader,{className:c.default.headerContainer,separator:!1},void 0,p(u.default,{size:u.default.Sizes.SIZE_16,className:c.default.header},void 0,s.default.Messages.UNABLE_TO_JOIN_CHANNEL_FULL_MODAL_HEADER),p(a.default,{size:a.default.Sizes.MIN,onClick:n,color:a.default.Colors.TRANSPARENT,look:a.default.Looks.BLANK},void 0,p(i.default,{className:c.default.close}))),p(o.ModalContent,{},void 0,p(l.default,{},void 0,s.default.Messages.UNABLE_TO_JOIN_CHANNEL_FULL_MODAL_BODY),p("div",{className:c.default.fullArt})),p(o.ModalFooter,{},void 0,p(a.default,{onClick:n},void 0,s.default.Messages.OKAY)))}h.displayName="ChannelFullModal"},4851:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,s){var d=u.default.getVoiceChannelId(),f=i.default.getChannel(d);if(null==t&&null!=d&&f){var p=function(e,t){return c({channel_id:e.id,channel_type:e.type,guild_id:e.getGuildId(),rtc_connection_id:o.default.getRTCConnectionId(),duration:o.default.getDuration(),media_session_id:o.default.getMediaSessionId()},(0,a.getVoiceStateMetadata)(o.default.getGuildId(),o.default.getChannelId(),t))}(f,s);e(),n||r.default.dispatch({type:l.ActionTypes.VOICE_CHANNEL_SHOW_FEEDBACK,analyticsData:p})}else e()};var r=s(n(3)),a=n(211),i=s(n(29)),o=s(n(144)),u=s(n(98)),l=n(1);function s(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},4854:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={init:function(){},donateSentMessage:function(e,t){}}},4855:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={clear:function(){},channelRendered:function(e){},appStateChanged:function(e){},messageFetchStart:function(e){},messageFetchEnd:function(e){},notificationTapped:function(e,t,n,r){}}},4856:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=new Map,a=new Map;function i(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var o={ensure:function(e){var t=r.get(e);return t||(t=function(e){return new Promise((function(t,n){var o=!1,u=a.get(e),l=function(){o||(o=!0,i(s),clearTimeout(c),r.delete(e),n(new Error("script error")))},s=document.createElement("script");s.async=1,s.type="text/javascript",s.onload=function(){return i(s),clearTimeout(c),u&&window[u]?t(window[u]):u&&!window[u]?n(new Error("globalKey does not exist in window")):void t()},s.onerror=l,s.src=e,document.body.appendChild(s);var c=setTimeout(l,3e3)}))}(e),r.set(e,t),t)},register:function(e,t){a.set(e,t)}};t.default=o},4860:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=I(n(42)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=A();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(816)),i=I(n(119)),o=I(n(5)),u=I(n(15)),l=I(n(26)),s=I(n(3)),c=I(n(25)),d=n(4869),f=I(n(4870)),p=I(n(4871)),h=I(n(276)),_=I(n(16)),E=I(n(205)),v=I(n(202)),y=I(n(4873)),m=I(n(4874)),g=I(n(4875)),T=n(1);function A(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return A=function(){return e},e}function I(e){return e&&e.__esModule?e:{default:e}}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=new g.default;function b(){}var M=function(){function e(e,t){this.gatewayBackoff=t,this.discoveryEndpoint=e,this.gatewayURL=this._loadGatewayFromCache(),this.logger=new c.default("GatewayDiscovery")}var t=e.prototype;return t._loadGatewayFromCache=function(){if(null==this.gatewayURL)return l.default.get(d.STORAGE_GATEWAY_URL)},t._cacheDiscoveredGateway=function(){l.default.set(d.STORAGE_GATEWAY_URL,this.gatewayURL)},t.discoverGateway=function(){var e=this;if(this.gatewayBackoff.fails<=4){var t=this.gatewayURL;if(null!=t)return this.logger.info("[STICKY] "+t),Promise.resolve(t)}return this.logger.info("[DISCOVERING]"),u.default.get({url:this.discoveryEndpoint,oldFormErrors:!0}).then((function(t){var n=t.body.url;return e.gatewayURL=n,e._cacheDiscoveredGateway(),e.logger.info("[DISCOVERED] "+n),n}),(function(){throw l.default.remove(d.STORAGE_GATEWAY_URL),E.default.flushDNSCache(),new Error("Could not discover gateway")}))},e}();function P(e){return null==e?0:"string"==typeof e?new Blob([e]).size:e.byteLength}var R=function(t){var n,r;function u(e,n){var r;return(r=t.call(this)||this).dispatchExceptionBackoff=new i.default(1e3,6e4),r.dispatchSuccessTimer=0,r.didForceClearGuildHashes=!1,r.identifyUncompressedByteSize=0,r.identifyCompressedByteSize=0,r.isCacheLoaded=f.default.cacheFullyLoaded(),r.queuedDispatches=[],r.handleCacheLoaded=function(){r.isCacheLoaded=!0,f.default.removeChangeListener(r.handleCacheLoaded);for(var e,t=O(r.queuedDispatches);!(e=t()).done;){var n=e.value,a=n.data,i=n.type,o=n.compressionAnalytics;r._handleDispatch(a,i,o)}},r.send=function(e,t,n){h.default.isLoggingGatewayEvents&&r.logger.verbose("~>",e,t);var a=N.pack({op:e,d:t});if(!n||r.isSessionEstablished())try{null!=r.webSocket?r.webSocket.send(a):r.logger.warn("Attempted to send without a websocket that exists. Opcode: "+e)}catch(e){}else r.logger.warn("Attempted to send while not being in a connected state opcode: "+e)},r.gatewayBackoff=new i.default(1e3,6e4),r.gatewayDiscovery=new M(e,r.gatewayBackoff),r.handleIdentify=n,r.connectionState=0,r.webSocket=null,r.seq=0,r.replayedEvents=0,r.sessionId=null,r.token=null,r.logger=new c.default("GatewaySocket"),r.initialHeartbeatTimeout=null,r.expeditedHeartbeatTimeout=null,r.lastHeartbeatAckTime=null,r.helloTimeout=null,r.heartbeatInterval=null,r.heartbeater=null,r.heartbeatAck=!0,r.connectionStartTime=0,r.identifyStartTime=0,r.nextReconnectIsImmediate=!1,r.compressionHandler=new m.default(N),r.hasConnectedOnce=!1,r.isFastConnect=!1,r.isCacheLoaded||f.default.addChangeListener(r.handleCacheLoaded),r}r=t,(n=u).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var l=u.prototype;return l._discoveryFailed=function(){var e=this,t=this.gatewayBackoff.fail((function(){return e._discover()}));this.logger.warn("[DISCOVERY FAIL] retrying in "+(t/1e3).toFixed(2)+" seconds."),this.gatewayBackoff.fails>4&&this._reset(!1,0,"Gateway discovery failed")},l._discover=function(){var e=this;this.nextReconnectIsImmediate=!1,1===this.connectionState&&this.gatewayDiscovery.discoverGateway().then((function(t){e._connect(t)}),(function(){e._discoveryFailed()}))},l._connect=function(e){var t=this;if(1===this.connectionState){this.connectionState=2;var n,r,a,i=this.compressionHandler.getAlgorithm(),u=N.getName();this.logger.info("[CONNECT] "+e+", encoding: "+u+", version: 8, compression: "+(i||"none")),null!==this.webSocket&&(this.logger.error("_connect called with already existing websocket"),this._cleanup((function(e){return e.close(4e3)}))),this.connectionStartTime=Date.now(),this.helloTimeout=setTimeout((function(){var e=Date.now()-t.connectionStartTime;t._handleClose(!1,0,"The connection timed out after "+e+" ms - did not receive OP_HELLO in time.")}),2e4),e+="/?encoding="+u+"&v=8",i&&(e+="&compress="+i),function(e,t,n,r,a,i){var o,u=window._ws,l=!1,s=!1,c=null;window._ws=null,null!=u&&(o=u.ws,u.state.gateway!==e?(console.log("[FAST CONNECT] gatewayURL mismatch: "+u.state.gateway+" !== "+e),o.close(1e3),o=null):(l=u.state.open,s=Boolean(u.state.identify),c=u.state.messages)),null==o&&((o=new WebSocket(e)).binaryType="arraybuffer"),t(o),l&&n(s),c&&c.forEach(r),o.onopen=function(){return n(!1)},o.onmessage=r,o.onclose=i,o.onerror=a}(e,(function(e){t.webSocket=e,t.compressionHandler.bindWebSocket(e)}),(function(n){var r=Date.now()-t.connectionStartTime;t.logger.info("[CONNECTED] "+e+" in "+r+" ms"),t.isFastConnect=n,n?t._doFastConnectIdentify():t._doResumeOrIdentify()}),(n=this.compressionHandler,r=function(e,n){var r=Date.now(),a=N.unpack(e),i=a.op,u=a.s,l=a.t,s=a.d,c=Date.now()-r;switch(null!=u&&(t.seq=u),i){case 10:t._clearHelloTimeout(),t._handleHello(s);break;case 7:t._handleReconnect();break;case 9:t._handleInvalidSession(s);break;case 1:t._sendHeartbeat();break;case 11:t._handleHeartbeatAck(s);break;case 0:4===t.connectionState&&(t.replayedEvents+=1,o.default.Store.pauseEmittingChanges(150)),t._handleDispatch(s,l,{compressed_byte_size:n,uncompressed_byte_size:P(e),compression_algorithm:t.compressionHandler.getAlgorithm(),packing_algorithm:N.getName(),unpack_duration_ms:c});break;default:t.logger.info("Unhandled op "+i)}},a=0,n.dataReady((function(e){try{return r(e,a)}finally{a=0}})),function(e){var t=e.data;a+=P(t),n.feed(t)}),(function(){E.default.flushDNSCache(),t._handleClose(!1,0,"An error with the websocket occurred")}),(function(e){var n=e.wasClean,r=e.code,a=e.reason;return t._handleClose(n,r,a)}))}},l._handleHello=function(e){var t=this.heartbeatInterval=e.heartbeat_interval,n=Date.now()-this.connectionStartTime;this.logger.info("[HELLO] via "+this._getConnectionPath(e)+", heartbeat interval: "+t+", took "+n+" ms"),this._startHeartbeater()},l._handleReconnect=function(){this.logger.info("[RECONNECT] gateway requested I reconnect."),this._cleanup((function(e){return e.close(4e3)})),this.connectionState=1,this._discover()},l._handleInvalidSession=function(e){this.logger.info("[INVALID_SESSION]"+(e?" can resume)":"")),e?this._doResumeOrIdentify():this._doIdentify()},l._handleDispatch=function(e,t,n){if(this.isCacheLoaded){var r,a,i,u,l,s,c,d,f,p,E,y,m,g,A,I,O,C,N,b,M,P=Date.now();if("READY"===t||"READY_SUPPLEMENTAL"===t||"RESUMED"===t){o.default.Store.resumeEmittingChanges();var R=Date.now()-this.connectionStartTime;switch(t){case"READY":var L=e.session_id;this.sessionId=L,this.logger.info("[READY] took "+R+"ms, via "+this._getConnectionPath(e)+" as "+L);break;case"READY_SUPPLEMENTAL":this.logger.info("[READY_SUPPLEMENTAL] took "+R+"ms");break;case"RESUMED":this.logger.info("[RESUMED] took "+R+"ms, via "+this._getConnectionPath(e)+", replayed "+this.replayedEvents+" events, new seq: "+this.seq),this.replayedEvents=0}this.connectionState=5,this.gatewayBackoff.succeed()}0,h.default.isLoggingGatewayEvents&&this.logger.verbose("<~",t,e);try{this.emit("dispatch",t,e)}catch(e){this.logger.error(e),(!e.message||e.message.indexOf("Guild data was missing from store")<0)&&v.default.captureException(e),this.resetSocketOnError()}"READY"===t&&(_.default.track(T.AnalyticEvents.READY_PAYLOAD_RECEIVED,S({},n,{},function(e){var t=e._trace,n={};try{var r=JSON.parse(t);r[0]&&r[0].startsWith("gateway-")&&(n.identify_total_server_duration_ms=Math.floor(r[1].micros/1e3)),function e(t,n){if(t&&t.length)for(var r=0;r<t.length;r+=2){var a=t[r],i=t[r+1];n(a,i.micros),e(i.calls,n)}}(r,(function(e,t){"start_session"===e?n.identify_api_duration_ms=Math.floor(t/1e3):"guilds_connect"===e&&(n.identify_guilds_duration_ms=Math.floor(t/1e3))}))}catch(e){}return n}(e),{},(u=(r=e).guilds,l=r.merged_presences,s=r.merged_members,c=r.read_state,d=r.private_channels,f=r.user_guild_settings,p=r.relationships,E=r.users,y=[],m=[],g=[],A=[],I=[],O=0,C=0,N=0,b=0,M=0,u.forEach((function(e){var t,n,r,a=e.channels,i=e.voice_states,o=e.roles,u=e.emojis,l=e.guild_hashes,s=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["channels","voice_states","roles","emojis","guild_hashes"]);e.unavailable||(null!=a&&null!=a.forEach&&a.forEach((function(e){C++,e.type===T.ChannelTypes.GUILD_CATEGORY&&O++})),(null==l||null===(t=l.metadata)||void 0===t?void 0:t.omitted)&&N++,(null==l||null===(n=l.channels)||void 0===n?void 0:n.omitted)&&b++,(null==l||null===(r=l.roles)||void 0===r?void 0:r.omitted)&&M++,y.push(i),m.push(a),g.push(o),A.push(u),I.push(s))})),{presences_size:JSON.stringify(null!==(a=null==l?void 0:l.friends)&&void 0!==a?a:[]).length,users_size:JSON.stringify(E).length,read_states_size:JSON.stringify(c).length,private_channels_size:JSON.stringify(d).length,user_guild_settings_size:JSON.stringify(f).length,relationships_size:JSON.stringify(p).length,guild_voice_states_size:JSON.stringify(y).length,guild_channels_size:JSON.stringify(m).length,guild_members_size:JSON.stringify(null!=s?s:[]).length,guild_presences_size:JSON.stringify(null!==(i=null==l?void 0:l.guilds)&&void 0!==i?i:[]).length,guild_roles_size:JSON.stringify(g).length,guild_emojis_size:JSON.stringify(A).length,guild_remaining_data_size:JSON.stringify(I).length,num_guilds:u.length,num_guild_channels:C,num_guild_category_channels:O,num_guilds_with_metadata_omitted:N,num_guilds_with_channels_omitted:b,num_guilds_with_roles_omitted:M}),{duration_ms_since_identify_start:P-this.identifyStartTime,duration_ms_since_connection_start:P-this.connectionStartTime,duration_ms_since_emit_start:Date.now()-P,is_reconnect:this.hasConnectedOnce,is_fast_connect:this.isFastConnect,did_force_clear_guild_hashes:this.didForceClearGuildHashes,identify_uncompressed_byte_size:this.identifyUncompressedByteSize,identify_compressed_byte_size:this.identifyCompressedByteSize}),{logEventProperties:!0}),this.didForceClearGuildHashes=!1,this.hasConnectedOnce=!0)}else this.queuedDispatches.push({data:e,type:t,compressionAnalytics:n})},l._handleHeartbeatAck=function(e){this.lastHeartbeatAckTime=Date.now(),this.heartbeatAck=!0,null!==this.expeditedHeartbeatTimeout&&(clearTimeout(this.expeditedHeartbeatTimeout),this.expeditedHeartbeatTimeout=null,this.logger.info("Expedited heartbeat succeeded"))},l._handleHeartbeatTimeout=function(){var e=this;this._cleanup((function(e){return e.close(4e3)})),this.connectionState=1;var t=this.gatewayBackoff.fail((function(){return e._discover()}));this.logger.warn("[ACK TIMEOUT] reconnecting in "+(t/1e3).toFixed(2)+" seconds.")},l._handleClose=function(e,t,n){var r=this;if(e=e||!1,this._cleanup(),this.emit("close",{code:t,reason:n}),4004===t)return this.connectionState=0,this.logger.warn("[WS CLOSED] because of authentication failure, resetting."),this._reset(e,t,n);if(this.connectionState=1,this.nextReconnectIsImmediate)this.logger.warn("[WS CLOSED] ("+e.toString()+", "+t+", "+n+") retrying immediately."),this._discover();else{var a=this.gatewayBackoff.fail((function(){return r._discover()}));this.logger.warn("[WS CLOSED] ("+e.toString()+", "+t+", "+n+") retrying in "+(a/1e3).toFixed(2)+" seconds."),this.gatewayBackoff.fails>4&&this._reset(e,t,n)}},l._reset=function(e,t,n){this.sessionId=null,this.seq=0,this.logger.warn("[RESET] ("+e.toString()+", "+t+", "+n+")"),this.emit("disconnect",{wasClean:e,code:t,reason:n})},l._startHeartbeater=function(){var e=this;null!==this.initialHeartbeatTimeout&&clearTimeout(this.initialHeartbeatTimeout),null!==this.heartbeater&&(clearInterval(this.heartbeater),this.heartbeater=null);var t=function(){e.heartbeatAck?(e.heartbeatAck=!1,e._sendHeartbeat()):null===e.expeditedHeartbeatTimeout&&e._handleHeartbeatTimeout()};this.initialHeartbeatTimeout=setTimeout((function(){e.initialHeartbeatTimeout=null,e.heartbeatAck=!0,e.heartbeater=setInterval(t,e.heartbeatInterval),t()}),Math.floor(Math.random()*(this.heartbeatInterval||0)))},l._stopHeartbeater=function(){null!==this.heartbeater&&(clearInterval(this.heartbeater),this.heartbeater=null),null!==this.initialHeartbeatTimeout&&(clearTimeout(this.initialHeartbeatTimeout),this.initialHeartbeatTimeout=null),null!==this.expeditedHeartbeatTimeout&&(clearTimeout(this.expeditedHeartbeatTimeout),this.expeditedHeartbeatTimeout=null)},l._clearHelloTimeout=function(){null!=this.helloTimeout&&(clearTimeout(this.helloTimeout),this.helloTimeout=null)},l._cleanup=function(e){o.default.Store.resumeEmittingChanges(),this._stopHeartbeater(),this._clearHelloTimeout();var t=this.webSocket;this.webSocket=null,null!=t&&(t.onopen=b,t.onmessage=b,t.onerror=b,t.onclose=b,e&&e(t)),this.gatewayBackoff.cancel(),this.compressionHandler.close(),this.compressionHandler=new m.default(N)},l._getConnectionPath=function(e){return e._trace?e._trace.join(" -> "):"???"},l._doResume=function(){this.connectionState=4,this.replayedEvents=0,this.logger.info("[RESUME] resuming session "+(this.sessionId||"")+", seq: "+this.seq),this.send(6,{token:this.token,session_id:this.sessionId,seq:this.seq},!1)},l._doIdentify=function(){this.seq=0,this.sessionId=null;var e=this.handleIdentify();if(null!==e){this.connectionState=3,this.identifyStartTime=Date.now();var t=e.token,n=e.properties,r=void 0===n?{}:n,i=e.presence;this.token=t,this.logger.info("[IDENTIFY]");var o={token:t,capabilities:y.default,properties:r,presence:i,compress:this.compressionHandler.usesLegacyCompression(),client_state:p.default.clientState},u=JSON.stringify(o);this.identifyUncompressedByteSize=u.length,this.identifyCompressedByteSize=a.deflate(u).length,this.send(2,o,!1)}else this._handleClose(!0,4004,"No connection info provided")},l._doFastConnectIdentify=function(){this.seq=0,this.sessionId=null;var e=this.handleIdentify();if(null!==e){var t=e.token;this.token=t,this.connectionState=3,this.identifyStartTime=Date.now(),this.logger.info("[IDENTIFY, fast-connect]"),this._updateLastHeartbeatAckTime()}else this._handleClose(!0,4004,"No connection info provided")},l._doResumeOrIdentify=function(){var e=Date.now();null!==this.sessionId&&(null==this.lastHeartbeatAckTime||e-this.lastHeartbeatAckTime<=18e4)?this._doResume():this._doIdentify(),this._updateLastHeartbeatAckTime()},l._updateLastHeartbeatAckTime=function(){this.lastHeartbeatAckTime=Date.now()},l._sendHeartbeat=function(){this.send(1,this.seq,!1)},l.isDisconnected=function(){return 0===this.connectionState},l.connect=function(){return this.logger.info("Connected, current state is "+this.connectionState),0!==this.connectionState?(this.logger.error("Cannot start a new connection, connection state is not disconnected"),!1):(this.connectionState=1,this._discover(),!0)},l.resetSocketOnError=function(){var e=this;this.close(),this.connectionState=1,this.dispatchExceptionBackoff.fail((function(){return e._discover()})),this.didForceClearGuildHashes=!0,s.default.dispatch({type:T.ActionTypes.CLEAR_GUILD_HASHES}),clearTimeout(this.dispatchSuccessTimer),this.dispatchSuccessTimer=setTimeout((function(){return e.dispatchExceptionBackoff.succeed()}),12e4)},l.close=function(){var t=this;this.logger.info("Closing connection, current state is "+this.connectionState),this._cleanup((function(e){return e.close()})),this.connectionState=0,e((function(){t._reset(!0,1e3,"Disconnect requested by user")}))},l.expeditedHeartbeat=function(e,t,n){var r=this;void 0===t&&(t=""),void 0===n&&(n=!0),this.webSocket?(this.logger.info("Performing an expedited heartbeat "+(t?"reason: "+t:"")),this.heartbeatAck=!1,this._sendHeartbeat(),null!==this.expeditedHeartbeatTimeout&&clearTimeout(this.expeditedHeartbeatTimeout),this.expeditedHeartbeatTimeout=setTimeout((function(){r.expeditedHeartbeatTimeout=null,!1===r.heartbeatAck&&r._handleHeartbeatTimeout()}),e)):n?this.resetBackoff(t):this.logger.info("Expedited heartbeat requested, but is disconnected and a reset was not requested "+(t?"reason: "+t:""))},l.resetBackoff=function(e){void 0===e&&(e=""),this.logger.info("Connection backoff reset "+(e?"for reason: "+e:"")),this.gatewayBackoff.succeed(),this.nextReconnectIsImmediate=!0,1===this.connectionState&&this._discover()},l.isSessionEstablished=function(){return 5===this.connectionState},l.presenceUpdate=function(e,t,n,r){this.send(3,{status:e,since:t,activities:n,afk:r})},l.voiceStateUpdate=function(e,t,n,r,a,i){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===i&&(i=null);var o={guild_id:e,channel_id:t,self_mute:n,self_deaf:r,self_video:a};null!=i&&null!=t&&(o.preferred_region=i),this.send(4,o)},l.voiceServerPing=function(){this.send(5,null)},l.requestGuildMembers=function(e,t){var n=t.query,r=t.limit,a=t.userIds,i=t.presences;this.send(8,{guild_id:e,query:n,limit:r,user_ids:a,presences:i})},l.updateGuildSubscriptions=function(e,t){this.send(14,S({guild_id:e},t))},l.callConnect=function(e){this.send(13,{channel_id:e})},l.lobbyConnect=function(e,t){this.send(15,{lobby_id:e,lobby_secret:t})},l.lobbyDisconnect=function(e){this.send(16,{lobby_id:e})},l.lobbyVoiceStatesUpdate=function(e){this.send(17,e.map((function(e){return{lobby_id:e.lobbyId,self_mute:e.selfMute,self_deaf:e.selfDeaf}})))},l.streamCreate=function(e,t,n,r){void 0===r&&(r=null),this.send(18,{type:e,guild_id:t,channel_id:n,preferred_region:r})},l.streamWatch=function(e){this.send(20,{stream_key:e})},l.streamPing=function(e){this.send(21,{stream_key:e})},l.streamDelete=function(e){this.send(19,{stream_key:e})},l.streamSetPaused=function(e,t){this.send(22,{stream_key:e,paused:t})},l.queryApplicationCommands=function(e,t,n,r,a,i,o){void 0===r&&(r=null),void 0===a&&(a=null),void 0===i&&(i=null),void 0===o&&(o=null);var u={guild_id:e,applications:t,nonce:n};null!=i&&(u.offset=i),null!=o&&(u.limit=o),null!=r&&(u.application_id=r),null!=a&&(u.query=a),this.send(24,u)},u}(r.default);t.default=R}).call(this,n(54).setImmediate)},4869:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STORAGE_GATEWAY_URL=void 0;t.STORAGE_GATEWAY_URL="gatewayURL"},4870:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(5)),a=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var o=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.hasCache=function(){return!0},a.cacheFullyLoaded=function(){return!0},r}(r.default.Store))(a.default);t.default=o},4871:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(5)),a=l(n(3)),i=l(n(112)),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(4872));n(1);function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=Date.now(),p="0",h={},_=0,E=-1,v=null;function y(e){null!=e&&1===i.default.compare(e,p)&&(p=e)}function m(e,t){return null==t||1!==t.version?g(e):void(h[e]=[t.metadata.hash,t.channels.hash,t.roles.hash])}function g(e){delete h[e]}function T(e){var t=e.guildHashes,n=e.channel.guild_id;null!=n&&m(n,t)}function A(e){m(e.guildId,e.guildHashes)}function I(){p="0",h={},_=0,E=-1}var S=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,i,u,l=r.prototype;return l.persist=function(){f+3e4<Date.now()&&(null==v&&(v=Date.now()),o.persist({highestLastMessageId:p,knownGuildHashes:h,readStateVersion:_,userGuildSettingsVersion:E,version:"stable-3",cacheCreationDate:v}))},l.clear=function(){I()},a=r,(i=[{key:"clientState",get:function(){return{guild_hashes:h,highest_last_message_id:p,read_state_version:_,user_guild_settings_version:E}}}])&&s(a.prototype,i),u&&s(a,u),r}(r.default.Store))(a.default,{CONNECTION_OPEN:function(e){var t=e.channels,n=e.guilds,r=e.readState,a=e.userGuildSettings;h={},_=r.version,E=a.version;for(var i,o=c(n);!(i=o()).done;){var u=i.value;m(u.id,u.guild_hashes)}for(var l,s=c(t);!(l=s()).done;){y(l.value.lastMessageId)}},MESSAGE_CREATE:function(e){var t=e.message.id,n=e.isPushNotification,r=e.optimistic;n||r||y(t)},GUILD_DELETE:function(e){g(e.guild.id)},GUILD_CREATE:function(e){var t=e.guild;m(t.id,t.guild_hashes),t.unavailable&&g(t.id)},GUILD_UPDATE:function(e){var t=e.guild,n=e.guildHashes;m(t.id,n),t.unavailable&&g(t.id)},GUILD_ROLE_CREATE:A,GUILD_ROLE_UPDATE:A,GUILD_ROLE_DELETE:A,GUILD_EMOJIS_UPDATE:A,CHANNEL_CREATE:T,CHANNEL_UPDATE:T,CHANNEL_DELETE:T,CLEAR_GUILD_HASHES:function(e){return I()},LOGOUT:function(e){return I()},LOGIN:function(e){return I()},MESSAGE_ACK:function(e){var t=e.version;null!=t&&(_=t)},CHANNEL_PINS_ACK:function(e){var t=e.version;null!=t&&(_=t)},USER_GUILD_SETTINGS_FULL_UPDATE:function(e){for(var t,n=c(e.userGuildSettings);!(t=n()).done;){var r=t.value;null!=r.version&&r.version>E&&(E=r.version)}}});t.default=S;var O=o.initialState;null!=O&&"stable-3"===O.version&&null!=O.cacheCreationDate&&O.cacheCreationDate+2592e6>Date.now()&&(h=O.knownGuildHashes,p=O.highestLastMessageId,v=O.cacheCreationDate)},4872:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.persist=function(e){},t.initialState=void 0;t.initialState=null},4873:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=61},4874:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(7)),a=i(n(25));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var u={}.NativeModules,l=[],s=function(){function e(e){this._onDataReady=null,this._gatewayEncoding=e}e.canUse=function(){return!1};var t=e.prototype;return t.bindWebSocket=function(e){},t.feed=function(e){},t.dataReady=function(e){this._onDataReady=e},e}();l.push(function(e){o(r,e),r.canUse=function(){return void 0!==window.Uint8Array};var t=r.prototype;function r(t){var r;(r=e.call(this,t)||this)._pako=n(816);var a=r._pako;return(r._inflate=new a.Inflate({chunkSize:65536,to:r._gatewayEncoding.wantsString()?"string":""})).onEnd=r.handleFlushEnd.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r}return t.getAlgorithm=function(){return"zlib-stream"},t.usesLegacyCompression=function(){return!1},t.feed=function(e){var t=this._pako,n=this._inflate;if(null==n)throw new Error("Trying to feed to closed compression adapter");if(null===this._onDataReady)throw new Error("Cannot feed unless a data ready callback is registered.");if(!(e instanceof ArrayBuffer))throw new Error("Expected array buffer, but got "+typeof e);var r=new DataView(e),a=r.byteLength>=4&&65535===r.getUint32(r.byteLength-4,!1);n.push(e,!!a&&t.Z_SYNC_FLUSH)},t.close=function(){null!=this._inflate&&(this._inflate.onEnd=null,this._inflate.chunks=[]),this._inflate=null},t.handleFlushEnd=function(e){var t=this._pako,n=this._inflate;if(null!=n){if(e!==t.Z_OK)throw new Error("zlib error, "+e+", "+n.strm.msg);var r,i=n.chunks,o=i.length;if(this._gatewayEncoding.wantsString())r=o>1?i.join(""):i[0];else if(o>1){for(var u=0,l=0;l<o;l++)u+=i[l].length;for(var s=new Uint8Array(u),c=0,d=0;d<o;d++){var f=i[d];s.set(f,c),c+=f.length}r=s}else r=i[0];i.length=0,null!=this._onDataReady&&this._onDataReady(r)}else new a.default("GatewayCompressionHandler").error("flush end happened on closed compression adapter")},r}(s)),l.push(function(e){function t(){for(var t,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this)._pako=n(816),t}o(t,e),t.canUse=function(){return!0};var r=t.prototype;return r.getAlgorithm=function(){return null},r.usesLegacyCompression=function(){return!0},r.feed=function(e){var t=this._pako;if(e instanceof ArrayBuffer&&this._gatewayEncoding.wantsString()&&(e=t.inflate(e,{to:"string"})),null==this._onDataReady)throw new Error("Cannot feed unless a data ready callback is registered.");this._onDataReady(e)},r.close=function(){},t}(s)),l.push(function(e){function t(t){var n;return(n=e.call(this,t)||this)._socketId=null,n}o(t,e),t.canUse=function(){return!1};var n=t.prototype;return n.bindWebSocket=function(e){this.close(),this._socketId=e._socketId,u.DCDCompressionManager.enableZlibStreamSupport(this._socketId)},n.getAlgorithm=function(){return"zlib-stream"},n.usesLegacyCompression=function(){return!1},n.feed=function(e){if(null==this._onDataReady)throw new Error("Cannot feed unless a data ready callback is registered.");null!==e&&this._onDataReady(e)},n.close=function(){var e=this._socketId;this._socketId=null,null!==e&&u.DCDCompressionManager.disableZlibStreamSupport(e)},t}(s)),l.push(function(e){function t(){return e.apply(this,arguments)||this}o(t,e),t.canUse=function(){return!0};var n=t.prototype;return n.getAlgorithm=function(){return null},n.usesLegacyCompression=function(){return!1},n.feed=function(e){if(null==this._onDataReady)throw new Error("Cannot feed unless a data ready callback is registered.");this._onDataReady(e)},n.close=function(){},t}(s));var c=r.default.find(l,(function(e){return e.canUse()}));t.default=c},4875:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,n(4876).getErlpackEncoding)(),a=void 0!==r?r:function(){function e(){}var t=e.prototype;return t.pack=function(e){return JSON.stringify(e)},t.unpack=function(e){if("string"!=typeof e)throw new Error("Expected a string to be passed to JSONEncoding.unpack");return JSON.parse(e)},t.getName=function(){return"json"},t.wantsString=function(){return!0},e}();t.default=a},4876:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErlpackEncoding=function(){if(a.default.embedded){var e;try{e=i.default.requireModule("discord_erlpack")}catch(t){try{e=i.default.requireModule("erlpack")}catch(e){}}if(null!=e)return function(){function t(){}t.canUse=function(){return null!=e};var n=t.prototype;return n.pack=function(t){return e.pack(t).buffer},n.unpack=function(t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));try{return e.unpack(t)}catch(e){throw new r.default("GatewayEncodingErlpackEncoding").error("Error unpacking",{erlpackUnpackError:e,erlpackDataPreview:null!=t?Array.from(t.slice(0,32)):null,erlpackDataLength:null!=t?t.length:null}),e}},n.getName=function(){return"etf"},n.wantsString=function(){return!1},t}()}return};var r=o(n(25)),a=o(n(14)),i=o(n(45));function o(e){return e&&e.__esModule?e:{default:e}}},4877:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=(r=n(156))&&r.__esModule?r:{default:r};function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=function(){function e(){this.dirty=!1,this.state=this.getInitialState()}var t=e.prototype;return t.shouldCommit=function(){return!0},t.setState=function(e){this.state=i({},this.state,{},e)},t.getState=function(){return this.state},t.reset=function(){this.dirty=!1,this.state=this.getInitialState()},t.update=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!1);var n=this.getNextState(i({},this.state,{},e));if(t)this.dirty=!(0,a.default)(n,this.getInitialState());else for(var r=0,o=Object.keys(n);r<o.length;r++){var u=o[r];this.dirty=this.dirty||!(0,a.default)(this.state[u],n[u])}return this.state=n,!(!this.dirty||!this.shouldCommit())&&(this.dirty=!1,this.didCommit(this.state),!0)},t.forceUpdate=function(){this.dirty=!1,this.didCommit(this.state)},e}();t.default=o},4878:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r,a=[];return function i(){for(var o=arguments.length,u=new Array(o),l=0;l<o;l++)u[l]=arguments[l];var s=Date.now();for(null!=r&&(clearTimeout(r),r=null);a.length>0&&a[0]<=s;)a.shift();a.length<e?(a.push(s+t),n.apply(void 0,u)):r=setTimeout((function(){return i.apply(void 0,u)}),a[0]-s)}}},4879:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hydrateReadySupplementalPayload=function(e){var t=e.guilds,n=e.merged_members,r=e.merged_presences,a=E(e,["guilds","merged_members","merged_presences"]),i=y(v,null==r?void 0:r.friends),o=(t||[]).map((function(e,t){var a=y(v,null==r?null:r.guilds[t]),i=y(v,null==n?null:n[t]);return _({},e,{unavailable:void 0===e.voice_states,presences:a,members:i})}));return v={},_({},a,{presences:i,guilds:o})},t.hydrateReadyPayloadPrioritized=function(e){var t=e.users,n=e.relationships,d=e.private_channels,f=e.merged_members,h=e.guilds,T=E(e,["users","relationships","private_channels","merged_members","guilds"]);return function(){m={};for(var e,t=a.default.values(l.default.getGuilds()),n=a.default.groupBy(a.default.values(o.default.getGuildChannels()),(function(e){return e.guild_id})),r=p(t);!(e=r()).done;){var d=e.value,f=(n[d.id]||[]).map((function(e){var t=s.default.lastPinTimestamp(e.id);return _({},i.default.toServer(e),{last_message_id:s.default.lastMessageId(e.id)||e.lastMessageId,last_pin_timestamp:t?new Date(t).toISOString():e.lastPinTimestamp})}));m[d.id]={guild:c.toServer(d,[],u.default.getGuildEmoji(d.id)),channels:f}}}(),v=a.default.keyBy(t,(function(e){return e.id})),n=y(v,n||[]),d=(d||[]).map((function(e){var t=e.recipient_ids,n=E(e,["recipient_ids"]);return null!=t?_({},n,{recipients:t.map((function(e){return(0,r.default)(null!=v[e],"Missing user in compressed ready payload"),v[e]}))}):n})),h=(h||[]).map((function(e,t){return!0===e.unavailable?_({},e):g(_({},e,{members:y(v,null==f?null:f[t]),voice_states:[]}))})),_({},T,{users:t,presences:[],relationships:n,guilds:h,private_channels:d})},t.hydrateGuild=g;var r=f(n(18)),a=f(n(7)),i=f(n(86)),o=f(n(29)),u=f(n(331)),l=f(n(34)),s=f(n(830)),c=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(822));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function f(e){return e&&e.__esModule?e:{default:e}}function p(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var v={};function y(e,t){for(var n,a=[],i=p(t||[]);!(n=i()).done;){var o=n.value;if(null!=o){var u=o.user_id,l=E(o,["user_id"]);null!=u?((0,r.default)(null!=e[u],"Missing user["+u+"] in compressed ready payload"),a.push(_({},l,{user:e[u]}))):a.push(l)}}return a}var m={};function g(e){var t,n,r,i,o,u,l=function(e){var t=m[e];return delete m[e],t}(e.id),s=null===(t=e.guild_hashes)||void 0===t||null===(n=t.metadata)||void 0===n?void 0:n.omitted,c=null===(r=e.guild_hashes)||void 0===r||null===(i=r.channels)||void 0===i?void 0:i.omitted,d=null===(o=e.guild_hashes)||void 0===o||null===(u=o.roles)||void 0===u?void 0:u.omitted;if(!s&&!c&&!d)return _({},e);if(null==l)throw Error("Guild data was missing from store, but hash was still available.");var f=e.channel_updates,p=a.default.keyBy(f,"id"),h=c?l.channels.map((function(e){var t,n;return _({},e,{last_message_id:(null===(t=p[e.id])||void 0===t?void 0:t.last_message_id)||e.last_message_id,last_pin_timestamp:(null===(n=p[e.id])||void 0===n?void 0:n.last_pin_timestamp)||e.last_pin_timestamp})})):e.channels;return _({},l.guild,{},e,{channels:h})}},4880:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StreamRTCAnalyticsContext=t.ConservativeLinkEstimateExperiment=void 0;var r=n(44),a=E(n(3)),i=E(n(819)),o=n(284),u=E(n(20)),l=E(n(34)),s=E(n(56)),c=E(n(823)),d=E(n(16)),f=E(n(4881)),p=n(200),h=E(n(4882)),_=n(1);function E(e){return e&&e.__esModule?e:{default:e}}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=(0,o.registerUserExperiment)({id:o.Experiments.BWE_CONSERVATIVE_LINK_ESTIMATE,title:"BWE: Conservative Link Estimate",description:["Control: standard BWE","Treatment 1: Conservative link estimate","Treatment 2: Conservative link estimate + remote locus BWE"],buckets:[o.ExperimentBuckets.CONTROL,o.ExperimentBuckets.TREATMENT_1,o.ExperimentBuckets.TREATMENT_2]});t.ConservativeLinkEstimateExperiment=m;var g=function(){function e(e){var t=e.streamRegion,n=e.streamApplication,r=e.actionContext,a=e.numViewers;this.streamRegion=t,this.streamApplication=n,this.actionContext=r,this.maxViewers=a}var t=e.prototype;return t.setActionContext=function(e){this.actionContext=e},t.trackViewerCount=function(e){this.maxViewers=Math.max(e,this.maxViewers)},e}();t.StreamRTCAnalyticsContext=g;var T=function(e){var t,n;function i(t,n,a,i,o,l,s){var c,d=(0,p.decodeStreamKey)(n),h=d.guildId,_=d.channelId;return(c=e.call(this,u.default.getId(),t,h,_,r.MediaEngineContextTypes.STREAM,a,s)||this)._streamContext=d,c._streamKey=n,c._isStreamer=l,c._videoStreamStats=new f.default(i,c.isOwner),c.analyticsContext=o,c._videoStreamStats.start(),c._initializeEvents(),c}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var E,m,g,T=i.prototype;return T.destroy=function(t){this._videoStreamStats.stop(),this._trackVideoEndStats(t),this._updateVideoStreamId(null,null),e.prototype.destroy.call(this)},T.streamUpdate=function(e){var t=this._videoQuality;null!=t&&(e?t.pause():t.resume())},T.layoutChange=function(e){this._videoStreamStats.layoutChange(e)},T._initializeEvents=function(){var e=this,t=!1;this.on("state",(function(t,n,r){a.default.wait((function(){return a.default.dispatch(v({type:_.ActionTypes.RTC_CONNECTION_STATE,state:t,hostname:n},r,{streamKey:e._streamKey}))}))})),this.on("video",(function(n,r,a,i,o){var u=(0,p.decodeStreamKey)(e._streamKey);u.guildId===n&&u.channelId===r&&u.ownerId===a&&(null==e.getMediaSessionId()||t||(e._trackVideoStartStats(),t=!0),e._updateVideoStreamId(i,o))}))},T._updateVideoStreamId=function(e,t){var n=(0,p.decodeStreamKey)(this._streamKey),i=n.guildId,o=n.channelId,u=n.ownerId;a.default.wait((function(){return a.default.dispatch({type:_.ActionTypes.RTC_CONNECTION_VIDEO,guildId:i,channelId:o,userId:u,streamId:e,rtcServerId:t,context:r.MediaEngineContextTypes.STREAM,quality:_.RTCReceivedVideoQuality.OFF})}))},T._getStreamAnalyticsProperties=function(){var e=this.analyticsContext,t=e.streamRegion,n=e.streamApplication,a=e.actionContext,i=this._streamContext,o=i.ownerId,u=i.guildId,s=l.default.getGuild(u);return{channel_id:this.channelId,rtc_connection_id:this.getRTCConnectionId(),media_session_id:this.getMediaSessionId(),parent_media_session_id:this.parentMediaSessionId,sender_user_id:o,context:r.MediaEngineContextTypes.STREAM,guild_id:u,stream_region:t,guild_region:null!=s?s.region:null,participant_type:this.isOwner?"streamer":"receiver",share_application_name:null!=n?n.name:null,share_application_id:null!=n?n.id:null,share_application_executable:null!=n?n.exe:null,video_layout:this._videoStreamStats.getLayout(),client_event_source:a}},T._trackVideoStartStats=function(){var e=this.isOwner?(0,h.default)():null;d.default.track(_.AnalyticEvents.VIDEO_STREAM_STARTED,v({},this._getStreamAnalyticsProperties(),{},e,{connection_type:c.default.getType(),effective_connection_speed:c.default.getEffectiveConnectionSpeed(),service_provider:c.default.getServiceProvider()}))},T._trackVideoEndStats=function(e){var t=this._streamContext.ownerId,n=null,r=null,a=this._videoQuality;null!=a&&(n=this.isOwner?a.getOutboundStats():a.getInboundStats(t),r=a.getNetworkStats());d.default.track(_.AnalyticEvents.VIDEO_STREAM_ENDED,v({},n,{},r,{},null,{},this._videoStreamStats.getStats(),{},this._soundshareStats.getStats(),{},this._getStreamAnalyticsProperties(),{reason:e,max_viewers:this.analyticsContext.maxViewers}))},T._chooseExperiments=function(t){e.prototype._chooseExperiments.call(this,t);var n=o.ExperimentStore.getUserExperimentDescriptor(o.Experiments.BWE_CONSERVATIVE_LINK_ESTIMATE);n&&t.includes(_.RTCVoiceExperiments.BWE_CONSERVATIVE_LINK_ESTIMATE)&&t.includes(_.RTCVoiceExperiments.BWE_REMOTE_LOCUS_CLIENT)&&this._isStreamer&&s.default.supports(r.Features.REMOTE_LOCUS_NETWORK_CONTROL)&&((0,o.triggerExperiment)(o.Experiments.BWE_CONSERVATIVE_LINK_ESTIMATE,n),n.bucket===o.ExperimentBuckets.TREATMENT_1?this._selectedExperiments.push(_.RTCVoiceExperiments.BWE_CONSERVATIVE_LINK_ESTIMATE):n.bucket===o.ExperimentBuckets.TREATMENT_2&&(this._selectedExperiments.push(_.RTCVoiceExperiments.BWE_CONSERVATIVE_LINK_ESTIMATE),this._selectedExperiments.push(_.RTCVoiceExperiments.BWE_REMOTE_LOCUS_CLIENT)))},T._getExtraConnectionOptions=function(){return{streamUserId:(0,p.decodeStreamKey)(this._streamKey).ownerId}},E=i,(m=[{key:"isOwner",get:function(){var e=this._streamContext.ownerId;return u.default.getId()===e}}])&&y(E.prototype,m),g&&y(E,g),i}(i.default);t.default=T},4881:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=n(204),i=n(70),o=(r=n(1396))&&r.__esModule?r:{default:r},u=n(1);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){return void 0===t&&(t=0),null!=e?Math.round(e):t}var c=function(){function e(e,t){var n=this;this._targetResolution=0,this._targetFPS=0,this._streamSettingsChanged=!1,this._layoutChanges=0,this._incrementLayout=function(e,t){null==n._layoutBuckets[e]&&(n._layoutBuckets[e]=0),n._layoutBuckets[e]+=t},this._sampleStats=function(){var e=o.default.getState(),t=e.resolution,r=e.fps;n._streamSettingsChanged=t!==n._targetResolution||r!==n._targetFPS},this._isSender=t,this._statInterval=new i.Interval,this._lastLayout=e,this._layoutBuckets={}}var t=e.prototype;return t.start=function(){var e=o.default.getState(),t=e.resolution,n=e.fps;this._targetResolution=t,this._targetFPS=n,this._statInterval.start(1e3,this._sampleStats),this._lastLayoutChanged=(0,a.now)()},t.stop=function(){this._statInterval.stop(),this._streamEnd=(0,a.now)(),this._incrementLayout(this._lastLayout,(this._streamEnd-this._lastLayoutChanged)/1e3)},t.layoutChange=function(e){if(e!==this._lastLayout&&null==this._streamEnd){var t=(0,a.now)();this._incrementLayout(this._lastLayout,(t-this._lastLayoutChanged)/1e3),this._layoutChanges++,this._lastLayout=e,this._lastLayoutChanged=t}},t.getLayout=function(){return this._lastLayout},t.getStats=function(){var e={num_layout_changes:this._layoutChanges,duration_layout_fullscreen:s(this._layoutBuckets[u.StreamLayouts.FULL_SCREEN]),duration_layout_theatre:s(this._layoutBuckets[u.StreamLayouts.THEATRE]),duration_layout_pip:s(this._layoutBuckets[u.StreamLayouts.PIP]),duration_layout_popout:s(this._layoutBuckets[u.StreamLayouts.POPOUT]),duration_layout_portrait:s(this._layoutBuckets[u.StreamLayouts.PORTRAIT]),duration_layout_landscape:s(this._layoutBuckets[u.StreamLayouts.LANDSCAPE]),duration_layout_minimized:s(this._layoutBuckets[u.StreamLayouts.MINIMIZED])};return this._isSender?l({},e,{target_fps:this._targetFPS,target_resolution_height:this._targetResolution,stream_settings_changed:this._streamSettingsChanged}):e},e}();t.default=c},4882:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(1400).getDesktopSourceMetadata;t.default=r},4883:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(113)),a=u(n(274)),i=u(n(331)),o=u(n(297));function u(e){return e&&e.__esModule?e:{default:e}}var l={s:{match:r.default.inlineRegex(/^~~([\s\S]+?)~~(?!_)/)},highlight:{order:r.default.defaultRules.text.order,match:function(){return null}},emoji:{order:r.default.defaultRules.text.order,match:function(e){var t=a.default.EMOJI_NAME_AND_DIVERSITY_RE.exec(e);if(null!=t&&""!==a.default.convertNameToSurrogate(t[1]))return t},parse:function(e){var t=e[0],n=e[1],r=a.default.convertNameToSurrogate(n);return r?{name:":"+n+":",surrogate:r,src:o.default.getURL(r)}:{type:"text",content:t}}},customEmoji:{order:r.default.defaultRules.codeBlock.order,match:function(e){return/^<(a)?:(\w+):(\d+)>/.exec(e)},parse:function(e,t,n){e[0];var r=e[1],a=e[2],o=e[3],u=n.guildId,l=i.default.getDisambiguatedEmojiContext(u).getById(o),s=!l||l.require_colons;return l&&(a=l.name),{emojiId:o,name:s?":"+a+":":a,animated:"a"===r}}},text:{parse:function(e){var t=a.default.findInlineEmojisFromSurrogates(e[0]),n=0;return t.map((function(e){if("text"===e.type){var t={index:n,0:e.text};return n+=e.text.length,{type:"text",content:e.text,originalMatch:t}}var r={index:n,0:e.surrogate};return n+=e.surrogate.length,{type:"emoji",name:e.emojiName,surrogate:e.surrogate,src:o.default.getURL(e.surrogate),originalMatch:r}}))}}};t.default=l},4885:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=V(n(0)),i=n(1414),o=n(221),u=F(n(5)),l=F(n(3)),s=F(n(282)),c=V(n(5076)),d=F(n(5052)),f=F(n(1385)),p=F(n(8004)),h=F(n(20)),_=F(n(286)),E=F(n(7304)),v=F(n(1391)),y=F(n(16)),m=n(858),g=F(n(143)),T=F(n(10501)),A=n(864),I=n(334),S=F(n(5302)),O=F(n(5303)),C=F(n(10502)),N=F(n(10505)),b=F(n(10507)),M=F(n(10508)),P=F(n(10509)),R=F(n(10513)),L=F(n(10515)),D=F(n(1452)),w=F(n(5310)),U=F(n(7533)),k=F(n(10517)),G=F(n(10518)),j=n(1);function F(e){return e&&e.__esModule?e:{default:e}}function x(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return x=function(){return e},e}function V(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=x();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function B(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n(8231),u.default.initialize();var W=(0,S.default)(D.default),Y=(0,S.default)(w.default),K=(0,S.default)(R.default),z=(0,S.default)(M.default),q=(0,S.default)(b.default),X=(0,S.default)(L.default),Z=(0,S.default)(U.default),$=(0,S.default)(C.default),Q=(0,S.default)(G.default),J=(0,S.default)(k.default),ee=(0,S.default)(N.default),te=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={splash:null,redirectTo:null},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.getDerivedStateFromProps=function(e){var t=e.invite,n=e.location,r=(0,i.parse)(n.search).redirect_to||null;null!=r&&(0,A.isSafeRedirect)(r)&&!r.startsWith(j.Routes.ME)||(r=null);var a=null;if(null==t)a=(0,m.getArtForPath)(r);else if(null!=t&&t.state===j.InviteStates.RESOLVED){var o=t.guild;null!=o&&"string"==typeof o.splash&&(a=g.default.getGuildSplashURL({id:o.id,splash:o.splash}))}return{redirectTo:r,splash:a}};var u=r.prototype;return u.componentDidMount=function(){var e=this.props,t=e.inviteCode,n=e.hasLoadedExperiments,r=e.isAuthenticated,a=e.isGuestAuthenticated;null!=t&&(n||!r&&!a||s.default.getExperiments(),y.default.track(j.AnalyticEvents.INVITE_OPENED,{invite_code:t,load_time:T.default.getTimeSinceNavigationStart()},{flush:!0})),n&&this.resolveInvite(),this.resolveGiftCode(),this.resolveGuildTemplate()},u.componentDidUpdate=function(e){!e.hasLoadedExperiments&&this.props.hasLoadedExperiments&&this.resolveInvite()},u.resolveInvite=function(){var e=this.props.inviteCode;null!=e&&(d.default.resolveInvite(e,j.PageAnalyticsLocations.INVITE),d.default.openNativeAppModal(e))},u.resolveGuildTemplate=function(){var e=this.props.guildTemplateCode;null!=e&&(y.default.track(j.AnalyticEvents.GUILD_TEMPLATE_OPENED,{guild_template_code:e,load_time:T.default.getTimeSinceNavigationStart()},{flush:!0}),p.default.resolveGuildTemplate(e),p.default.openNativeAppModal(e))},u.resolveGiftCode=function(){var e=this.props.giftCode;null!=e&&(c.resolveGiftCode(e,!0,!0),l.default.wait((function(){return c.openNativeGiftCodeModal(e)})))},u.render=function(){var e=this.state,t=e.splash,n=e.redirectTo;return B(O.default,{splash:t,redirectTo:n},void 0,B(o.Route,{path:j.Routes.LOGIN_HANDOFF,render:function(e){return a.createElement(Y,H({},e,{redirectTo:n}))}}),B(o.Route,{path:j.Routes.LOGIN,render:function(e){return a.createElement(W,H({},e,{redirectTo:n}))}}),B(o.Route,{path:j.Routes.REGISTER,render:function(e){return a.createElement(Z,H({},e,{redirectTo:n}))}}),B(o.Route,{path:j.Routes.GIFT_CODE_LOGIN(":giftCode"),render:function(e){return a.createElement(q,H({login:!0},e))}}),B(o.Route,{path:j.Routes.GIFT_CODE(":giftCode"),render:function(e){return a.createElement(q,e)}}),B(o.Route,{path:[j.Routes.INVITE_LOGIN(":inviteCode"),j.Routes.INVITE(":inviteCode")],render:function(e){var t=e.match,n=t.params.inviteCode,r=t.path,a=e.location,i=e.transitionTo;return I.isMobile||I.isTablet?B(X,{inviteCode:n},n):B(K,{inviteCode:n,location:a,transitionTo:i,login:r===j.Routes.INVITE_LOGIN(":inviteCode")})}}),B(o.Route,{path:[j.Routes.GUILD_TEMPLATE_LOGIN(":guildTemplateCode"),j.Routes.GUILD_TEMPLATE(":guildTemplateCode")],render:function(e){var t=e.match,n=t.params.guildTemplateCode,r=t.path,a=e.location,i=e.transitionTo;return I.isMobile||I.isTablet?B(P.default,{code:n},n):B(z,{code:n,location:a,transitionTo:i,login:r===j.Routes.GUILD_TEMPLATE_LOGIN(":guildTemplateCode")})}}),B(o.Route,{path:j.Routes.VERIFY,render:function(e){return a.createElement(Q,e)}}),B(o.Route,{path:j.Routes.DISABLE_EMAIL_NOTIFICATIONS,render:function(e){return a.createElement(ee,e)}}),B(o.Route,{path:j.Routes.AUTHORIZE_IP,render:function(e){return a.createElement($,e)}}),B(o.Route,{path:j.Routes.RESET,render:function(e){return a.createElement(J,e)}}))},r}(a.PureComponent);te.displayName="ViewsWithAuth";var ne=u.default.connectStores([h.default,v.default,E.default,_.default,f.default],(function(e){var t,n,r,a=e.match,i=null==a||null===(t=a.params)||void 0===t?void 0:t.inviteCode,o=null==a||null===(n=a.params)||void 0===n?void 0:n.giftCode,u=null==a||null===(r=a.params)||void 0===r?void 0:r.guildTemplateCode;return{inviteCode:i,isAuthenticated:h.default.isAuthenticated(),isGuestAuthenticated:h.default.isGuest(),giftCode:o,guildTemplateCode:u,gift:null!=o?E.default.get(o):null,invite:null!=i?v.default.getInvite(i):null,guildTemplate:null!=u?f.default.getGuildTemplate(u):null,hasLoadedExperiments:_.default.hasLoadedExperiments}}))(te);t.default=ne},4929:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ScrollerAuto=t.ScrollerThin=void 0;var r=i(n(5095)),a=i(n(335));function i(e){return e&&e.__esModule?e:{default:e}}var o=(0,r.default)(a.default.thin,a.default.fade);t.ScrollerThin=o;var u=(0,r.default)(a.default.auto,a.default.fade);t.ScrollerAuto=u;var l=o;t.default=l},4937:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PHONE_VERIFICATION_MODAL_KEY=t.PHONE_DEFAULT_COUNTRY_CODE_NAME=void 0;t.PHONE_DEFAULT_COUNTRY_CODE_NAME="United States";t.PHONE_VERIFICATION_MODAL_KEY="PHONE_VERIFICATION_MODAL_KEY"},4941:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PopoutPositions",{enumerable:!0,get:function(){return s.Positions}}),Object.defineProperty(t,"PopoutAlign",{enumerable:!0,get:function(){return s.Align}}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=f(n(194)),o=f(n(59)),u=n(855),l=n(97),s=n(333),c=n(157),d=n(1);function f(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(){l.ComponentDispatch.dispatch(d.ComponentActions.POPOUT_SHOW)}function v(){l.ComponentDispatch.dispatch(d.ComponentActions.POPOUT_HIDE)}var y=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).domElementRef=a.createRef(),t.popoutId="popout_"+(0,i.default)(),t.state={shouldShowPopout:!1},t.renderPopout=function(e){return(0,t.props.renderPopout)(_({},e,{closePopout:t.close}))},t.close=function(){var e=t.props,n=e.onRequestClose,r=e.shouldShow;n&&n(),null==r&&t.toggleShow(!1)},t.handleClick=function(e){var n=t.props.onShiftClick;e.shiftKey&&null!=n?n(e):null==t.props.shouldShow&&t.setState((function(e){return{shouldShowPopout:!e.shouldShowPopout}}))},t.handleDocumentClick=function(e){var n=e.target,r=t.domElementRef.current;if(null!=r){if((0,s.referencePortalAwareContains)(r,n))return;if(n.closest("."+u.ContextMenuClassName))return;if(l.ComponentDispatch.hasSubscribers(d.ComponentActions.MODAL_CLOSE))return}t.close()},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var f=r.prototype;return f.shouldShowPopout=function(e,t){return null!=e.shouldShow?e.shouldShow:t.shouldShowPopout},f.componentDidMount=function(){this.shouldShowPopout(this.props,this.state)&&this.setupShowPopout()},f.componentDidUpdate=function(e,t){e.shouldShow,this.props.shouldShow;var n=this.shouldShowPopout(this.props,this.state);this.shouldShowPopout(e,t)!==n&&(n?this.setupShowPopout():this.unsubscribe())},f.setupShowPopout=function(){var e,t,n=o.default.findDOMNode(this);if(null==n||1!==n.nodeType)throw new Error("Popout cannot find DOM node");null===(e=n.ownerDocument)||void 0===e||e.addEventListener("click",this.handleDocumentClick,!0),null===(t=n.ownerDocument)||void 0===t||t.addEventListener("contextmenu",this.handleDocumentClick,!0),l.ComponentDispatch.subscribe(d.ComponentActions.POPOUT_CLOSE,this.close),this.domElementRef.current=n,this.forceUpdate()},f.unsubscribe=function(){var e,t,n=this.domElementRef.current;null!=n&&(null===(e=n.ownerDocument)||void 0===e||e.removeEventListener("click",this.handleDocumentClick,!0),null===(t=n.ownerDocument)||void 0===t||t.removeEventListener("contextmenu",this.handleDocumentClick,!0));l.ComponentDispatch.unsubscribe(d.ComponentActions.POPOUT_CLOSE,this.close)},f.componentWillUnmount=function(){this.unsubscribe(),this.domElementRef.current=null},f.render=function(){var e=this.props.children,t=this.shouldShowPopout(this.props,this.state);return h(a.Fragment,{},void 0,e({onClick:this.handleClick,"aria-controls":this.popoutId,"aria-expanded":t},t),this.renderLayer())},f.renderLayer=function(){if(!this.shouldShowPopout(this.props,this.state))return null;var e=this.props,t=e.position,n=e.align,r=e.nudgeAlignIntoViewport,a=e.spacing,i=e.autoInvert,o=e.fixed,u=e.positionKey;return null==this.domElementRef.current?null:h(c.AppReferencePositionLayer,{onMount:E,onUnmount:v,id:this.popoutId,reference:this.domElementRef,position:t,align:n,nudgeAlignIntoViewport:r,spacing:a,autoInvert:i,fixed:o,positionKey:null!=u?u:void 0},void 0,this.renderPopout)},f.toggleShow=function(e){this.state.shouldShowPopout!==e&&this.setState({shouldShowPopout:e})},r}(a.Component);t.default=y,y.displayName="BasePopout",y.Positions=s.Positions,y.Align=s.Align,y.defaultProps={autoInvert:!1,nudgeAlignIntoViewport:!1,spacing:0}},4947:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=(r=n(3))&&r.__esModule?r:{default:r},i=n(1);var o={openNativeAppModal:function(e,t){var r=this;a.default.dirtyDispatch({type:i.ActionTypes.NATIVE_APP_MODAL_OPENING,code:e}),Promise.resolve().then(n.t.bind(null,1387,7)).then((function(n){var a=n.default;a.request(t,{code:e}).then((function(e){var t=e.code;return r.nativeModalOpened(t)})).catch((function(){return r.nativeModalOpenFailed(e)})).then((function(){return a.disconnect()}))}))},nativeModalOpened:function(e){a.default.dispatch({type:i.ActionTypes.NATIVE_APP_MODAL_OPENED,code:e})},nativeModalOpenFailed:function(e){a.default.dispatch({type:i.ActionTypes.NATIVE_APP_MODAL_OPEN_FAILED,code:e})}};t.default=o},4958:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.shouldShowCountryCodeSelector=function(e,t){if(e===r.PHONE)return!0;if(e===r.EMAIL)return!1;if(t.length<3)return!1;return a.test(t)},t.PhoneOrEmailSelectorForceMode=void 0,t.PhoneOrEmailSelectorForceMode=r,function(e){e[e.PHONE=0]="PHONE",e[e.EMAIL=1]="EMAIL"}(r||(t.PhoneOrEmailSelectorForceMode=r={}));var a=/^[-() \d]+$/},5049:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Positions",{enumerable:!0,get:function(){return l.PopoutPositions}}),Object.defineProperty(t,"Align",{enumerable:!0,get:function(){return l.PopoutAlign}}),Object.defineProperty(t,"RenderPopoutProps",{enumerable:!0,get:function(){return l.RenderPopoutProps}}),t.default=void 0;var r,a,i,o,u=d(n(0)),l=d(n(4941)),s=(r=n(5142))&&r.__esModule?r:{default:r};function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function f(e,t,n,r){i||(i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:i,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}!function(e){e.NONE="1",e.TRANSLATE="2",e.SCALE="3",e.FADE="4"}(o||(o={}));var p=Object.freeze(((a={})[o.TRANSLATE]=s.default.Types.TRANSLATE,a[o.SCALE]=s.default.Types.SCALE,a[o.FADE]=s.default.Types.FADE,a));function h(e){switch(e){case l.PopoutPositions.TOP:case l.PopoutPositions.BOTTOM:return l.PopoutAlign.LEFT;case l.PopoutPositions.LEFT:case l.PopoutPositions.RIGHT:return l.PopoutAlign.TOP}throw new Error("Unexpected position: "+e)}var _=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).renderPopout=function(e){var n=t.props,r=n.renderPopout,a=n.animation;switch(a){case o.TRANSLATE:case o.SCALE:case o.FADE:return f(s.default,{position:e.position,type:p[a]},void 0,r(e));case o.NONE:return r(e)}throw new Error("Unsupported animation config: "+JSON.stringify(a))},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.children,n=e.shouldShow,r=e.position,a=e.onRequestClose,i=e.align,o=e.autoInvert,u=e.fixed,s=e.nudgeAlignIntoViewport,c=e.spacing,d=e.onShiftClick,p=e.positionKey;return f(l.default,{position:r,align:null!=i?i:h(r),autoInvert:o,fixed:u,nudgeAlignIntoViewport:s,renderPopout:this.renderPopout,spacing:c,shouldShow:n,onRequestClose:a,onShiftClick:d,positionKey:p},void 0,t)},r}(u.Component);t.default=_,_.displayName="Popout",_.Positions=l.PopoutPositions,_.Align=l.PopoutAlign,_.Animation=o,_.defaultProps={position:l.PopoutPositions.RIGHT,autoInvert:!0,nudgeAlignIntoViewport:!0,spacing:8,animation:o.TRANSLATE,positionKey:void 0}},5052:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=g(n(46)),a=g(n(149)),i=g(n(15)),o=g(n(3)),u=g(n(4947)),l=g(n(5106)),s=n(219),c=g(n(1467)),d=n(86),f=g(n(29)),p=g(n(98)),h=g(n(69)),_=g(n(5080)),E=g(n(5124)),v=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(838)),y=n(1);function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function g(e){return e&&e.__esModule?e:{default:e}}function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e){var t=e.target_user_type===y.InviteTargetUserTypes.STREAM&&null!=e.target_user?{targetUserType:e.target_user_type,targetUserId:null!=e.target_user?e.target_user.id:void 0}:{};return e.new_member&&null!=e.channel&&(0,d.isGuildTextChannelType)(e.channel.type)&&(t.welcomeModalChannelId=e.channel.id),t}function I(e,t,r,a){void 0===r&&(r=y.ChannelTypes.GUILD_TEXT);var i,o=a||{},u=o.transitionTo,l=o.targetUserId,c=o.targetUserType,d=o.welcomeModalChannelId,f=c===y.InviteTargetUserTypes.STREAM&&null!=l,_=y.Routes.CHANNEL(e,t);r===y.ChannelTypes.GUILD_VOICE&&(_=y.Routes.CHANNEL(e,p.default.getChannelId(e)),E.default.call((function(){return Promise.resolve().then(n.t.bind(null,344,7)).then((function(n){n.default.selectVoiceChannel(t),f&&null!=l&&v.watchStreamAndTransitionToStream({streamType:s.StreamTypes.GUILD,ownerId:l,guildId:e,channelId:t})}))}))),null!=d&&(i={welcomeModalChannelId:d}),null!=u?u(_,i):h.default.transitionTo(_,i)}var S={resolveInvite:function e(t,n,r){return o.default.isDispatching()?Promise.resolve().then((function(){return e(t,n,r)})):(o.default.dispatch({type:y.ActionTypes.INVITE_RESOLVE,code:t}),(0,c.default)(t,n,r).then((function(e){var t=e.invite,n=e.code,r=e.banned;return null!=t?o.default.dispatch({type:y.ActionTypes.INVITE_RESOLVE_SUCCESS,invite:t,code:n}):o.default.dispatch({type:y.ActionTypes.INVITE_RESOLVE_FAILURE,code:n,banned:r}),{invite:t,code:n}})))},getInviteContext:function(e,t){return{location:e,location_guild_id:null!=t.guild?t.guild.id:void 0,location_channel_id:null!=t.channel?t.channel.id:void 0,location_channel_type:null!=t.channel?t.channel.type:void 0}},createInvite:function(e,t,n){return void 0===t&&(t={}),i.default.post({url:y.Endpoints.INSTANT_INVITES(e),body:t,context:{location:n},oldFormErrors:!0}).then((function(t){var n=t.body;return o.default.dispatch({type:y.ActionTypes.INSTANT_INVITE_CREATE_SUCCESS,channelId:e,invite:n}),n}),(function(t){throw o.default.dispatch({type:y.ActionTypes.INSTANT_INVITE_CREATE_FAILURE,channelId:e}),t}))},revokeInvite:function(e){i.default.delete({url:y.Endpoints.INVITE(e),oldFormErrors:!0}).then((function(){o.default.dispatch({type:y.ActionTypes.INSTANT_INVITE_REVOKE_SUCCESS,code:e})}))},acceptInvite:function(e,t,n){return o.default.dirtyDispatch({type:y.ActionTypes.INVITE_ACCEPT,code:e}),i.default.post({url:y.Endpoints.INVITE(e),context:t,oldFormErrors:!0}).then((function(t){return o.default.dispatch({type:y.ActionTypes.INVITE_ACCEPT_SUCCESS,invite:t.body,code:e}),n?n(t.body):o.default.dispatch({type:y.ActionTypes.INVITE_APP_NOT_OPENED,code:e}),t.body}),(function(t){var n,r;throw o.default.dispatch({type:y.ActionTypes.INVITE_ACCEPT_FAILURE,code:e,error:{message:null===(n=t.body)||void 0===n?void 0:n.message,code:null===(r=t.body)||void 0===r?void 0:r.code}}),new Error(t&&t.body&&t.body.message)}))},acceptInviteAndTransitionToInviteChannel:function(e,t){var n=this;return this.acceptInvite(e,t,(function(e){if(null!=e.channel){var t=A(e);n.transitionToInviteChannelSync(e.channel.id,t)}}))},transitionToInviteChannelSync:function(e,t){f.default.addConditionalChangeListener((function(){var n=f.default.getChannel(e);if(null!=n)return I(n.getGuildId()||y.ME,n.id,n.type,t),!1}))},transitionToInvite:function(e,t){var n=e.channel,r=e.guild;if(null!=n){var a=A(e);null!=t&&(a.transitionTo=t),I(null!=r?r.id:y.ME,n.id,n.type,a)}},transitionToInviteSync:function(e,t){if(null!=e.channel){var n=A(e);this.transitionToInviteChannelSync(e.channel.id,T({},n,{transitionTo:t}))}},openNativeAppModal:function(e){u.default.openNativeAppModal(e,y.RPCCommands.INVITE_BROWSER)},openApp:function(e,t,n,i){var u;(o.default.maybeDispatch({type:y.ActionTypes.INVITE_APP_OPENING,code:e}),null!=r.default.ua&&r.default.ua.toLowerCase().indexOf("googlebot")>-1)?o.default.dispatch({type:y.ActionTypes.INVITE_APP_NOT_OPENED,code:e}):("Android"===r.default.os.family||"iOS"===r.default.os.family?u=(0,l.default)("invite",{queryString:a.default.stringify({fingerprint:n,username:i}),inviteCode:e}):("#"===(u=t?y.Routes.INVITE_PROXY(t):"")[0]&&(u=u.slice(1)),u="discord://"+u),_.default.launch(u,(function(t){o.default.dispatch(t?{type:y.ActionTypes.INVITE_APP_OPENED,code:e}:{type:y.ActionTypes.INVITE_APP_NOT_OPENED,code:e})})))}};t.default=S},5067:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SearchIcon=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=p(n(9)),o=p(n(72)),u=p(n(116)),l=p(n(210)),s=p(n(330)),c=p(n(5079)),d=p(n(6)),f=p(n(5231));function p(e){return e&&e.__esModule?e:{default:e}}function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var v=Object.freeze({SMALL:f.default.small,MEDIUM:f.default.medium,LARGE:f.default.large}),y=function(e){var t,n,r,o=e.hasContent,p=e.onClear,h=e.className,_=e.isLoading,y=e.size,m=void 0===y?v.SMALL:y;return E(u.default,{className:(0,i.default)(h,f.default.iconLayout,m,(t={},t[f.default.pointer]=o,t)),onClick:function(e){e.stopPropagation(),null!=p&&p(e)},tabIndex:o?0:-1,onMouseDown:function(e){e.preventDefault(),e.stopPropagation()}},void 0,E("div",{className:f.default.iconContainer},void 0,_?E(l.default,{type:l.default.Type.SPINNING_CIRCLE,className:(0,i.default)(f.default.icon,f.default.visible)}):E(a.Fragment,{},void 0,E(c.default,{className:(0,i.default)(f.default.icon,(n={},n[f.default.visible]=!o,n)),"aria-label":d.default.Messages.SEARCH}),E(s.default,{className:(0,i.default)(f.default.clear,(r={},r[f.default.visible]=o,r)),"aria-label":d.default.Messages.CLOSE}))))};t.SearchIcon=y,y.displayName="SearchIcon",y.Sizes=v;var m=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).inputRef=a.createRef(),t.containerRef=a.createRef(),t.handleOnChange=function(e){var n=t.props.onChange;n&&n(e.currentTarget.value)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var u=r.prototype;return u.focus=function(){var e=this.inputRef.current;null!=e&&e.focus()},u.blur=function(){var e=this.inputRef.current;null!=e&&e.blur()},u.render=function(){var e,t=this.props,n=t.query,r=t.autoFocus,u=t.onClear,l=t.className,s=t.placeholder,c=t.iconClassName,d=t.onKeyDown,p=t.onKeyUp,h=t.onKeyPress,v=t.isLoading,m=t.size,g=t.disabled,T=(t.onChange,t.onBlur),A=t.onFocus,I=t.autoComplete,S=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["query","autoFocus","onClear","className","placeholder","iconClassName","onKeyDown","onKeyUp","onKeyPress","isLoading","size","disabled","onChange","onBlur","onFocus","autoComplete"]);return E(o.default,{focusTarget:this.inputRef,ringTarget:this.containerRef},void 0,a.createElement("div",_({className:(0,i.default)(l,f.default.container,m,(e={},e[f.default.disabled]=g,e)),ref:this.containerRef},S),E("div",{className:f.default.inner},void 0,a.createElement("input",{onFocus:A,onBlur:T,className:f.default.input,value:n,onChange:this.handleOnChange,onKeyDown:d,onKeyUp:p,onKeyPress:h,placeholder:s,disabled:g,autoFocus:r,autoComplete:I,ref:this.inputRef}),E(y,{size:m,hasContent:n.length>0,onClear:u,className:c,isLoading:v}))))},r}(a.PureComponent);m.displayName="SearchBar",m.Sizes=v,m.defaultProps={size:v.SMALL,placeholder:d.default.Messages.SEARCH,isLoading:!1,disabled:!1};var g=m;t.default=g},5068:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(n(5)),a=f(n(26)),i=f(n(3)),o=n(284),u=f(n(5113)),l=f(n(20)),s=f(n(98)),c=f(n(40)),d=n(1);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h={lastViewedPath:null},_=h,E=d.Routes.ME;function v(e){if(l.default.isGuest()){if("guilds"in e&&null!=e.guilds&&1===e.guilds.length){var t=e.guilds[0].id;return E=d.Routes.CHANNEL(t,s.default.getChannelId(t)),!0}return!1}var n=d.Routes.ME,r=o.ExperimentStore.getUserExperimentDescriptor(o.Experiments.KILL_LANDING_PAGE);return null!=r&&((0,o.triggerExperiment)(u.default.id,r),r.bucket===o.ExperimentBuckets.TREATMENT_1&&(n=d.Routes.ME)),n!==E&&(E=n,!0)}var y=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,i,o,u=r.prototype;return u.initialize=function(e){var t;void 0===e&&(e=h),this.waitFor(c.default,l.default,s.default),_=null!==(t=e)&&void 0!==t?t:h},u.getState=function(){return _},a=r,(i=[{key:"defaultRoute",get:function(){return E}},{key:"fallbackRoute",get:function(){return d.Routes.ME}}])&&p(a.prototype,i),o&&p(a,o),r}(r.default.PersistedStore);y.persistKey="DefaultRouteStore",y.migrations=[function(){var e=a.default.get("LAST_VIEWED_PATH",null);return a.default.remove("LAST_VIEWED_PATH"),{lastViewedPath:e}}];var m=new y(i.default,{CONNECTION_OPEN:v,CURRENT_USER_UPDATE:v,USER_SETTINGS_UPDATE:v,SAVE_LAST_ROUTE:function(e){var t=e.path;return _.lastViewedPath=t,!0}});t.default=m},5076:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveGiftCode=function(e,t,n){return _.apply(this,arguments)},t.redeemGiftCode=function(e,t){return v.apply(this,arguments)},t.fetchUserGiftCodesForSKU=function(e,t){return y.apply(this,arguments)},t.createGiftCode=function(e,t){return m.apply(this,arguments)},t.revokeGiftCode=function(e){return g.apply(this,arguments)},t.openGiftCodeAcceptModal=function(e,t,n){void 0===t&&(t=null);void 0===n&&(n=null);l.default.track(d.AnalyticEvents.OPEN_MODAL,{type:"gift_accept",location:t}),a.default.dispatch({type:d.ActionTypes.GIFT_CODE_MODAL_OPEN,code:e,channelId:n,analyticsLocation:t})},t.closeGiftCodeAcceptModal=function(){a.default.dispatch({type:d.ActionTypes.GIFT_CODE_MODAL_CLOSE})},t.openNativeGiftCodeModal=function(e){o.default.openNativeAppModal(e,d.RPCCommands.GIFT_CODE_BROWSER)};var r=f(n(15)),a=f(n(3)),i=n(283),o=f(n(4947)),u=f(n(84)),l=f(n(16)),s=n(800),c=f(n(1413)),d=n(1);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){p(i,r,a,o,u,"next",e)}function u(e){p(i,r,a,o,u,"throw",e)}o(void 0)}))}}function _(){return(_=h(regeneratorRuntime.mark((function e(t,n,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=!1),void 0===r&&(r=!1),a.default.dispatch({type:d.ActionTypes.GIFT_CODE_RESOLVE,code:t}),e.prev=3,e.next=6,(0,s.resolveGiftCode)(t,n,r);case 6:if(null==(i=e.sent).application_id||i.application_id===d.PREMIUM_SUBSCRIPTION_APPLICATION){e.next=17;break}if(null!=u.default.getGame(i.application_id)){e.next=17;break}return e.prev=10,e.next=13,c.default.fetchApplication(i.application_id);case 13:e.next=17;break;case 15:e.prev=15,e.t0=e.catch(10);case 17:return a.default.dispatch({type:d.ActionTypes.GIFT_CODE_RESOLVE_SUCCESS,giftCode:i}),e.abrupt("return",{giftCode:i});case 21:throw e.prev=21,e.t1=e.catch(3),a.default.dispatch({type:d.ActionTypes.GIFT_CODE_RESOLVE_FAILURE,code:t,error:e.t1}),e.t1;case 25:case"end":return e.stop()}}),e,null,[[3,21],[10,15]])})))).apply(this,arguments)}var E=Object.freeze({});function v(){return(v=h(regeneratorRuntime.mark((function e(t,n){var o,u,l,s,c,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=E),u=(o=n).channelId,l=void 0===u?null:u,s=o.paymentSourceId,c=void 0===s?null:s,a.default.dispatch({type:d.ActionTypes.GIFT_CODE_REDEEM,code:t}),e.prev=3,e.next=6,r.default.post({url:d.Endpoints.GIFT_CODE_REDEEM(t),body:{channel_id:l,payment_source_id:c},oldFormErrors:!0});case 6:return f=e.sent,a.default.dispatch({type:d.ActionTypes.GIFT_CODE_REDEEM_SUCCESS,code:t}),e.abrupt("return",{code:t,entitlement:f});case 12:throw e.prev=12,e.t0=e.catch(3),p=new i.BillingError(e.t0),a.default.dispatch({type:d.ActionTypes.GIFT_CODE_REDEEM_FAILURE,code:t,error:p}),p;case 18:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}function y(){return(y=h(regeneratorRuntime.mark((function e(t,n){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=null),a.default.dispatch({type:d.ActionTypes.GIFT_CODES_FETCH,skuId:t,subscriptionPlanId:n}),e.prev=2,e.next=5,r.default.get({url:d.Endpoints.USER_GIFT_CODES,query:{sku_id:t,subscription_plan_id:n},oldFormErrors:!0});case 5:i=e.sent,a.default.dispatch({type:d.ActionTypes.GIFT_CODES_FETCH_SUCCESS,giftCodes:i.body,skuId:t,subscriptionPlanId:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),a.default.dispatch({type:d.ActionTypes.GIFT_CODES_FETCH_FAILURE,skuId:t,subscriptionPlanId:n});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function m(){return(m=h(regeneratorRuntime.mark((function e(t,n){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=null),a.default.dispatch({type:d.ActionTypes.GIFT_CODE_CREATE_START,skuId:t,subscriptionPlanId:n}),e.prev=2,e.next=5,r.default.post({url:d.Endpoints.USER_GIFT_CODE_CREATE,body:{sku_id:t,subscription_plan_id:n},oldFormErrors:!0});case 5:return i=e.sent,a.default.dispatch({type:d.ActionTypes.GIFT_CODE_CREATE_SUCCESS,giftCode:i.body}),e.abrupt("return",i.body);case 10:e.prev=10,e.t0=e.catch(2),a.default.dispatch({type:d.ActionTypes.GIFT_CODE_CREATE_FAILURE,skuId:t,subscriptionPlanId:n});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function g(){return(g=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.dispatch({type:d.ActionTypes.GIFT_CODE_REVOKE,code:t}),e.prev=1,e.next=4,r.default.delete({url:d.Endpoints.USER_GIFT_CODE_REVOKE(t),oldFormErrors:!0});case 4:a.default.dispatch({type:d.ActionTypes.GIFT_CODE_REVOKE_SUCCESS,code:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.default.dispatch({type:d.ActionTypes.GIFT_CODE_REVOKE_FAILURE,code:t});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}},5079:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var r,a,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=(r=n(57))&&r.__esModule?r:{default:r};function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(e){var t=e.width,n=void 0===t?24:t,r=e.height,a=void 0===r?24:r,u=e.color,c=void 0===u?"currentColor":u,d=e.foreground,f=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["width","height","color","foreground"]);return i.createElement("svg",l({},(0,o.default)(f),{width:n,height:a,viewBox:"0 0 24 24"}),s("path",{className:d,fill:c,d:"M21.707 20.293L16.314 14.9C17.403 13.504 18 11.799 18 10C18 7.863 17.167 5.854 15.656 4.344C14.146 2.832 12.137 2 10 2C7.863 2 5.854 2.832 4.344 4.344C2.833 5.854 2 7.863 2 10C2 12.137 2.833 14.146 4.344 15.656C5.854 17.168 7.863 18 10 18C11.799 18 13.504 17.404 14.9 16.314L20.293 21.706L21.707 20.293ZM10 16C8.397 16 6.891 15.376 5.758 14.243C4.624 13.11 4 11.603 4 10C4 8.398 4.624 6.891 5.758 5.758C6.891 4.624 8.397 4 10 4C11.603 4 13.109 4.624 14.242 5.758C15.376 6.891 16 8.398 16 10C16 11.603 15.376 13.11 14.242 14.243C13.109 15.376 11.603 16 10 16Z"}))}c.displayName="Search"},5080:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=(r=n(46))&&r.__esModule?r:{default:r};function i(t,n){if(!t.startsWith("discord:"))return location.href=t,e.nextTick((function(){return n(!0)}));var r=document.body;if(null==r)return e.nextTick((function(){return n(!1)}));var a=document.createElement("iframe");r.appendChild(a);try{a.contentWindow.location.href=t,e.nextTick((function(){return n(!0)}))}catch(t){"NS_ERROR_UNKNOWN_PROTOCOL"===t.name&&e.nextTick((function(){return n(!1)}))}window.setTimeout((function(){var e;null!==(null!==(e=null==a?void 0:a.parentElement)&&void 0!==e?e:null)&&r.removeChild(a)}),1e3)}function o(e,t){var n=!1;function r(){n=!0}window.addEventListener("blur",r),location.href=e,setTimeout((function(){window.removeEventListener("blur",r),t(n)}),1e3)}function u(e,t){t(!1)}function l(t,n){location.href=t,e.nextTick((function(){return n(!0)}))}var s={launch:"Android"===a.default.os.family||"iOS"===a.default.os.family?l:"Gecko"===a.default.layout?i:null!=a.default.ua&&-1!==a.default.ua.indexOf("Valve Steam GameOverlay")?u:o};t.default=s}).call(this,n(88))},5085:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=_;f(n(0));var r,a,i=n(549),o=n(294),u=f(n(5086)),l=c(n(6)),s=c(n(5229));function c(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function p(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var h=((r={})[o.InternalTemplateCodes.CLASSROOM]={image:n(5133),title:l.default.Messages.GUILD_TEMPLATE_MODAL_TITLE_CLASSROOM,subtitle:l.default.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_CLASSROOM},r[o.InternalTemplateCodes.LOCAL_COMMUNITIES]={image:n(5134),title:l.default.Messages.GUILD_TEMPLATE_MODAL_TITLE_LOCAL_COMMUNITIES,subtitle:l.default.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_LOCAL_COMMUNITIES},r[o.InternalTemplateCodes.CREATORS_HOBBIES]={image:n(5135),title:l.default.Messages.GUILD_TEMPLATE_MODAL_TITLE_CREATORS_HOBBIES,subtitle:l.default.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_CREATORS_HOBBIES},r[o.InternalTemplateCodes.GLOBAL_COMMUNITIES]={image:n(5136),title:l.default.Messages.GUILD_TEMPLATE_MODAL_TITLE_GLOBAL_COMMUNITIES,subtitle:l.default.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_GLOBAL_COMMUNITIES},r[o.InternalTemplateCodes.FRIENDS_FAMILY]={image:n(5137),title:l.default.Messages.GUILD_TEMPLATE_MODAL_TITLE_FRIENDS_FAMILY,subtitle:l.default.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_FRIENDS_FAMILY},r[o.InternalTemplateCodes.STUDY_GROUPS]={image:n(5138),title:l.default.Messages.GUILD_TEMPLATE_MODAL_TITLE_STUDY_GROUPS,subtitle:l.default.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_STUDY_GROUPS},r[o.InternalTemplateCodes.CREATE_FROM_SCRATCH]={image:n(5139),title:l.default.Messages.GUILD_TEMPLATE_MODAL_TITLE_CREATE_FROM_SCRATCH,subtitle:l.default.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_CREATE_FROM_SCRATCH},r[o.InternalTemplateCodes.CAMPUS_CLUBS]={image:n(5140),title:l.default.Messages.GUILD_TEMPLATE_MODAL_TITLE_CAMPUS_CLUBS,subtitle:l.default.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_CAMPUS_CLUBS},r[o.InternalTemplateCodes.LEAGUE_CLUBS]={image:n(5141),title:l.default.Messages.GUILD_TEMPLATE_MODAL_TITLE_LEAGUE_CLUBS,subtitle:l.default.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_LEAGUE_CLUBS},r);function _(e){var t=e.headerId,n=e.guildTemplate,r=h[n.code];if(null!=r){var a,l=r.image,c=r.title,d=r.subtitle;return p("div",{},void 0,p("img",{className:s.default.image,src:l,alt:""}),p(i.Title,{className:s.default.header,id:t},void 0,c),p(i.SubTitle,{},void 0,d),n.state===o.GuildTemplateStates.RESOLVED?p(u.UsagePill,{className:s.default.usagePill,count:null!==(a=n.usageCount)&&void 0!==a?a:0,verified:!0}):null)}return p(u.default,{pillClassName:s.default.usagePill,guildTemplate:n,tall:!0})}_.displayName="GuildTemplateAuthBody"},5086:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UsagePill=A,t.default=function(e){var t=e.guildTemplate,n=e.error,r=e.tall,a=e.pillClassName;if(n)return y("div",{className:h.default.container},void 0,y(l.Title,{},void 0,p.default.Messages.INVITE_MODAL_ERROR_TITLE),y(l.SubTitle,{},void 0,n));if(t.state===c.GuildTemplateStates.RESOLVING)return y("div",{className:h.default.container},void 0,I);var o=(0,f.default)(t).header;return r?y("div",{className:h.default.container},void 0,y(l.Title,{className:h.default.title},void 0,o),y(l.SubTitle,{className:(0,i.default)(h.default.subtitle,_.default.marginTop2)},void 0,p.default.Messages.GUILD_TEMPLATE_BASED_ON),y(l.Title,{className:(0,i.default)(h.default.title,h.default.userText)},void 0,t.name),t.description&&y(l.SubTitle,{className:(0,i.default)(h.default.subtitle,h.default.userText,_.default.marginTop8)},void 0,t.description),y(A,{className:a,count:t.usageCount||0,creator:t.creator.username,verified:(0,d.isVerifiedGuildTemplate)(t.code)})):y("div",{className:h.default.container},void 0,y(l.Title,{className:h.default.title},void 0,o),y(l.SubTitle,{className:(0,i.default)(h.default.subtitle,h.default.userText)},void 0,t.name))};var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=v();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=E(n(9)),o=E(n(4939)),u=E(n(210)),l=n(549),s=E(n(1424)),c=n(294),d=n(5132),f=E(n(5093)),p=E(n(6)),h=E(n(5228)),_=E(n(829));function E(e){return e&&e.__esModule?e:{default:e}}function v(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return v=function(){return e},e}function y(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function m(){return y(o.default,{className:h.default.verifiedIcon},void 0,y("div",{className:h.default.verifiedCheckContainer},void 0,y(s.default,{className:h.default.verifiedCheck})))}m.displayName="VerifiedIcon";var g=y(m,{});function T(e){var t=e.verified,n=e.text;return t?y("div",{className:h.default.verifiedNameContainer},void 0,g,n):a.createElement(a.Fragment,null,n)}function A(e){var t=e.className,n=e.count,r=e.creator,a=e.verified;return y("div",{className:(0,i.default)(h.default.usagePill,t,h.default.userText)},void 0,null!=r||a?p.default.Messages.GUILD_TEMPLATE_USAGES_BY_CREATOR2.format({usageCount:n,creator:a?p.default.Messages.DISCORD_NAME:r,creatorHook:function(e,t){return y(T,{text:e,verified:!0===a},t)}}):p.default.Messages.GUILD_TEMPLATE_USAGES.format({usageCount:n}))}T.displayName="CreatorHook",A.displayName="UsagePill";var I=y(u.default,{})},5089:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.InviteResolvingHeader=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=h(n(86)),o=h(n(299)),u=h(n(147)),l=h(n(4933)),s=h(n(278)),c=n(549),d=n(1),f=h(n(6)),p=h(n(5255));function h(e){return e&&e.__esModule?e:{default:e}}function _(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _=function(){return e},e}function E(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var v=function(){return E(a.Fragment,{},void 0,E(c.Avatar,{src:null,size:c.Avatar.Sizes.DEPRECATED_SIZE_100,className:p.default.avatar}),E(c.SubTitle,{},void 0,f.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN),E(c.Title,{className:p.default.inviteResolvingGuildName},void 0,f.default.Messages.LOADING))};t.InviteResolvingHeader=v,v.displayName="InviteResolvingHeader";var y=function(e){var t=e.guild,n=e.user;return n?E(c.Avatar,{src:null!=n?n.getAvatarURL():null,size:c.Avatar.Sizes.DEPRECATED_SIZE_100,className:p.default.avatar}):t?E(c.GuildIcon,{guild:t,size:c.GuildIcon.Sizes.XLARGE,className:p.default.guildIcon,animate:!0}):null},m=function(e){var t=e.invite,n=e.disableUser,r=void 0!==n&&n,h=e.error,_=e.description,v=e.flatActivityCount,m=void 0!==v&&v;if(null==t)return null;var g,T,A=null!=t.guild?new o.default(t.guild):null,I=null!=t.channel?new i.default(t.channel):null,S=r||null==t.inviter?null:new u.default(t.inviter),O=!(null!=t.approximate_member_count&&t.approximate_member_count>100||null!=A&&A.hasFeature(d.GuildFeatures.COMMUNITY))&&S,C=null;if(null!=A)C=null==S?f.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN:f.default.Messages.AUTH_MESSAGE_INVITED_BY.format({username:S.username}),t.target_user_type===d.InviteTargetUserTypes.STREAM&&null!=t.target_user&&(C=f.default.Messages.AUTH_MESSAGE_INVITED_TO_STREAM.format({username:t.target_user.username})),O&&(g=E(c.GuildIcon,{guild:A,size:c.GuildIcon.Sizes.SMALL})),T=A.name;else if(null!=I){if(null==S)throw new Error("no inviter in group DM invite");var N=S.username;I.name?(C=f.default.Messages.AUTH_MESSAGE_INVITED_BY.format({username:N}),T=I.name,null!=I.icon&&(g=E(c.ChannelIcon,{channel:I,size:c.Avatar.Sizes.SIZE_32}))):(C=f.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN_GROUP_DM,T=N)}return E("div",{},void 0,E(y,{guild:A,user:O?S:null}),h?a.createElement(a.Fragment,null,E(c.SubTitle,{},void 0,f.default.Messages.INVITE_MODAL_ERROR_TITLE),E(c.Title,{},void 0,h)):a.createElement(a.Fragment,null,E(c.SubTitle,{},void 0,C),E(c.Title,{className:p.default.title},void 0,null!=A?E(l.default,{guild:A,className:p.default.guildBadge,tooltipPosition:s.default.Positions.LEFT}):null,g,T)),_&&E("p",{className:p.default.description},void 0,_),E(c.ActivityCount,{className:p.default.activityCount,online:t.approximate_presence_count,total:t.approximate_member_count,flat:m}))};m.displayName="InviteHeader";var g=m;t.default=g},5093:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e.code){case a.InternalTemplateCodes.CLASSROOM:return{header:i.default.Messages.GUILD_TEMPLATE_MODAL_TITLE_CLASSROOM,nameLabel:i.default.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_CLASSROOM,terms:i.default.Messages.CREATE_SERVER_GUIDELINES,defaultName:i.default.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_CLASSROOM};case a.InternalTemplateCodes.LOCAL_COMMUNITIES:return{header:i.default.Messages.GUILD_TEMPLATE_MODAL_TITLE_LOCAL_COMMUNITIES,nameLabel:i.default.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_LOCAL_COMMUNITIES,terms:i.default.Messages.CREATE_SERVER_GUIDELINES,defaultName:i.default.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_LOCAL_COMMUNITIES};case a.InternalTemplateCodes.CREATORS_HOBBIES:return{header:i.default.Messages.GUILD_TEMPLATE_MODAL_TITLE_CREATORS_HOBBIES,nameLabel:i.default.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_CREATORS_HOBBIES,terms:i.default.Messages.CREATE_SERVER_GUIDELINES,defaultName:i.default.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_CREATORS_HOBBIES};case a.InternalTemplateCodes.GLOBAL_COMMUNITIES:return{header:i.default.Messages.GUILD_TEMPLATE_MODAL_TITLE_GLOBAL_COMMUNITIES,nameLabel:i.default.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_GLOBAL_COMMUNITIES,terms:i.default.Messages.CREATE_SERVER_GUIDELINES,defaultName:i.default.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_GLOBAL_COMMUNITIES};case a.InternalTemplateCodes.FRIENDS_FAMILY:return{header:i.default.Messages.GUILD_TEMPLATE_MODAL_TITLE_FRIENDS_FAMILY,nameLabel:i.default.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_FRIENDS_FAMILY,terms:i.default.Messages.CREATE_SERVER_GUIDELINES,defaultName:i.default.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_FRIENDS_FAMILY};case a.InternalTemplateCodes.STUDY_GROUPS:return{header:i.default.Messages.GUILD_TEMPLATE_MODAL_TITLE_STUDY_GROUPS,nameLabel:i.default.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_STUDY_GROUPS,terms:i.default.Messages.CREATE_SERVER_GUIDELINES,defaultName:i.default.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_STUDY_GROUPS};case a.InternalTemplateCodes.CREATE_FROM_SCRATCH:return{header:i.default.Messages.GUILD_TEMPLATE_MODAL_TITLE_CREATE_FROM_SCRATCH,nameLabel:i.default.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_CREATE_FROM_SCRATCH,terms:i.default.Messages.CREATE_SERVER_GUIDELINES,defaultName:i.default.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_CREATE_FROM_SCRATCH};case a.InternalTemplateCodes.CAMPUS_CLUBS:return{header:i.default.Messages.GUILD_TEMPLATE_MODAL_TITLE_CAMPUS_CLUBS,nameLabel:i.default.Messages.FORM_LABEL_SERVER_NAME,terms:i.default.Messages.CREATE_SERVER_GUIDELINES,defaultName:i.default.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_CAMPUS_CLUBS};case a.InternalTemplateCodes.LEAGUE_CLUBS:return{header:i.default.Messages.GUILD_TEMPLATE_MODAL_TITLE_LEAGUE_CLUBS,nameLabel:i.default.Messages.FORM_LABEL_SERVER_NAME,terms:i.default.Messages.CREATE_SERVER_GUIDELINES,defaultName:i.default.Messages.CREATE_SERVER_DEFAULT_SERVER_NAME_FORMAT};default:return{header:i.default.Messages.GUILD_TEMPLATE_CREATE_DISCORD,nameLabel:i.default.Messages.FORM_LABEL_SERVER_NAME,terms:i.default.Messages.CREATE_SERVER_GUIDELINES,defaultName:i.default.Messages.CREATE_SERVER_DEFAULT_SERVER_NAME_FORMAT}}};var r,a=n(294),i=(r=n(6))&&r.__esModule?r:{default:r}},5094:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=d(n(9)),o=d(n(347)),u=d(n(5067)),l=d(n(5112)),s=d(n(841)),c=d(n(5233));function d(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function _(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var E=function(){return _(s.default,{className:c.default.divider})};E.displayName="PopoutListDivider";var v=function(e){var t=e.children;return _("div",{className:c.default.popoutListEmpty},void 0,t)};v.displayName="PopoutListEmpty";var y=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["className"]);return a.createElement(u.default,p({},n,{className:(0,i.default)(c.default.popoutListInput,t)}))},t}(a.PureComponent);y.displayName="PopoutListSearchBar",y.defaultProps={autoFocus:!0};var m=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.children;return _(o.default,{className:(0,i.default)(c.default.popoutList,t),"aria-label":this.props["aria-label"]},void 0,n)},t}(a.PureComponent);m.displayName="PopoutList",m.SearchBar=y,m.Item=l.default,m.Divider=E,m.Empty=v;var g=m;t.default=g},5095:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,l.getScrollbarSpecs)(e);return i.forwardRef((function(r,a){var s,f=r.children,p=r.className,h=r.dir,_=void 0===h?"ltr":h,E=r.orientation,v=void 0===E?"vertical":E,y=r.paddingFix,m=void 0===y||y,g=r.fade,T=void 0!==g&&g,A=(r.onScroll,r.style),I=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(r,["children","className","dir","orientation","paddingFix","fade","onScroll","style"]);var S=i.useRef(null),O=(0,l.usePaddingFixes)({paddingFix:m,orientation:v,dir:_,className:p,scrollerRef:S,specs:n});return i.createElement("div",c({ref:function(e){"function"==typeof a?a(e):null!=a&&(a.current=e),S.current=e},className:(0,o.default)(p,(s={},s[e]=!0,s[t]=T,s)),style:(0,l.getMergedOrientationStyles)(A,v),dir:_},I),d(u.FocusRingScope,{containerRef:S},void 0,f,O))}))};var r,a,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=(r=n(9))&&r.__esModule?r:{default:r},u=n(72),l=n(354);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}},5102:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(15)),a=u(n(3)),i=n(4937),o=n(1);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}var s={setCountryCode:function(e){a.default.dispatch({type:o.ActionTypes.PHONE_SET_COUNTRY_CODE,countryCode:e})},removePhone:function(e){return r.default.delete({url:o.Endpoints.PHONE,body:{password:e},oldFormErrors:!0})},resendCode:function(e){return r.default.post({url:o.Endpoints.RESEND_PHONE,body:{phone:e}})},beginAddPhone:function(e){return r.default.post({url:o.Endpoints.PHONE,body:{phone:e}})},addPhone:function(e,t){return r.default.post({url:o.Endpoints.PHONE,body:{phone_token:e,password:t},oldFormErrors:!0})},verifyPhone:function(e,t,n){return(u=regeneratorRuntime.mark((function u(){var l;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return void 0===n&&(n=!0),a.default.dispatch({type:o.ActionTypes.VERIFICATION_VERIFYING_PHONE}),u.prev=2,u.next=5,r.default.post({url:o.Endpoints.VERIFY_PHONE_NEW,body:{phone:e,code:t},oldFormErrors:!0});case 5:return l=u.sent,a.default.dispatch({type:o.ActionTypes.VERIFICATION_VERIFY_PHONE_SUCCESS}),n&&a.default.dispatch({type:o.ActionTypes.MODAL_POP,key:i.PHONE_VERIFICATION_MODAL_KEY}),u.abrupt("return",l.body);case 11:throw u.prev=11,u.t0=u.catch(2),a.default.dispatch({type:o.ActionTypes.VERIFICATION_VERIFY_PHONE_FAILURE,error:u.t0.body.message}),u.t0;case 15:case"end":return u.stop()}}),u,null,[[2,11]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=u.apply(e,t);function i(e){l(a,n,r,i,o,"next",e)}function o(e){l(a,n,r,i,o,"throw",e)}i(void 0)}))})();var u}};t.default=s},5103:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=(r=n(5196))&&r.__esModule?r:{default:r},o=n(1);function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=function(e){return a.createElement(i.default,l({sitekey:o.RECAPTCHA_SITE_KEY},e))};s.displayName="Recaptcha",s.Themes={LIGHT:"light",DARK:"dark"},s.Sizes={COMPACT:"compact",NORMAL:"normal",INVISIBLE:"invisible"};var c=s;t.default=c},5106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){void 0===t&&(t={});var n=t,r=n.queryString,i=n.inviteCode,o=n.guildTemplateCode,u=r?"?"+r:"",l=encodeURIComponent(null!=i?location.protocol+"//"+window.GLOBAL_ENV.INVITE_HOST+"/"+i+u:null!=o?""+location.protocol+window.GLOBAL_ENV.WEBAPP_ENDPOINT+"/template/"+o+u:""+location.protocol+window.GLOBAL_ENV.WEBAPP_ENDPOINT+"/channels/@me"+u),s=encodeURIComponent(a.default.Messages.IOS_APP_PREVIEW_DESCRIPTION),c=(E=new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari/)"].join("|")+")","ig"),v=null!=(null===(d=platform)||void 0===d||null===(f=d.ua)||void 0===f?void 0:f.match(E)),y="Safari"===(null===(p=platform)||void 0===p?void 0:p.name)&&!v,"iOS"!==(null===(h=platform)||void 0===h||null===(_=h.os)||void 0===_?void 0:_.family)||y?1:0);var d,f,p,h,_,E,v,y;return"https://discordapp.page.link/?link="+l+"&utm_source="+e+"&apn=com.discord&isi=985746746&ibi=com.hammerandchisel.discord&sd="+s+"&efr="+c};var r,a=(r=n(6))&&r.__esModule?r:{default:r}},5107:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(4)),a=o(n(58)),i=n(1);function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this).userId=t.userId,n.code=t.code,n.skuId=t.skuId,n.uses=t.uses,n.maxUses=t.maxUses,n.expiresAt=t.expiresAt,n.redeemed=t.redeemed,n.storeListingId=t.storeListingId,n.subscriptionPlanId=t.subscriptionPlanId,n.revoked=t.revoked,n.entitlementBranches=t.entitlementBranches,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.createFromServer=function(e){return new a({userId:null!=e.user?e.user.id:null,code:e.code,skuId:e.sku_id,uses:e.uses,maxUses:e.max_uses,storeListingId:null!=e.store_listing?e.store_listing.id:null,expiresAt:null!=e.expires_at?(0,r.default)(e.expires_at):null,redeemed:e.redeemed,subscriptionPlanId:null!=e.subscription_plan?e.subscription_plan.id:e.subscription_plan_id,revoked:!1,entitlementBranches:null!=e.entitlement_branches?e.entitlement_branches:null})};var o,l,s,c=a.prototype;return c.isExpired=function(){var e=this.expiresAt;return null!=e&&(0,r.default)().isAfter(e)},c.toString=function(){return this.code},o=a,(l=[{key:"hasMultipleCopies",get:function(){return this.maxUses>1}},{key:"isClaimed",get:function(){return this.uses>=this.maxUses}},{key:"remainingUses",get:function(){return this.maxUses-this.uses}},{key:"isSubscription",get:function(){return null!=this.subscriptionPlanId}},{key:"premiumSubscriptionType",get:function(){return this.isSubscription&&i.PremiumSubscriptionSKUToPremiumType[this.skuId]||null}},{key:"analyticsData",get:function(){return{gift_code:this.code,gift_code_max_uses:this.maxUses}}}])&&u(o.prototype,l),s&&u(o,s),a}(a.default);t.default=l},5111:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=E();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=_(n(9)),o=_(n(5059)),u=_(n(7)),l=_(n(1434)),s=_(n(61)),c=_(n(5094)),d=n(4929),f=_(n(6)),p=_(n(5234)),h=_(n(5087));function _(e){return e&&e.__esModule?e:{default:e}}function E(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return E=function(){return e},e}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var m=y(c.default.Divider,{}),g=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).onChangeQuery=function(e){n.setState({query:e})},n.onClearQuery=function(){n.setState({query:""})},n.onClick=function(e){var t=e.id;(0,n.props.onClick)(t)},n.state={query:""},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var _=r.prototype;return _.renderItems=function(){var e=this,t=this.state.query,n=l.default.map((function(e,t){var n=e.code,r=e.name,a=n.split(" ")[0];return{id:t,value:r,children:y(s.default,{className:p.default.countryItem,justify:s.default.Justify.CENTER,align:s.default.Align.CENTER},void 0,y(s.default.Child,{className:p.default.countryName},void 0,r),y(s.default.Child,{className:p.default.countryCode,grow:0,shrink:0},void 0,a))}})),r=(0,u.default)(n).filter((function(e){return 0===t.length||(0,o.default)(t.toLowerCase(),e.value.toLowerCase())})).map((function(t){return a.createElement(c.default.Item,v({key:t.id},t,{onClick:e.onClick}))})).value();return 0===r.length?y(c.default.Empty,{},void 0,f.default.Messages.NONE):y(d.ScrollerAuto,{className:p.default.phoneFieldScroller},void 0,r)},_.render=function(){var e=this.props.className;return y(c.default,{className:(0,i.default)(p.default.phoneFieldPopout,h.default.elevationBorderLow,e)},void 0,y(c.default.SearchBar,{query:this.state.query,placeholder:f.default.Messages.SEARCH_COUNTRY,onChange:this.onChangeQuery,onClear:this.onClearQuery,autoComplete:"off"}),m,this.renderItems())},r}(a.PureComponent);t.default=g,g.displayName="CountryPopoutList"},5112:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=p(n(9)),o=p(n(7)),u=n(218),l=p(n(61)),s=p(n(1411)),c=n(1),d=p(n(5232)),f=p(n(829));function p(e){return e&&e.__esModule?e:{default:e}}function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function _(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var y=o.default.memoize((function(e){var t=!1;if(null!=e&&(0,u.isValidHex)(e)){var n=(0,u.hex2int)(e);null!=n&&(t=(0,u.getDarkness)(n)<.2)}return t?c.Colors.BLACK:c.Colors.WHITE})),m=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={color:y(t.props.color)},t.handleClick=function(){var e=t.props;(0,e.onClick)(v(e,["onClick"]))},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e,t,n=this.props,r=n.selected,a=n.color,o=n.className,u=n.children,p=y(a);return r?t={color:p,background:a||c.Colors.BRAND}:null!=a&&(t={color:a}),_(l.default,{className:(0,i.default)(d.default.selectableItem,o,(e={},e[d.default.selected]=r,e)),onClick:this.handleClick,align:l.default.Align.CENTER,style:E({},t,{},this.props.style)},void 0,_(l.default,{align:l.default.Align.CENTER,className:d.default.selectableItemLabel,shrink:1},void 0,u),r&&_(l.default,{wrap:l.default.Wrap.WRAP,className:f.default.marginReset,grow:0,shrink:0},void 0,_(s.default,{color:p})))},r}(a.PureComponent);m.displayName="SelectableItem";var g=m;t.default=g},5113:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(284),a=(0,r.registerUserExperiment)({id:r.Experiments.KILL_LANDING_PAGE,title:"Kill Landing Page",description:["Kill landing page","Control: Landing page is AF","Treatment 1: Landing page is People"],buckets:[r.ExperimentBuckets.CONTROL,r.ExperimentBuckets.TREATMENT_1]});t.default=a},5114:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GiftCodeResolvingHeader=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=y(n(9)),o=y(n(5)),u=y(n(84)),l=y(n(24)),s=y(n(212)),c=y(n(343)),d=y(n(1415)),f=n(549),p=n(1),h=y(n(6)),_=y(n(5254)),E=y(n(843)),v=y(n(829));function y(e){return e&&e.__esModule?e:{default:e}}function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function g(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var T=function(){return g(a.Fragment,{},void 0,g(f.Avatar,{src:null,size:f.Avatar.Sizes.DEPRECATED_SIZE_100,className:v.default.marginBottom20}),g(f.SubTitle,{},void 0,h.default.Messages.GIFT_CODE_AUTH_GIFTED),g(f.Title,{className:(0,i.default)(v.default.marginTop8,E.default.flexCenter)},void 0,h.default.Messages.LOADING))};t.GiftCodeResolvingHeader=T,T.displayName="GiftCodeResolvingHeader";var A=function(e){var t=e.error,n=e.gifter,r=e.sku,o=e.application,u=e.subscriptionPlan,l=null==n?h.default.Messages.GIFT_CODE_AUTH_GIFTED:h.default.Messages.GIFT_CODE_AUTH_GIFTED_BY.format({username:n.username}),s=r.name;return null!=u&&(s=(u.interval===p.SubscriptionIntervalTypes.MONTH?h.default.Messages.GIFT_CODE_AUTH_GIFTED_SUBSCRIPTION_MONTHLY:h.default.Messages.GIFT_CODE_AUTH_GIFTED_SUBSCRIPTION_YEARLY).format({skuName:r.name,intervalCount:u.intervalCount})),g(a.Fragment,{},void 0,g(f.Avatar,{src:null!=n?n.getAvatarURL():null,size:f.Avatar.Sizes.DEPRECATED_SIZE_100,className:v.default.marginBottom20}),null!=t?g(a.Fragment,{},void 0,g(f.SubTitle,{},void 0,h.default.Messages.INVITE_MODAL_ERROR_TITLE),g(f.Title,{},void 0,t)):g(a.Fragment,{},void 0,g(f.SubTitle,{},void 0,l),g(f.Title,{className:(0,i.default)(v.default.marginTop8,E.default.flexCenter)},void 0,g(d.default,{size:d.default.Sizes.MEDIUM,className:_.default.applicationIcon,game:o,skuId:r.id}),s)))};A.displayName="GiftCodeHeader";var I=o.default.connectStores([c.default,u.default,s.default,l.default],(function(e){var t=e.giftCode,n=c.default.get(t.skuId),r=t.subscriptionPlanId;return{sku:n,subscriptionPlan:null!=r?s.default.get(r):null,application:u.default.getGame(n.applicationId),gifter:l.default.getUser(t.userId)}}))(A);t.default=I},5115:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var r,a,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=(r=n(57))&&r.__esModule?r:{default:r};function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(e){var t=e.width,n=void 0===t?24:t,r=e.height,a=void 0===r?24:r,u=e.color,c=void 0===u?"currentColor":u,d=e.foreground,f=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["width","height","color","foreground"]);return i.createElement("svg",l({},(0,o.default)(f),{width:n,height:a,viewBox:"0 0 40 40"}),s("g",{fill:"none",fillRule:"evenodd"},void 0,s("path",{className:d,fill:c,fillOpacity:".8",d:"M21.226 30v-4.154h-3.755V30h3.755zm-.512-8.62c3.67-1.337 5.718-2.959 5.718-6.145 0-3.272-2.36-5.235-6.088-5.235-2.589 0-4.637.825-6.344 2.048l.484 3.3c1.621-1.251 3.47-2.162 5.49-2.162 1.707 0 2.845.854 2.845 2.305 0 1.593-1.08 2.475-3.812 3.442l-.882.342.342 4.523 2.076-.455.171-1.963z"}),s("rect",{className:d,width:"38",height:"38",x:"1",y:"1",stroke:c,strokeOpacity:".4",strokeWidth:"2",rx:"5"}),s("circle",{className:d,cx:"7",cy:"7",r:"2",fill:c,fillOpacity:".4"}),s("circle",{className:d,cx:"7",cy:"33",r:"2",fill:c,fillOpacity:".4"}),s("circle",{className:d,cx:"33",cy:"7",r:"2",fill:c,fillOpacity:".4"}),s("circle",{className:d,cx:"33",cy:"33",r:"2",fill:c,fillOpacity:".4"})))}c.displayName="ApplicationPlaceholder"},5116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=l(n(9)),o=l(n(549)),u=l(n(5257));function l(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function f(e){var t=e.children,n=e.className,r=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["children","className"]),l=t();return a.createElement(o.default,c({},r,{className:(0,i.default)(n,u.default.container),contentClassName:u.default.content}),l.map((function(e,t){return d("div",{className:u.default.column,style:{flexBasis:100/l.length+"%"}},t,e)})))}f.displayName="MultiColumnAuthBox"},5120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;d(n(0));var r,a=s(n(5103)),i=d(n(549)),o=s(n(6)),u=s(n(843)),l=s(n(829));function s(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var p=function(e){var t=e.title,r=e.onVerify,s=e.authBoxClassName;return f(i.default,{className:s},void 0,f("img",{alt:"",src:n(1445),className:l.default.marginBottom20}),null!=t?f(i.Title,{className:l.default.marginBottom8},void 0,t):null,f(i.SubTitle,{className:l.default.marginBottom40},void 0,o.default.Messages.BEEP_BOOP),f("div",{className:u.default.flexCenter},void 0,f(a.default,{onVerify:r,theme:a.default.Themes.DARK})))};p.displayName="AuthCaptcha";var h=p;t.default=h},5121:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sizes=t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=(r=n(1408))&&r.__esModule?r:{default:r},o=n(143);function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){return((0,o.hasAnimatedAvatar)(e)&&t?e.getAvatarURL("gif"):e.avatarURL||e.getAvatarURL("jpg"))||""}var c=a.memo((function(e){var t=e.user,n=e.size,r=void 0===n?i.default.Sizes.SIZE_32:n,o=e.animate,u=void 0!==o&&o,c=e["aria-hidden"],d=void 0!==c&&c,f=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["user","size","animate","aria-hidden"]);return a.createElement(i.default,l({src:s(t,u),size:r,"aria-label":d?void 0:t.username,"aria-hidden":d},f))}));t.default=c;var d=i.default.Sizes;t.Sizes=d},5124:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=(r=n(3))&&r.__esModule?r:{default:r},i=n(1);var o={call:function(e){a.default.dirtyDispatch({type:i.ActionTypes.POST_CONNECTION_PENDING_CALLBACK,callback:e})}};t.default=o},5132:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVerifiedGuildTemplate=function(e){return Object.values(r.InternalTemplateCodes).includes(e)};var r=n(294)},5133:function(e,t,n){e.exports=n.p+"28503047fd0aeac02132b070329c1cb6.svg"},5134:function(e,t,n){e.exports=n.p+"2d4cf96ac3c76b3fa6ea1ed9158554a0.svg"},5135:function(e,t,n){e.exports=n.p+"23b15016c8e14a060dbde9727df2118c.svg"},5136:function(e,t,n){e.exports=n.p+"d2e95b8ea969c1309e4eaae8b4bb3b08.svg"},5137:function(e,t,n){e.exports=n.p+"6ae7c596d76e62967f9a6dc366446bb6.svg"},5138:function(e,t,n){e.exports=n.p+"ff404dbe09573e704d939ed9b35a707d.svg"},5139:function(e,t,n){e.exports=n.p+"cd369224be18c55496ce08756ebb46ec.svg"},5140:function(e,t,n){e.exports=n.p+"b8612c12ba14a4b5c6573a5a38e03227.svg"},5141:function(e,t,n){e.exports=n.p+"97fa979988ee11e532c68bf490d8a507.svg"},5142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o,u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),l=p(n(9)),s=n(70),c=n(122),d=n(4941),f=p(n(5230));function p(e){return e&&e.__esModule?e:{default:e}}function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function _(e,t,n,r){i||(i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:i,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}!function(e){e[e.TRANSLATE=1]="TRANSLATE",e[e.SCALE=2]="SCALE",e[e.FADE=3]="FADE"}(o||(o={}));var E=Object.freeze(((r={})[o.TRANSLATE]=f.default.translate,r[o.SCALE]=f.default.scale,r[o.FADE]=f.default.fade,r)),v=Object.freeze(((a={})[d.PopoutPositions.TOP]=f.default.animatorTop,a[d.PopoutPositions.BOTTOM]=f.default.animatorBottom,a[d.PopoutPositions.LEFT]=f.default.animatorLeft,a[d.PopoutPositions.RIGHT]=f.default.animatorRight,a)),y=function(e){var t,n=e.position,r=e.type,a=e.children,i=u.useContext(c.AccessibilityPreferencesContext).reducedMotion.enabled?o.FADE:r,d=u.useState(null!=n),p=d[0],h=d[1],y=u.useState((function(){return new s.Timeout}))[0];return u.useEffect((function(){return function(){return y.stop()}}),[y]),u.useEffect((function(){null!=n&&y.start(10,(function(){return h(!0)}))}),[n,y]),_("div",{className:(0,l.default)(null!=n?v[n]:null,(t={},t[E[i]]=null!=n,t[f.default.didRender]=p,t))},void 0,a)};y.displayName="PopoutCSSAnimator",y.Types=o;var m=y;t.default=m},5143:function(e,t,n){e.exports=n.p+"89cf77d39a9bf300e1b7dffd7d5f238b.svg"},5144:function(e,t,n){e.exports=n.p+"95a99c20457b563a45238e98545c2744.svg"},5145:function(e,t,n){e.exports=n.p+"f6cbcdc9366fb8d31e03bdc6c9c50246.svg"},5162:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),a=o(n(5236));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}var u=function(e){var t,n;function i(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).QRRef=r.createRef(),t}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=i.prototype;return o.componentDidMount=function(){new a.default(this.QRRef.current,this.props)},o.componentDidUpdate=function(){new a.default(this.QRRef.current,this.props)},o.render=function(){var e=this.props,t=e.colorLight,n=e.className;return r.createElement("div",{ref:this.QRRef,style:{padding:8,borderRadius:4,background:t},className:n})},i}(r.PureComponent);u.displayName="QRCode",u.defaultProps={width:128,height:128,colorLight:"#ffffff",colorDark:"#000000",correctLevel:a.CorrectLevel.M};var l=u;t.default=l},5169:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=f(n(9)),o=f(n(5170)),u=n(146),l=f(n(5171)),s=f(n(5172)),c=n(844),d=f(n(1392));function f(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var E=(0,u.cssValueToNumber)(d.default.responsiveWidthMobile),v=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={naturalWidth:0,naturalHeight:0,width:0,height:0,showWaveAnimation:t.calculateShowWaveAnimation(),splashLoaded:!1},t.handleResize=function(){var e=t.state,n=e.naturalWidth,r=e.naturalHeight,a=t.calculateDimensions(n,r),i=t.calculateShowWaveAnimation();null!=a?t.setState(_({},a,{showWaveAnimation:i})):t.setState({showWaveAnimation:i})},t.handleLoad=function(e){var n=e.currentTarget,r=n.naturalWidth,a=n.naturalHeight,i=t.calculateDimensions(r,a);null!=i&&t.setState(i),t.setState({splashLoaded:!0}),window.removeEventListener("resize",t.handleResize),window.addEventListener("resize",t.handleResize)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var u=r.prototype;return u.componentWillUnmount=function(){window.removeEventListener("resize",this.handleResize)},u.calculateDimensions=function(e,t){var n=window,r=n.innerWidth,a=n.innerHeight;if(0===e||0===t)return null;var i=t/e,o=r,u=Math.round(r*i);return u<a&&(u=a,i=e/t,o=Math.round(a*i)),{naturalWidth:e,naturalHeight:t,width:o,height:u}},u.calculateShowWaveAnimation=function(){return window.innerWidth>E},u.renderSplashArt=function(){var e=this.props.splash,t=this.state,n=t.width,r=t.height;return null!=e?h(o.default,{className:d.default.rightSplit,src:e,width:n,height:r,onLoad:this.handleLoad}):null},u.renderWave=function(){var e=this.props,t=e.waveState,n=e.updateWaveState,r=this.state,a=r.showWaveAnimation,i=r.splashLoaded;return a?h(s.default,{waveState:t,updateWaveState:n,hideFallback:!i}):h("div",{className:d.default.mobileWave})},u.renderContent=function(){var e=this.props,t=e.children,n=e.waveState,r=e.showLogo,o=e.logoClassName,u=this.state.showWaveAnimation;return h(a.Fragment,{},void 0,this.renderWave(),h("div",{className:d.default.leftSplit},void 0,r?h(l.default,{show:!u||n===c.WaveStates.ENTERED&&n!==c.WaveStates.FILLING,className:(0,i.default)(d.default.logo,o)}):null,t))},u.render=function(){var e=this.props.className;return h("div",{className:(0,i.default)(e,d.default.wrapper)},void 0,this.renderSplashArt(),this.renderContent())},r}(a.PureComponent);v.displayName="WaveSplash";var y=v;t.default=y},5170:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=u(n(9)),o=u(n(5246));function u(e){return e&&e.__esModule?e:{default:e}}function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function s(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).unmounting=!1,n.state={loaded:!1},n.initialize(),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidUpdate=function(e){var t=this;e.src!==this.props.src&&this.setState({loaded:!1},(function(){return t.initialize()}))},a.initialize=function(){var e,t=this;(e=this.props.src,new Promise((function(t,n){null==e&&n(new Error("No image src passed"));var r=new Image;r.src=e,r.onload=function(){return t(r)},r.onerror=function(e){return n(e)}}))).then((function(){t.unmounting||t.setState({loaded:!0})}))},a.componentWillUnmount=function(){this.unmounting=!0},a.render=function(){var e,t=this.props,n=t.className,r=t.src,a=t.alt,u=t.width,l=t.height,d=t.onLoad,f=t.style,p=this.state.loaded;return s("div",{className:n,style:c({},f,{width:u,height:l})},void 0,s("img",{className:(0,i.default)(o.default.image,(e={},e[o.default.loaded]=p,e)),width:u,height:l,src:r,alt:a,onLoad:d}))},r}(a.PureComponent);d.displayName="LazySplash",d.defaultProps={width:0,height:0,alt:""};var f=d;t.default=f},5171:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=c(n(9)),o=c(n(198)),u=n(122),l=n(1),s=c(n(5247));function c(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var p=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).anim=new o.default.Value(0),t.animate=function(e){o.default.spring(t.anim,{toValue:e,friction:10,tension:100}).start()},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){this.props.show&&this.animate(1)},a.componentDidUpdate=function(e){e.show!==this.props.show&&this.animate(this.props.show?1:0)},a.getAnimatedStyle=function(){var e=this.anim;return{opacity:e,transform:this.context.reducedMotion.enabled?void 0:[{translateY:e.interpolate({inputRange:[0,1],outputRange:["-100px","0px"]})},{translateZ:0}]}},a.render=function(){return f(o.default.a,{href:l.Routes.INDEX,target:"_blank",rel:"noopener",className:(0,i.default)(s.default.logo,this.props.className),style:this.getAnimatedStyle()})},r}(a.Component);t.default=p,p.displayName="AuthLogo",p.contextType=u.AccessibilityPreferencesContext},5172:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=v();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=E(n(9)),o=n(122),u=n(97),l=n(146),s=E(n(5173)),c=E(n(5175)),d=E(n(5178)),f=n(844),p=n(1),h=E(n(5248)),_=E(n(1392));function E(e){return e&&e.__esModule?e:{default:e}}function v(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return v=function(){return e},e}function y(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var m=(0,l.cssValueToNumber)(_.default.responsiveWidthMobile),g=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).width=0,n.height=0,n.children=[],n.ratio=0,n._lastTick=0,n._isPlaying=!1,n._reqAnimId=null,n.setCanvas=function(e){if(null!=e){n.canvas=e,n.canvasContext=n.canvas.getContext("2d");var t=window.devicePixelRatio||1,r=n.canvasContext.webkitBackingStorePixelRatio||n.canvasContext.mozBackingStorePixelRatio||n.canvasContext.msBackingStorePixelRatio||n.canvasContext.oBackingStorePixelRatio||n.canvasContext.backingStorePixelRatio||1;n.ratio=t/r,n.resizeCanvas()}},n.resizeCanvas=function(){n.width=window.innerWidth,n.height=window.innerHeight;var e=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),t=e.canvas,r=e.canvasContext,a=e.width,i=e.height,o=e.ratio;null!=t&&null!=r&&(t.width=a*o,t.height=i*o,t.style.width=a+"px",t.style.height=i+"px",r.scale(o,o)),a<=m?n.pause():n.play(),n.wave.resizeWave(),n.renderAnimation()},n.handleVisibilityChange=function(){document.hidden?n.delayedPause():n.play()},n.play=function(){clearTimeout(n._pauseTimeout),n._isPlaying||(n._isPlaying=!0,n.run())},n.pause=function(){clearTimeout(n._pauseTimeout),n._isPlaying=!1,window.cancelAnimationFrame(n._reqAnimId),n._reqAnimId=null,n.advanceTransitionalState()},n.delayedPause=function(){clearTimeout(n._pauseTimeout),n._pauseTimeout=setTimeout(n.pause,4e3)},n.updateWaveState=function(e){(0,n.props.updateWaveState)(e)},n.handleWaveEmphasize=function(){n.wave.emphasize()},n.run=function(){if(n._isPlaying){if(0===n._lastTick)return n._lastTick=Date.now(),void(n._reqAnimId=requestAnimationFrame(n.run));for(var e=Date.now(),t=Math.min((e-n._lastTick)/1e3,1/120*8);t>0;){var r=t<1/120?t:1/120;n.updateAnimation(r),t-=r}n.renderAnimation(),n._lastTick=e,n._reqAnimId=requestAnimationFrame(n.run)}},n.wave=new d.default(n.updateWaveState),n.children=[new s.default,new c.default,n.wave],n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=r.prototype;return l.componentDidMount=function(){this.initialize()},l.componentDidUpdate=function(e){var t=this.props.waveState;t===f.WaveStates.FILLING&&t!==e.waveState&&this.waveFill()},l.componentWillUnmount=function(){this.terminate()},l.initialize=function(){this.children.forEach((function(e){return e.initialize()})),this.bindEvents(),this.resizeCanvas(),document.hidden&&this.delayedPause()},l.terminate=function(){this.pause(),this.unbindEvents(),this.children.forEach((function(e){return e.terminate()}))},l.bindEvents=function(){window.addEventListener("resize",this.resizeCanvas,!1),window.addEventListener("blur",this.delayedPause,!1),window.addEventListener("focus",this.play,!1),document.addEventListener("visibilitychange",this.handleVisibilityChange,!1),u.ComponentDispatch.subscribe(p.ComponentActions.WAVE_EMPHASIZE,this.handleWaveEmphasize)},l.unbindEvents=function(){window.removeEventListener("resize",this.resizeCanvas,!1),window.removeEventListener("blur",this.delayedPause,!1),window.removeEventListener("focus",this.play,!1),document.removeEventListener("visibilitychange",this.handleVisibilityChange,!1),u.ComponentDispatch.unsubscribe(p.ComponentActions.WAVE_EMPHASIZE,this.handleWaveEmphasize)},l.advanceTransitionalState=function(){var e=this.props.waveState;e!==f.WaveStates.INITIAL&&e!==f.WaveStates.FILLING||this.updateWaveState(e+1)},l.waveFill=function(){this._isPlaying?this.children.forEach((function(e){return e.fill()})):this.updateWaveState(f.WaveStates.FILLED)},l.updateAnimation=function(e){this.children.forEach((function(t){return t.update(e)}))},l.renderAnimation=function(){var e=this.canvasContext;null!=e&&(e.fillStyle=p.Colors.PRIMARY_DARK_630,e.fillRect(0,0,this.width,this.height),this.children.forEach((function(t){return t.render(e)})))},l.render=function(){var e=this,t=this.props,n=t.waveState,r=t.hideFallback;return y(o.AccessibilityPreferencesContext.Consumer,{},void 0,(function(t){var o;return t.reducedMotion.enabled?y("div",{className:(0,i.default)(h.default.fallbackImage,(o={},o[h.default.visible]=!r&&n>=f.WaveStates.ENTERED,o))}):a.createElement("canvas",{className:h.default.canvas,ref:e.setCanvas})}))},r}(a.Component);g.displayName="WaveAnimation";var T=g;t.default=T},5173:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=n(1378),i=(r=n(5174))&&r.__esModule?r:{default:r};var o=function(){function e(){var e=this;this.img=null,this.loaded=!1,this.isFilled=!1,this.alpha=0,this.mx=0,this.my=0,this.x=0,this.y=0,this.velX=0,this.velY=0,this.targetX=40,this.targetY=40,this.spring={friction:60,tension:100},this.handleMouseMove=function(t){var n=t.clientX,r=t.clientY;e.targetX=n/window.innerWidth*20+20,e.targetY=r/window.innerWidth*20+20}}var t=e.prototype;return t.initialize=function(){var e=this;this.img=new Image,this.img.onload=function(){e.loaded=!0},this.img.src=i.default,this.bind()},t.bind=function(){window.addEventListener("mousemove",this.handleMouseMove,!1)},t.unbind=function(){window.removeEventListener("mousemove",this.handleMouseMove,!1)},t.terminate=function(){this.img=null,this.loaded=!1,this.isFilled=!1,this.alpha=0,this.unbind()},t.update=function(e){this.loaded&&(!this.isFilled&&this.alpha<1?this.alpha=Math.min(1,this.alpha+e):this.isFilled&&this.alpha>0&&(this.alpha=Math.max(0,this.alpha-3*e)),this.velX+=(0,a.applySpringForce)(this.targetX,this.x,this.velX,this.spring)*e,this.velY+=(0,a.applySpringForce)(this.targetY,this.y,this.velY,this.spring)*e,this.x+=this.velX*e,this.y+=this.velY*e)},t.render=function(e){var t=this.img;this.loaded&&null!=t&&(e.save(),e.globalCompositeOperation="source-atop",e.globalAlpha=this.alpha,e.drawImage(t,this.x+20,this.y+20),e.restore())},t.fill=function(){this.isFilled=!0},e}();o.displayName="Blobs";var u=o;t.default=u},5174:function(e,t,n){e.exports=n.p+"c8f0b54f79a9fd1ef60ad74c73a1ee1a.png"},5175:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(5176)),a=i(n(5177));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(){this.particles=[],this.wind=new a.default,this.alpha=0,this.isFilled=!1,this.loadInTimer=null}var t=e.prototype;return t.initialize=function(){var e=this;this.particles=[],this.wind.initialize(),this.loadInTimer=setTimeout((function(){for(var t=0;t<75;t++)e.particles.push(new r.default)}),250)},t.terminate=function(){this.particles=[],this.wind.terminate(),null!=this.loadInTimer&&clearTimeout(this.loadInTimer)},t.update=function(e){var t=this;0!==this.particles.length&&(!this.isFilled&&this.alpha<1?this.alpha=Math.min(1,this.alpha+e):this.isFilled&&this.alpha>0&&(this.alpha=Math.max(0,this.alpha-3*e)),this.wind.update(),this.particles.forEach((function(n){return n.update(10*t.wind.forceX*e,10*Math.min(t.wind.forceY,-.001)*e-.1)})))},t.render=function(e){var t=this;0!==this.particles.length&&(e.save(),e.globalCompositeOperation="source-atop",this.particles.forEach((function(n){return n.render(e,t.alpha)})),e.restore())},t.fill=function(){this.isFilled=!0},e}();o.displayName="Particles";var u=o;t.default=u},5176:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(1378),a=n(844),i=["#7d8187","#18191c","#8fa2df","#4f545c"],o=function(){function e(){this.size=(0,r.randomNumber)(2,3),this.depth=(0,r.randomNumber)(1,4),this.positionMultiplier=this.depth/4,this.color=i[4-this.depth],this.offscreenX=a.MAX_RADIUS+this.size,this.offscreenY=a.MAX_RADIUS+this.size,this.x=(0,r.randomNumber)(-this.size,this.offscreenX),this.y=(0,r.randomNumber)(-this.size,this.offscreenY)}var t=e.prototype;return t.checkBounds=function(){this.x>this.offscreenX?this.x=-this.size:this.y>this.offscreenY?this.y=-this.size:this.x<-this.size?this.x=this.offscreenX:this.y<-this.size&&(this.y=this.offscreenY)},t.update=function(e,t){this.checkBounds(),this.y+=t*this.positionMultiplier,this.x+=e*this.positionMultiplier},t.render=function(e,t){e.beginPath(),e.globalAlpha=t*this.depth/4,e.arc(this.x,this.y,this.size,0,a.TWO_PI,!0),e.fillStyle=this.color,e.fill(),e.globalAlpha=1},e}();o.displayName="Particle";var u=o;t.default=u},5177:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function r(e,t){return Math.max(Math.min((e-t)/30,1),-1)}var a=function(){function e(){var e=this;this.resistance=.98,this.px=0,this.py=0,this.x=0,this.y=0,this.forceX=0,this.forceY=0,this.handleMouseMove=function(t){var n=t.clientX,r=t.clientY;e.x=n,e.y=r}}var t=e.prototype;return t.initialize=function(){window.addEventListener("mousemove",this.handleMouseMove)},t.terminate=function(){window.removeEventListener("mousemove",this.handleMouseMove)},t.update=function(){this.x!==this.px&&this.y!==this.py&&(this.forceX+=r(this.x,this.px),this.forceY+=r(this.y,this.py),this.px=this.x,this.py=this.y),0!==this.forceX&&(this.forceX=this.forceX*this.resistance),0!==this.forceY&&(this.forceY=this.forceY*this.resistance)},t.render=function(){},e}();a.displayName="Wind";var i=a;t.default=i},5178:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(808)),a=n(146),i=s(n(5179)),o=n(1378),u=n(844),l=s(n(1392));function s(e){return e&&e.__esModule?e:{default:e}}var c=(0,a.cssValueToNumber)(l.default.responsiveWidthMobile);function d(e,t,n,r){return t*(n/r)+e}function f(){return Math.min(Math.max(Math.min(.8*window.innerWidth,.8*window.innerHeight),u.MIN_RADIUS),u.MAX_RADIUS)}var p=function(){function e(e){var t,n=this;this.points=[],this.hasEntered=!1,this.isFilling=!1,this._resizeWave=function(){var e=f();n.points.forEach((function(t,n){var r=e*Math.cos(u.TWO_PI*d(0,.25,n,15))-40,a=e*Math.sin(u.TWO_PI*d(0,.25,n,15))-40;0!==n?a+=(0,o.randomNumber)(0,30)-15:r+=(0,o.randomNumber)(0,30)-15,t.targetX=r,t.targetY=a,t.angle=Math.atan2(a,r)}))},this.resizeWave=(0,r.default)(this._resizeWave,200),this.updateWaveState=e,this.hasEntered=!1;for(var a=0;a<=15;a++)this.points.push(new i.default((t=a,Math.floor(7.5-Math.floor(Math.abs(t-7.5))))))}var t=e.prototype;return t.initialize=function(){this._resizeWave()},t.emphasize=function(){this.points.forEach((function(e){return e.speedUp=1}))},t.terminate=function(){this.points=[]},t.update=function(e){0!==this.points.length&&(this.points.forEach((function(t){return t.update(Math.min(e,1/60))})),this.hasEntered||this.points[0].x>c&&(this.hasEntered=!0,this.updateWaveState(u.WaveStates.ENTERED)),this.isFilling&&this.points[0].x>this.points[0].targetX&&(this.isFilling=!1,this.updateWaveState(u.WaveStates.FILLED)))},t.render=function(e){if(0!==this.points.length){var t=this.points,n=t[0],r=t.slice(1);e.save(),e.beginPath(),e.moveTo(n.x,n.y),r.forEach((function(t,n){if(null==r[n+1])e.quadraticCurveTo(t.x,t.y,t.x,t.y);else{var a=(t.x+r[n+1].x)/2,i=(t.y+r[n+1].y)/2;e.quadraticCurveTo(t.x,t.y,a,i)}})),e.lineTo(0,0),e.closePath(),e.fillStyle="#000",e.globalCompositeOperation="destination-in",e.fill(),e.restore()}},t.fill=function(){var e=this,t=Math.sqrt(window.innerWidth*window.innerWidth+window.innerHeight*window.innerHeight)+100,n=f()-140,r=function(e,t,n,r){e.targetX=t*Math.cos(u.TWO_PI*d(0,.25,n,15))-40,e.targetY=t*Math.sin(u.TWO_PI*d(0,.25,n,15))-40,r&&(e.targetX+=(0,o.randomNumber)(0,30)-15,e.targetY+=(0,o.randomNumber)(0,30)-15,e.speedUp=3,e.spring.tension=u.POINT_TENSION_DEFAULT*Math.random()*.5+u.POINT_TENSION_DEFAULT)};this.points.forEach((function(e,t){return r(e,n,t,!0)})),setTimeout((function(){e.points.forEach((function(e,n){r(e,t,n,!1);var a=1-e.index/7.5;e.spring.friction+=e.spring.friction+e.spring.friction*a,e.spring.tension=.7*u.POINT_TENSION_DEFAULT+80*Math.random(),e.waveRange=2*e.waveRange})),e.isFilling=!0,e.updateWaveState(u.WaveStates.FILLING)}),250)},e}();p.displayName="Wave";var h=p;t.default=h},5179:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(1378),a=n(844),i=2.15*Math.cos(Math.PI),o=function(){function e(e){this.x=-40,this.y=-40,this.targetX=0,this.targetY=0,this.oscillate=!0,this.velX=0,this.velY=0,this.angle=0,this.speedUp=1.5,this.waveRange=60,this.spring={friction:15,tension:a.POINT_TENSION_DEFAULT},this.index=e,this.spring.tension=a.POINT_TENSION_DEFAULT*Math.max(.1,e/7)+a.POINT_TENSION_DEFAULT,this.count=i*e}var t=e.prototype;return t.updateStatic=function(){this.targetX=this.targetX+30*Math.cos(this.angle)*Math.sin(this.count),this.targetY=this.targetY+30*Math.sin(this.angle)*Math.sin(this.count),this.x=this.targetX,this.y=this.targetY},t.update=function(e){var t,n;if(this.speedUp>0?(this.speedUp=Math.max(0,this.speedUp-e),this.count+=e*(10*Math.min(this.speedUp,1)+.4)):this.count+=.4*e,t=(0,r.applySpringForce)(this.targetX,this.x,this.velX,this.spring),n=(0,r.applySpringForce)(this.targetY,this.y,this.velY,this.spring),this.velX+=t*e,this.velY+=n*e,this.oscillate){var a=this.targetX+this.waveRange*Math.cos(this.angle)*Math.sin(this.count),i=this.targetY+this.waveRange*Math.sin(this.angle)*Math.sin(this.count);t=(0,r.applySpringForce)(a,this.x,this.velX,this.spring),n=(0,r.applySpringForce)(i,this.y,this.velY,this.spring),this.velX+=t*e,this.velY+=n*e}this.x+=this.velX*e,this.y+=this.velY*e},t.render=function(e){e.fillStyle="#fff",e.fillRect(this.x,this.y,4,4)},e}();o.displayName="Point";var u=o;t.default=u},5180:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,n(348).createExperiment)({kind:"user",id:"2020-10_phone_login",label:"Phone Login",defaultConfig:{phoneLoginEnabled:!1},treatments:[{id:1,label:"Allow users to login with their phone number.",config:{phoneLoginEnabled:!0}}]});t.default=r},5192:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(5)),a=o(n(3)),i=n(5193);n(1);function o(e){return e&&e.__esModule?e:{default:e}}var u=(0,i.getDefaultCountryCode)();var l=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(e){null!=e&&(u=e.countryCode)},a.getState=function(){return{countryCode:u}},a.getCountryCode=function(){return u},r}(r.default.PersistedStore);l.persistKey="PhoneStore";var s=new l(a.default,{PHONE_SET_COUNTRY_CODE:function(e){var t=e.countryCode;u=t}});t.default=s},5193:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCountryCodesByCountryName=u,t.getDefaultCountryCode=function(){var e=u(i.PHONE_DEFAULT_COUNTRY_CODE_NAME);return(0,r.default)(e,"Default country code cannot be missing."),e};var r=o(n(18)),a=o(n(1434)),i=n(4937);function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return a.default.find((function(t){return t.name===e}))}},5194:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=_;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=f(n(9)),o=f(n(153)),u=n(121),l=n(4958),s=f(n(5195)),c=f(n(5253)),d=f(n(1382));function f(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function _(e){var t,n=e.alpha2,r=e.countryCode,f=e.forceMode,p=e.label,_=e.error,E=e.className,v=e.required,y=e.value,m=e.setRef,g=e.placeholder,T=e.autoFocus,A=e.maxLength,I=e.spellCheck,S=e.autoComplete,O=e.onChange,C=e.inputClassName,N=a.useState(!1),b=N[0],M=N[1],P=(0,l.shouldShowCountryCodeSelector)(f,y);return h(u.FormItem,{title:p,error:_,className:E,required:v},void 0,h("div",{className:(0,i.default)(d.default.input,c.default.input,C,(t={},t[d.default.error]=null!=_,t[d.default.focused]=b,t))},void 0,h(s.default,{show:P,alpha2:n,countryCode:r}),h(o.default,{name:"email",type:f===l.PhoneOrEmailSelectorForceMode.EMAIL?"email":"text",value:y,inputRef:m,placeholder:g,"aria-label":p,onChange:function(e){var t=(0,l.shouldShowCountryCodeSelector)(f,e)?r:"";O(e,t)},autoComplete:S,autoFocus:T,maxLength:A,spellCheck:I,className:c.default.inputWrapper,inputClassName:c.default.inputField,onFocus:function(){return M(!0)},onBlur:function(){return M(!1)}})))}_.displayName="PhoneOrEmailInput"},5195:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=m;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=E();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=_(n(9)),o=n(220),u=n(5),l=_(n(1434)),s=_(n(102)),c=_(n(116)),d=_(n(5049)),f=_(n(5102)),p=_(n(5111)),h=_(n(5252));function _(e){return e&&e.__esModule?e:{default:e}}function E(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return E=function(){return e},e}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function m(e){var t=e.show,n=e.alpha2,r=e.countryCode,_=(0,u.useStateFromStores)([s.default],(function(){return s.default.useReducedMotion})),E=a.useRef(null),m=a.useState(0),g=m[0],T=m[1],A=a.useState(!1),I=A[0],S=A[1];a.useEffect((function(){function e(){var e,n;T(t&&null!==(e=null===(n=E.current)||void 0===n?void 0:n.getBoundingClientRect().width)&&void 0!==e?e:0)}return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[t,n,r]);var O=(0,o.useSpring)({width:g+"px",immediate:_,onStart:function(){S(!0)},onRest:function(){S(!1)}});return y(d.default,{position:d.default.Positions.TOP,renderPopout:function(e){return y(p.default,{className:h.default.popout,onClick:function(t){return function(e,t){f.default.setCountryCode(l.default[e]),t()}(t,e.closePopout)}})}},void 0,(function(e){var u;return y("div",{className:(0,i.default)(h.default.outerContainer,(u={},u[h.default.hidden]=!(t||I),u))},void 0,y(o.animated.div,{className:h.default.container,style:O},void 0,a.createElement("div",{className:h.default.innerContainer,ref:E},a.createElement(c.default,v({},e,{className:h.default.countryCode}),n," ",r),y("div",{className:h.default.separator}))))}))}m.displayName="CountrySelector"},5197:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e){var t=o.useState(0),n=t[0],r=t[1],i=o.useState(!1),l=i[0],s=i[1],c=o.useState({step:a.INITIALIZING}),f=c[0],p=c[1],h=(0,d.default)(),_=o.useMemo((function(){return new u.default(1500,3e4)}),[]),E=o.useRef();E.current=o.useCallback((function(){p({step:a.INITIALIZING}),h?r((function(e){return e+1})):(P.info("document is not visible, will defer reconnection when document becomes visible."),s(!0))}),[p,r,h,s]);var v=o.useCallback((function(){!function(e){var t=e.current;if(void 0===t)throw new Error("tried to unwrap an undefined value.");return t}(E)()}),[E]);return o.useEffect((function(){h&&l&&f.step===a.INITIALIZING&&(P.info("reconnecting, now that document is visible"),s(!1),r((function(e){return e+1})))}),[f,h,l,s]),o.useEffect((function(){var t=Date.now(),n="wss:"+window.GLOBAL_ENV.REMOTE_AUTH_ENDPOINT+"/?v=1",r=new WebSocket(n);P.info("[0ms] connecting to "+n);var i=function(e){return P.info("["+(Date.now()-t)+"ms] "+e)},o=null,u=null,l=null,s=null,c=!0;function d(){if(null!=o)return o;throw new Error("No key pair set")}var f=function(){p({step:a.INITIALIZING}),_.pending||_.fail(v)},h=function(){c?(c=!1,r.send(JSON.stringify({op:"heartbeat"}))):(i("heartbeat timeout, reconnecting."),r.close(),f())};r.onmessage=function(){var t=b(regeneratorRuntime.mark((function t(n){var o,u,f,E,T,A,I,S,O,C;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=n.data,u=JSON.parse(o),t.t0=u.op,t.next="nonce_proof"===t.t0?5:"pending_remote_init"===t.t0?12:"pending_finish"===t.t0?22:"finish"===t.t0?30:"cancel"===t.t0?39:"hello"===t.t0?42:"heartbeat_ack"===t.t0?46:47;break;case 5:return f=u.encrypted_nonce,t.next=8,(0,m.computeNonceProof)(d(),f);case 8:return E=t.sent,i("computed nonce proof"),r.send(JSON.stringify({op:"nonce_proof",proof:E})),t.abrupt("return");case 12:return _.succeed(),y.ComponentDispatch.dispatch(g.ComponentActions.WAVE_EMPHASIZE),t.next=16,(0,m.publicKeyFingerprint)(d());case 16:if((T=t.sent)===u.fingerprint){t.next=19;break}throw new Error("bad fingerprint "+T+" !== "+u.fingerprint);case 19:return i("handshake complete awaiting remote auth."),p({step:a.PENDING_REMOTE_INIT,fingerprint:T}),t.abrupt("return");case 22:return y.ComponentDispatch.dispatch(g.ComponentActions.WAVE_EMPHASIZE),i("remote auth handshake started, awaiting finish/cancel."),A=u.encrypted_user_payload,t.next=27,(0,m.decodeEncodedUserRecord)(d(),A);case 27:return I=t.sent,p({step:a.PENDING_FINISH,user:I}),t.abrupt("return");case 30:return y.ComponentDispatch.dispatch(g.ComponentActions.WAVE_EMPHASIZE),i("remote auth handshake finished."),S=u.encrypted_token,p({step:a.FINISH}),t.next=36,(0,m.decryptEncodedCiphertext)(d(),S);case 36:return O=t.sent,e(O),t.abrupt("return");case 39:return i("remote auth handshake cancelled."),v(),t.abrupt("return");case 42:return i("got hello, auth timeout="+u.timeout_ms+"ms"),C=u.heartbeat_interval,s=setTimeout((function(){s=null,h(),l=setInterval(h,C)}),Math.floor(C*Math.random())),t.abrupt("return");case 46:c=!0;case 47:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.onopen=b(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.generateRsaKeyPair)();case 2:return o=e.sent,e.next=5,(0,m.serializePublicKey)(o);case 5:return u=e.sent,e.next=8,(0,m.publicKeyFingerprint)(o);case 8:t=e.sent,i("connected, handshaking with fingerprint: "+t),r.send(JSON.stringify({op:"init",encoded_public_key:u}));case 11:case"end":return e.stop()}}),e)}))),r.onclose=function(e){i("disconnected, code: "+e.code+" "+e.reason),f()},r.onerror=function(e){i("disconnected, error: "+e),f()};return function(){i("cleaning up"),r.onopen=function(){return null},r.onmessage=function(){return null},r.onclose=function(){return null},r.onerror=function(){return null},r.close(1e3),_.cancel(),null!=s&&clearTimeout(s),null!=l&&clearInterval(l)}}),[v,e,_,n]),{state:f,cancel:v}}(e.authTokenCallback),n=t.state,r=t.cancel,l=function(e){switch(e){case a.INITIALIZING:case a.PENDING_REMOTE_INIT:return i.QR_CODE;case a.PENDING_FINISH:case a.FINISH:return i.CONFIRM}}(n.step);return o.createElement(o.Fragment,null,C("div",{className:A.default.verticalSeparator}),C(p.default,{fillParent:!0,className:A.default.qrLogin,step:l,steps:[i.QR_CODE,i.CONFIRM]},void 0,C("div",{className:A.default.qrLoginInner},void 0,C(D,{state:n,cancel:r}))))};var r,a,i,o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=O();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=S(n(119)),l=n(109),s=S(n(5162)),c=S(n(5121)),d=S(n(5198)),f=S(n(25)),p=S(n(1373)),h=S(n(47)),_=S(n(210)),E=n(549),v=S(n(1408)),y=n(97),m=n(5199),g=n(1),T=S(n(6)),A=S(n(5256)),I=S(n(829));function S(e){return e&&e.__esModule?e:{default:e}}function O(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return O=function(){return e},e}function C(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function N(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){N(i,r,a,o,u,"next",e)}function u(e){N(i,r,a,o,u,"throw",e)}o(void 0)}))}}!function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.PENDING_REMOTE_INIT=1]="PENDING_REMOTE_INIT",e[e.PENDING_FINISH=2]="PENDING_FINISH",e[e.FINISH=3]="FINISH"}(a||(a={})),function(e){e[e.QR_CODE=0]="QR_CODE",e[e.CONFIRM=1]="CONFIRM"}(i||(i={}));var M=n(5200),P=new f.default("LoginQRSocket");var R=C("img",{src:M,alt:""});function L(e){var t=e.text,n=void 0===t?"":t,r=o.useState(!1),a=r[0],i=r[1];return o.useEffect((function(){var e=new Image;e.src=M,e.onload=function(){return i(!0)},e.onerror=function(){return i(!0)}}),[]),C("div",{className:A.default.qrCodeContainer},void 0,""!==n&&a?o.createElement(o.Fragment,null,C(s.default,{className:A.default.qrCode,width:160,height:160,text:n}),C("div",{className:A.default.qrCodeOverlay},void 0,R)):C("div",{className:A.default.qrCodeOverlay},void 0,C(_.default,{className:A.default.qrCode,type:_.default.Type.WANDERING_CUBES})))}function D(e){var t=e.state,n=e.cancel;switch(t.step){case a.INITIALIZING:case a.PENDING_REMOTE_INIT:return o.createElement(o.Fragment,null,C(L,{text:t.step===a.PENDING_REMOTE_INIT?"https://discord.com/ra/"+t.fingerprint:""}),C(E.Title,{className:I.default.marginBottom8},void 0,T.default.Messages.LOGIN_WITH_QR),C(E.SubTitle,{},void 0,T.default.Messages.LOGIN_WITH_QR_DESCRIPTION.format()));case a.PENDING_FINISH:var r=t.user;return o.createElement(o.Fragment,null,C(c.default,{className:A.default.qrAvatar,user:r,size:v.default.Sizes.SIZE_120,isMobile:!0,status:l.StatusTypes.ONLINE}),C(E.Title,{className:I.default.marginBottom8},void 0,T.default.Messages.CONFIRM_QR_CHECK_YOUR_PHONE),C(E.SubTitle,{},void 0,T.default.Messages.LOGIN_AS.format({username:r.username+"#"+r.discriminator})),C(h.default,{look:h.default.Looks.BLANK,size:h.default.Sizes.MIN,onClick:n,className:A.default.startOverButton},void 0,T.default.Messages.QR_CODE_LOGIN_START_OVER));case a.FINISH:return C(_.default,{type:_.default.Type.WANDERING_CUBES})}}L.displayName="QrCodeWithOverlay"},5198:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,r.useState)(a()),t=e[0],n=e[1];return(0,r.useEffect)((function(){function e(){n(a())}return window.addEventListener("visibilitychange",e),function(){window.removeEventListener("visibilitychange",e)}}),[n]),t};var r=n(0);function a(){return"undefined"==typeof document||"visible"===document.visibilityState}},5199:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateRsaKeyPair=function(){return window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["decrypt"])},t.serializePublicKey=function(e){return u.apply(this,arguments)},t.publicKeyFingerprint=function(e){return l.apply(this,arguments)},t.sha256Digest=s,t.decryptEncodedCiphertext=p,t.computeNonceProof=function(e,t){return _.apply(this,arguments)},t.decodeEncodedUserRecord=function(e,t){return E.apply(this,arguments)};var r,a=(r=n(147))&&r.__esModule?r:{default:r};function i(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function u(e){i(o,r,a,u,l,"next",e)}function l(e){i(o,r,a,u,l,"throw",e)}u(void 0)}))}}function u(){return(u=o(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey("spki",t.publicKey);case 2:return n=e.sent,e.abrupt("return",btoa(String.fromCharCode.apply(String,new Uint8Array(n))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=o(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey("spki",t.publicKey);case 2:return n=e.sent,e.abrupt("return",s(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return c.apply(this,arguments)}function c(){return(c=o(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.digest("SHA-256",t);case 2:return n=e.sent,e.abrupt("return",btoa(String.fromCharCode.apply(String,new Uint8Array(n))).replace(/\//g,"_").replace(/\+/g,"-").replace(/={1,2}$/,""));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}function f(e,t){return window.crypto.subtle.decrypt({name:"RSA-OAEP"},e.privateKey,t)}function p(e,t){return h.apply(this,arguments)}function h(){return(h=o(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new TextDecoder,e.next=3,f(t,d(n));case 3:return a=e.sent,e.abrupt("return",r.decode(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=o(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t,d(n));case 2:return r=e.sent,e.abrupt("return",s(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=o(regeneratorRuntime.mark((function e(t,n){var r,i,o,u,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t,n);case 2:if(n=e.sent,r=/^(\d+):(\d{4}):([a-zA-Z0-9_]+):(.*)$/,null!=(i=n.match(r))){e.next=7;break}throw new Error("Invalid encoded user record.");case 7:return o=i[1],u=i[2],l=i[3],s=i[4],e.abrupt("return",new a.default({id:o,discriminator:u,avatar:"0"===l?null:l,username:s}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},5200:function(e,t,n){e.exports=n.p+"36d4b341723daffd4a372e1b19591da1.png"},5302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=f(n(808)),o=f(n(198)),u=n(122),l=n(146),s=n(334),c=f(n(5322)),d=f(n(1392));function f(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var E=(0,l.cssValueToNumber)(d.default.responsiveWidthMobile),v=0,y=1,m={friction:10,tension:130};var g=function(e){return function(t){var n,r;function l(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).anim=new o.default.Value(v),e.state={shouldAnimate:!s.isMobile},e.handleResize=function(){var t=window.innerWidth>E;!e.state.shouldAnimate&&t&&e.anim.setValue(y),e.setState({shouldAnimate:t})},e.handleResizeDebounced=(0,i.default)(e.handleResize,60),e}r=t,(n=l).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var d=l.prototype;return d.componentDidMount=function(){s.isMobile||(window.addEventListener("resize",this.handleResizeDebounced),this.handleResize())},d.componentWillUnmount=function(){clearTimeout(this.timeout),window.removeEventListener("resize",this.handleResizeDebounced)},d.componentWillAppear=function(e){this.state.shouldAnimate?this.animateTo(y,e):e()},d.componentWillEnter=function(e){var t=this;this.state.shouldAnimate?(clearTimeout(this.timeout),this.timeout=setTimeout((function(){return t.animateTo(y,e)}),40)):e()},d.componentWillLeave=function(e){this.state.shouldAnimate?this.animateTo(v,e):e()},d.animateTo=function(e,t){o.default.spring(this.anim,_({toValue:e},m)).start(t)},d.getAnimatedStyle=function(e){return this.state.shouldAnimate?{opacity:this.anim,transform:e?void 0:[{scale:this.anim.interpolate({inputRange:[0,1],outputRange:[1.05,1]})},{translateY:this.anim.interpolate({inputRange:[0,1],outputRange:["-70px","0px"]})},{translateZ:0}]}:null},d.render=function(){var t=this;return h(u.AccessibilityPreferencesContext.Consumer,{},void 0,(function(n){var r=n.reducedMotion;return h(o.default.div,{className:c.default.wrapper,style:t.getAnimatedStyle(r.enabled)},void 0,a.createElement(e,t.props))}))},l}(a.Component)};t.default=g},5303:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=E();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=_(n(9)),o=_(n(5304)),u=_(n(5169)),l=n(844),s=_(n(14)),c=_(n(69)),d=n(146),f=n(334),p=n(1),h=_(n(5323));function _(e){return e&&e.__esModule?e:{default:e}}function E(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return E=function(){return e},e}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var y=(0,d.cssValueToNumber)(h.default.responsiveWidthMobile),m=[p.Routes.LOGIN,p.Routes.LOGIN_HANDOFF,p.Routes.REGISTER,p.Routes.INVITE(""),p.Routes.GIFT_CODE(""),p.Routes.GUILD_TEMPLATE_LOGIN(""),p.Routes.GUILD_TEMPLATE(""),p.Routes.DISABLE_EMAIL_NOTIFICATIONS,p.Routes.BILLING_PREMIUM_SUBSCRIBE,p.Routes.BILLING_PAYMENT_SOURCES_CREATE,p.Routes.BILLING_PAYMENTS,p.Routes.BILLING_PREMIUM_SWITCH_PLAN,p.Routes.BILLING_GUILD_SUBSCRIPTIONS_PURCHASE,p.Routes.VERIFY,p.Routes.AUTHORIZE_IP,p.Routes.RESET,p.Routes.HANDOFF],g=[p.Routes.APP,p.Routes.ACTIVITY,p.Routes.APPLICATION_LIBRARY,p.Routes.APPLICATION_STORE,"/channels/","/welcome/","/settings/",p.Routes.USERS("")];function T(e){return m.some((function(t){return e.startsWith(t)}))}var A=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).handleResize=function(){n.setState({isMobileWidth:window.innerWidth<=y})},n.updateWaveState=function(e){var t=n.state.waveState;n.setState({waveState:Math.max(t,e)})},n.transitionTo=function(e,t){var r=n.state.waveState;T(e)?c.default.transitionTo(e,t):n.setState({route:e,extra:t,waveState:Math.max(r,l.WaveStates.FILLING)})},n.replaceWith=function(e){var t=n.state.waveState;T(e)?c.default.replaceWith(e):n.setState({route:e,replaceWith:!0,waveState:Math.max(t,l.WaveStates.FILLING)})},n.state={waveState:l.WaveStates.INITIAL,extra:{},replaceWith:!1,route:null,isMobileWidth:window.innerWidth<=y},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var d=r.prototype;return d.componentDidMount=function(){window.addEventListener("resize",this.handleResize)},d.componentWillUnmount=function(){window.removeEventListener("resize",this.handleResize)},d.componentDidUpdate=function(e,t){var n=this.state,r=n.waveState,a=n.replaceWith,i=n.extra,o=n.route;if(n.isMobileWidth===t.isMobileWidth&&r===l.WaveStates.FILLED&&r!==t.waveState&&null!=o){if(function(e){return g.some((function(t){return e.startsWith(t)}))}(o))return a?c.default.replaceWith(o):c.default.transitionTo(o,i);window.location=o}},d.mobileTransitionTo=function(e,t){if(T(e))c.default.transitionTo(e,t);else{var n=null!=t&&null!=t.search?t.search:null;window.location=null==n?e:e+"?"+n}},d.mobileReplaceWith=function(e){T(e)?c.default.replaceWith(e):window.location=e},d.renderDefault=function(){var e,t=this,n=this.props,r=n.splash,c=n.children,d=this.state,f=d.waveState,p=null;return null==d.route&&(p=a.Children.map(c,(function(e){return a.cloneElement(e,{transitionTo:t.transitionTo,replaceWith:t.replaceWith})}))),v(u.default,{className:(0,i.default)(h.default.splashBackground,(e={},e[h.default.loggingIn]=f>=l.WaveStates.FILLING,e)),splash:r,waveState:f,showLogo:!s.default.isWindows(),updateWaveState:this.updateWaveState,logoClassName:h.default.logo},void 0,v(o.default,{component:a.Fragment},void 0,p))},d.renderMobile=function(){var e=this;return v(o.default,{component:a.Fragment},void 0,a.Children.map(this.props.children,(function(t){return a.cloneElement(t,{transitionTo:e.mobileTransitionTo,replaceWith:e.mobileReplaceWith})})))},d.render=function(){var e=this.state.isMobileWidth,t=navigator.userAgent.includes("GameLauncher");return e||f.isMobile||t?this.renderMobile():this.renderDefault()},r}(a.Component);A.displayName="AuthWrapper";var I=A;t.default=I},5304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=n(221),o=(r=n(332))&&r.__esModule?r:{default:r};function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var c=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.children,n=e.location,r=e.history,u=e.staticContext,c=(e.match,s(e,["children","location","history","staticContext","match"])),d=null,f=null;return a.Children.forEach(t,(function(e){if(null==d&&a.isValidElement(e)){var t=e.props,o=t.component,c=t.render,p=s(t,["component","render"]),h=p.path||p.from;if(null==(d=null!=h?(0,i.matchPath)(n.pathname,l({},p,{path:h})):null))return;p=l({},p,{key:h,location:n,match:d,history:r,staticContext:u}),null!=o?f=a.createElement(o,p):null!=c&&(f=c(p))}})),a.createElement(o.default,c,f)},r}(a.Component);c.displayName="TransitionSwitch";var d=(0,i.withRouter)(c);t.default=d},5310:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),a=n(1414),i=c(n(5)),o=c(n(282)),u=n(813),l=c(n(20)),s=c(n(1452));function c(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}var f=function(e){var t,n;function i(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={isLogoutRequested:t.props.isAuthenticated},t}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=i.prototype;return l.handleHandoff=function(e,t){this.setState({isLogoutRequested:!1},(function(){(0,u.handoffFromApp)(e,t)}))},l.componentDidMount=function(){var e=this,t=this.props.location;if(null!=t){var n=(0,a.parse)(t.search),r=n.handoff_key,i=n.handoff_token;null!=r&&null!=i&&(this.state.isLogoutRequested?o.default.logout(null).finally((function(){e.handleHandoff(r,i)})):this.handleHandoff(r,i))}},l.render=function(){return this.state.isLogoutRequested?null:r.createElement(s.default,this.props)},i}(r.PureComponent);f.displayName="LoginHandoff",f.defaultProps={transitionTo:function(t){return e.location.assign(t)}};var p=i.default.connectStores([l.default],(function(){return{isAuthenticated:l.default.isAuthenticated()}}))(f);t.default=p}).call(this,n(32))},553:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.permissionOverwritesForRoles=function(e,t,n,r){void 0===r&&(r=!1);var o=[];(n.length>0||r)&&o.push(function(e,t,n){var r=c.default.NONE;((0,u.isGuildSelectableChannelType)(t)||t===_)&&(r=a.default.add(r,d.Permissions.VIEW_CHANNEL));E(t,h)&&(r=a.default.add(r,d.Permissions.VIEW_CHANNEL),r=a.default.add(r,d.Permissions.CONNECT));return{id:e,type:n,allow:c.default.NONE,deny:r}}(e,t,i.PermissionOverwriteType.ROLE));return n.forEach((function(e){o.push(v(e,t,i.PermissionOverwriteType.ROLE))})),o},t.permissionOverwriteForUser=function(e,t){return v(e,t,i.PermissionOverwriteType.MEMBER)},t.permissionOverwriteForRole=function(e,t){return v(e,t,i.PermissionOverwriteType.ROLE)},t.permissionOverwritesForAnnouncement=function(e){return[{id:e,type:i.PermissionOverwriteType.ROLE,deny:d.Permissions.SEND_MESSAGES,allow:c.default.NONE}]},t.isChannelFull=function(e,t,n){var r,a,i=e.getGuildId(),o=null!==(r=null===(a=n.getGuild(i))||void 0===a?void 0:a.maxVideoChannelUsers)&&void 0!==r?r:-1,u=t.getVoiceStatesForChannel(e).length,l=s.default.can(d.Permissions.MOVE_MEMBERS,e)&&s.default.can(d.Permissions.CONNECT,e),c=null!=i&&t.hasVideo(e)&&o>0&&u>=o+(l?1:0),f=e.userLimit>0&&u>=e.userLimit;return c||f&&!l},t.getFlattenedChannelList=function(e,t,n){void 0===n&&(n=function(){return!0});return(0,r.default)(e).map((function(e){return"null"===e.channel.id?t[e.channel.id]:[e,t[e.channel.id]]})).flattenDeep().filter(n).value()},t.getBitrateLimit=function(e){return null!=e?Math.max(e.hasFeature(d.GuildFeatures.VIP_REGIONS)?d.PremiumGuildLimits[d.PremiumGuildTiers.TIER_3].bitrate:d.BITRATE_MAX,d.PremiumGuildLimits[e.premiumTier].bitrate):d.BITRATE_MAX},t.shouldRenderVoiceUserSummary=function(e,t,n,r){if(!l.default.isCollapsed(e))return!1;var a=t[e];if(null==a||0===a.length)return!1;return a.some((function(e){var t=e.channel,a=r[t.id];return t.id!==n&&a&&a.length>0}))},t.computeSummarizedVoiceUsers=function(e,t,n){var r=[];return e.forEach((function(e){var a=e.channel,i=n[a.id];a.id!==t&&i&&i.forEach((function(e){return r.push(e.user)}))})),r},t.channelTypeString=function(e){switch(e.type){case d.ChannelTypes.DM:return f.default.Messages.DM;case d.ChannelTypes.GROUP_DM:return f.default.Messages.GROUP_DM;case d.ChannelTypes.GUILD_TEXT:return f.default.Messages.TEXT_CHANNEL;case d.ChannelTypes.GUILD_VOICE:return f.default.Messages.VOICE_CHANNEL;case d.ChannelTypes.GUILD_ANNOUNCEMENT:return f.default.Messages.NEWS_CHANNEL;case d.ChannelTypes.GUILD_STORE:return f.default.Messages.STORE_CHANNEL;default:return null}},Object.defineProperty(t,"sanitizeGuildTextChannelName",{enumerable:!0,get:function(){return o.default}});var r=p(n(7)),a=p(n(108)),i=n(809),o=p(n(4848)),u=n(86),l=p(n(1422)),s=p(n(99)),c=p(n(273)),d=n(1),f=p(n(6));function p(e){return e&&e.__esModule?e:{default:e}}var h=d.ChannelTypes.GUILD_VOICE,_=d.ChannelTypes.GUILD_CATEGORY;function E(e,t){return e===t||e===_}function v(e,t,n){var r=c.default.NONE;return((0,u.isGuildSelectableChannelType)(t)||t===_)&&(r=a.default.add(r,d.Permissions.VIEW_CHANNEL)),E(t,h)&&(r=a.default.add(r,d.Permissions.VIEW_CHANNEL),r=a.default.add(r,d.Permissions.CONNECT)),{id:e,type:n,deny:c.default.NONE,allow:r}}},555:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=T(n(5)),a=T(n(26)),i=T(n(3)),o=n(860),u=n(1462),l=T(n(86)),s=n(560),c=T(n(14)),d=T(n(45)),f=T(n(29)),p=T(n(197)),h=T(n(924)),_=T(n(271)),E=T(n(834)),v=T(n(191)),y=T(n(1374)),m=T(n(20)),g=n(1);function T(e){return e&&e.__esModule?e:{default:e}}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var S={selectedGuildId:null,selectedChannelId:null,displayUserMode:g.OverlayDisplayUsers.ALWAYS,displayNameMode:g.OverlayDisplayNames.ALWAYS,avatarSizeMode:g.OverlayAvatarSizes.LARGE,notificationPositionMode:g.OverlayNotificationPositions.TOP_LEFT,textChatNotifications:g.OverlayNotificationTextChatTypes.ENABLED,disableExternalLinkAlert:!1,disablePinTutorial:!1,textWidgetOpacity:u.OpacityBounds.LOWER},O=null,C=I({},S),N=null,b=new Set,M=!1,P=!1,R=!1,L=new Set,D=!1;function w(e){if(e.type===g.ActionTypes.OVERLAY_INITIALIZE&&function(e){return null==e.version&&null!=e.userSettings&&1===s.OVERLAY_VERSION||(e.version===s.OVERLAY_VERSION||(i.default.dispatch({type:g.ActionTypes.OVERLAY_INCOMPATIBLE_APP}),(0,o.disconnect)(),!1))}(e)&&(R=!0),R)switch(e.type){case g.ActionTypes.CHANNEL_CREATE:case g.ActionTypes.CHANNEL_UPDATE:case g.ActionTypes.CHANNEL_DELETE:var t=new l.default(e.channel);i.default.dispatch({type:e.type,channel:t});break;case g.ActionTypes.GUILD_CREATE:var n=e.guild;n.channels=n.channels.map((function(e){return new l.default(e)})),i.default.dispatch({type:g.ActionTypes.GUILD_CREATE,guild:n});break;default:i.default.dispatch(e)}}function U(){if(!__OVERLAY__)return!1;var e=O===(0,s.getPID)(),t=b.has((0,s.getPID)())||L.size>0;e&&t?i.default.dirtyDispatch({type:g.ActionTypes.WINDOW_FOCUS,focused:!0}):i.default.dirtyDispatch({type:g.ActionTypes.WINDOW_FOCUS,focused:!1})}function k(){if(O!==(0,s.getPID)())return!1;L.clear()}function G(e){var t=(0,s.getPID)();if(null==e.pid||e.pid===t)switch(e.type){case g.OverlayEventTypes.STORAGE_SYNC:r.default.PersistedStore.initializeAll(e.states);break;case g.OverlayEventTypes.DISPATCH:null!=e.payloads&&(P=!0,e.payloads.forEach((function(e){return w(e)})),P=!1)}}function j(){var e;e=new Set([g.ActionTypes.CHANNEL_SELECT,g.ActionTypes.VOICE_CHANNEL_SELECT,g.ActionTypes.CHANNEL_COLLAPSE,g.ActionTypes.CATEGORY_COLLAPSE,g.ActionTypes.CATEGORY_EXPAND,g.ActionTypes.AUDIO_TOGGLE_SELF_MUTE,g.ActionTypes.AUDIO_TOGGLE_SELF_DEAF,g.ActionTypes.AUDIO_TOGGLE_LOCAL_MUTE,g.ActionTypes.AUDIO_SET_LOCAL_VIDEO_DISABLED,g.ActionTypes.AUDIO_SET_LOCAL_VOLUME,g.ActionTypes.AUDIO_SET_INPUT_DEVICE,g.ActionTypes.AUDIO_SET_INPUT_VOLUME,g.ActionTypes.AUDIO_SET_OUTPUT_VOLUME,g.ActionTypes.AUDIO_SET_OUTPUT_DEVICE,g.ActionTypes.AUDIO_SET_MODE,g.ActionTypes.OVERLAY_SELECT_CALL,g.ActionTypes.OVERLAY_SET_NOTIFICATION_POSITION_MODE,g.ActionTypes.OVERLAY_SET_UI_LOCKED,g.ActionTypes.OVERLAY_SET_INPUT_LOCKED,g.ActionTypes.OVERLAY_SET_TEXT_WIDGET_OPACITY,g.ActionTypes.OVERLAY_SET_NOT_IDLE,g.ActionTypes.OVERLAY_CALL_PRIVATE_CHANNEL,g.ActionTypes.OVERLAY_SET_DISPLAY_NAME_MODE,g.ActionTypes.OVERLAY_SET_DISPLAY_USER_MODE,g.ActionTypes.OVERLAY_SET_AVATAR_SIZE_MODE,g.ActionTypes.OVERLAY_SET_NOTIFICATION_POSITION_MODE,g.ActionTypes.OVERLAY_SET_TEXT_CHAT_NOTIFICATION_MODE,g.ActionTypes.OVERLAY_JOIN_GAME,g.ActionTypes.LAYOUT_UPDATE_WIDGET,g.ActionTypes.LAYOUT_SET_TOP_WIDGET,g.ActionTypes.LAYOUT_SET_PINNED,g.ActionTypes.LAYOUT_CREATE,g.ActionTypes.CHANNEL_PRELOAD,g.ActionTypes.CALL_DELETE,g.ActionTypes.CHANNEL_ACK,g.ActionTypes.SKU_PURCHASE_MODAL_OPEN,g.ActionTypes.SKU_PURCHASE_MODAL_CLOSE,g.ActionTypes.SKU_PURCHASE_PREVIEW_FETCH_SUCCESS,g.ActionTypes.SKU_PURCHASE_START,g.ActionTypes.SKU_PURCHASE_SUCCESS,g.ActionTypes.SKU_PURCHASE_FAIL,g.ActionTypes.SKU_PURCHASE_SHOW_CONFIRMATION_STEP,g.ActionTypes.SKU_PURCHASE_CLEAR_ERROR,g.ActionTypes.PURCHASE_CONFIRMATION_MODAL_OPEN,g.ActionTypes.PURCHASE_CONFIRMATION_MODAL_CLOSE,g.ActionTypes.ACTIVITY_INVITE_MODAL_CLOSE,g.ActionTypes.LOAD_MESSAGES_SUCCESS,g.ActionTypes.LOAD_MESSAGES_FAILURE,g.ActionTypes.LOAD_MESSAGES,g.ActionTypes.OVERLAY_ACTIVATE_REGION,g.ActionTypes.OVERLAY_DEACTIVATE_ALL_REGIONS,g.ActionTypes.INVITE_MODAL_CLOSE,g.ActionTypes.VOICE_SETTINGS_MODAL_CLOSE,g.ActionTypes.LAYOUT_DELETE_WIDGET,g.ActionTypes.LAYOUT_DELETE_ALL_WIDGETS,g.ActionTypes.LAYOUT_CREATE_WIDGETS,g.ActionTypes.GIF_FAVORITE_ADD,g.ActionTypes.GIF_FAVORITE_REMOVE,g.ActionTypes.GIFT_CODE_REDEEM,g.ActionTypes.GIFT_CODE_REDEEM_SUCCESS,g.ActionTypes.GIFT_CODE_REDEEM_FAILURE,g.ActionTypes.PREMIUM_REQUIRED_MODAL_OPEN,g.ActionTypes.PREMIUM_REQUIRED_MODAL_CLOSE,g.ActionTypes.PREMIUM_PAYMENT_MODAL_OPEN,g.ActionTypes.PREMIUM_PAYMENT_MODAL_CLOSE,g.ActionTypes.PREMIUM_SWITCH_PLAN_MODAL_OPEN,g.ActionTypes.PREMIUM_SWITCH_PLAN_MODAL_CLOSE,g.ActionTypes.PREMIUM_PAYMENT_SUBSCRIBE_FAIL,g.ActionTypes.PREMIUM_PAYMENT_SUBSCRIBE_SUCCESS,g.ActionTypes.PREMIUM_PAYMENT_ERROR_CLEAR,g.ActionTypes.PREMIUM_PAYMENT_UPDATE_FAIL,g.ActionTypes.PREMIUM_PAYMENT_UPDATE_SUCCESS,g.ActionTypes.BILLING_SUBSCRIPTION_UPDATE_SUCCESS,g.ActionTypes.MEDIA_ENGINE_SET_DESKTOP_SOURCE,g.ActionTypes.STREAM_START,g.ActionTypes.STREAM_STOP,g.ActionTypes.STREAM_CLOSE,g.ActionTypes.HOTSPOT_HIDE,g.ActionTypes.AUDIO_SET_NOISE_CANCELLATION,g.ActionTypes.AUDIO_SET_NOISE_SUPPRESSION]),i.default.setInterceptor((function(t){if(P)return!1;var n=e.has(t.type);if(n)switch(t.type){case g.ActionTypes.CHANNEL_SELECT:var r=t.guildId,a=t.channelId;if(n=!1,null==a)break;(0,o.send)({type:g.OverlayEventTypes.DISPATCH,pid:(0,s.getPID)(),payloads:[{type:g.ActionTypes.CHANNEL_PRELOAD,guildId:r===g.ME?null:r,channelId:a,context:g.CURRENT_APP_CONTEXT},{type:g.ActionTypes.OVERLAY_SELECT_CHANNEL,guildId:r,channelId:a}]});break;case g.ActionTypes.OVERLAY_SET_DISPLAY_NAME_MODE:case g.ActionTypes.OVERLAY_SET_DISPLAY_USER_MODE:case g.ActionTypes.OVERLAY_SET_AVATAR_SIZE_MODE:case g.ActionTypes.OVERLAY_SET_NOTIFICATION_POSITION_MODE:case g.ActionTypes.OVERLAY_SET_TEXT_CHAT_NOTIFICATION_MODE:case g.ActionTypes.OVERLAY_SET_UI_LOCKED:case g.ActionTypes.OVERLAY_SET_INPUT_LOCKED:case g.ActionTypes.OVERLAY_SET_TEXT_WIDGET_OPACITY:case g.ActionTypes.LAYOUT_UPDATE_WIDGET:case g.ActionTypes.LAYOUT_SET_PINNED:case g.ActionTypes.LAYOUT_SET_TOP_WIDGET:case g.ActionTypes.LAYOUT_CREATE:case g.ActionTypes.CATEGORY_EXPAND:case g.ActionTypes.CATEGORY_COLLAPSE:case g.ActionTypes.VOICE_CHANNEL_SELECT:case g.ActionTypes.CHANNEL_ACK:case g.ActionTypes.AUDIO_TOGGLE_SELF_MUTE:case g.ActionTypes.AUDIO_TOGGLE_SELF_DEAF:case g.ActionTypes.AUDIO_TOGGLE_LOCAL_MUTE:case g.ActionTypes.AUDIO_SET_LOCAL_VIDEO_DISABLED:case g.ActionTypes.AUDIO_SET_LOCAL_VOLUME:case g.ActionTypes.AUDIO_SET_INPUT_DEVICE:case g.ActionTypes.AUDIO_SET_INPUT_VOLUME:case g.ActionTypes.AUDIO_SET_OUTPUT_VOLUME:case g.ActionTypes.AUDIO_SET_OUTPUT_DEVICE:case g.ActionTypes.AUDIO_SET_MODE:case g.ActionTypes.LOAD_MESSAGES_SUCCESS:case g.ActionTypes.LOAD_MESSAGES_FAILURE:case g.ActionTypes.LOAD_MESSAGES:case g.ActionTypes.CHANNEL_PRELOAD:case g.ActionTypes.SKU_PURCHASE_MODAL_OPEN:case g.ActionTypes.SKU_PURCHASE_MODAL_CLOSE:case g.ActionTypes.SKU_PURCHASE_PREVIEW_FETCH_SUCCESS:case g.ActionTypes.SKU_PURCHASE_START:case g.ActionTypes.SKU_PURCHASE_SUCCESS:case g.ActionTypes.SKU_PURCHASE_FAIL:case g.ActionTypes.SKU_PURCHASE_SHOW_CONFIRMATION_STEP:case g.ActionTypes.SKU_PURCHASE_CLEAR_ERROR:case g.ActionTypes.PURCHASE_CONFIRMATION_MODAL_OPEN:case g.ActionTypes.PURCHASE_CONFIRMATION_MODAL_CLOSE:case g.ActionTypes.OVERLAY_ACTIVATE_REGION:case g.ActionTypes.OVERLAY_DEACTIVATE_ALL_REGIONS:case g.ActionTypes.INVITE_MODAL_CLOSE:case g.ActionTypes.VOICE_SETTINGS_MODAL_CLOSE:case g.ActionTypes.LAYOUT_DELETE_WIDGET:case g.ActionTypes.LAYOUT_DELETE_ALL_WIDGETS:case g.ActionTypes.LAYOUT_CREATE_WIDGETS:case g.ActionTypes.GIF_FAVORITE_ADD:case g.ActionTypes.GIF_FAVORITE_REMOVE:case g.ActionTypes.GIFT_CODE_REDEEM:case g.ActionTypes.GIFT_CODE_REDEEM_SUCCESS:case g.ActionTypes.GIFT_CODE_REDEEM_FAILURE:case g.ActionTypes.PREMIUM_REQUIRED_MODAL_OPEN:case g.ActionTypes.PREMIUM_REQUIRED_MODAL_CLOSE:case g.ActionTypes.PREMIUM_PAYMENT_MODAL_OPEN:case g.ActionTypes.PREMIUM_PAYMENT_MODAL_CLOSE:case g.ActionTypes.PREMIUM_PAYMENT_SUBSCRIBE_FAIL:case g.ActionTypes.PREMIUM_PAYMENT_SUBSCRIBE_SUCCESS:case g.ActionTypes.PREMIUM_PAYMENT_SUBSCRIBE_START:case g.ActionTypes.PREMIUM_PAYMENT_ERROR_CLEAR:case g.ActionTypes.PREMIUM_PAYMENT_SELECT_PLAN:case g.ActionTypes.PREMIUM_PAYMENT_UPDATE_FAIL:case g.ActionTypes.PREMIUM_PAYMENT_UPDATE_SUCCESS:case g.ActionTypes.BILLING_SUBSCRIPTION_UPDATE_SUCCESS:case g.ActionTypes.STREAM_START:case g.ActionTypes.STREAM_CLOSE:case g.ActionTypes.MEDIA_ENGINE_SET_DESKTOP_SOURCE:case g.ActionTypes.HOTSPOT_HIDE:case g.ActionTypes.AUDIO_SET_NOISE_CANCELLATION:case g.ActionTypes.AUDIO_SET_NOISE_SUPPRESSION:n=!1;default:(0,o.send)({type:g.OverlayEventTypes.DISPATCH,pid:(0,s.getPID)(),payloads:[t]})}return n})),(0,o.setReceiveHandler)(G),(0,o.connect)(),(0,o.send)({type:g.OverlayEventTypes.CONNECT,pid:(0,s.getPID)()})}var F=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,i,o,u=r.prototype;return u.initialize=function(e){this.waitFor(m.default),__OVERLAY__&&(c.default.embedded&&d.default.requireModule("discord_overlay2"),b.delete((0,s.getPID)())),null!=e&&(null==(C=e).textChatNotifications&&(C.textChatNotifications=S.textChatNotifications),null==C.textWidgetOpacity&&(C.textWidgetOpacity=S.textWidgetOpacity))},u.getState=function(){return C},u.isUILocked=function(e){return!b.has(e)},u.isInstanceUILocked=function(){if(!__OVERLAY__)throw new Error("OverlayStore: App instance should never call .isInstanceUILocked()");return!b.has((0,s.getPID)())},u.isInstanceFocused=function(){if(!__OVERLAY__)throw new Error("OverlayStore: App instance should never call .isInstanceFocused()");return O===(0,s.getPID)()},u.isFocused=function(e){return O===e},u.isPinned=function(e){var t=h.default.getLayout(s.OVERLAY_LAYOUT_ID);return null!=t&&null!=t.widgets.find((function(t){var n=h.default.getWidget(t);return!(null==n||n.type!==e||!n.pinned)}))},u.getSelectedGuildId=function(){return C.selectedGuildId},u.getSelectedChannelId=function(){return C.selectedChannelId},u.getSelectedCallId=function(){return N},u.getDisplayUserMode=function(){return C.displayUserMode},u.getDisplayNameMode=function(){return C.displayNameMode},u.getAvatarSizeMode=function(){return C.avatarSizeMode},u.getNotificationPositionMode=function(){return C.notificationPositionMode},u.getTextChatNotificationMode=function(){return C.notificationPositionMode===g.OverlayNotificationPositions.DISABLED?g.OverlayNotificationTextChatTypes.DISABLED:C.textChatNotifications},u.getDisableExternalLinkAlert=function(){return C.disableExternalLinkAlert},u.getFocusedPID=function(){return O},u.getActiveRegions=function(){return L},u.getTextWidgetOpacity=function(){return C.textWidgetOpacity},u.isPreviewingInGame=function(){return D},a=r,(i=[{key:"initialized",get:function(){return R}},{key:"incompatibleApp",get:function(){return M}}])&&A(a.prototype,i),o&&A(a,o),r}(r.default.PersistedStore);F.persistKey="OverlayStoreV2",F.migrations=[function(){var e=I({},a.default.get("OverlayStore")),t=(e.pinnedWidgets,e.positions,e.sizes,e.v),n=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["pinnedWidgets","positions","sizes","v"]);return I({},S,{},5===t?n:null)}];var x=new F(i.default,{CONNECTION_CLOSED:function(e){b.clear()},OVERLAY_START_SESSION:function(e){return j()},OVERLAY_INITIALIZE:function(e){var t=e.focusedPID;O=t},OVERLAY_READY:function(e){return function(){var e=C.selectedGuildId,t=C.selectedChannelId;if(null!=e&&(p.default.hasChannels(e)&&(null==t||p.default.hasSelectableChannel(e,t))||(e=null,t=null)),null!=t&&null==f.default.getChannel(t)&&(e=null,t=null),null==e&&null==t&&(e=_.default.getGuildId()),null!=e&&null==t){var n=p.default.getDefaultChannel(e);null!=n&&(t=n.id)}if(null==t){var r=y.default.getPrivateChannelIds();if(r.length>0)t=r[0];else{var a=E.default.getFlattenedGuilds();if(a.length>0){e=a[0].id;var i=p.default.getDefaultChannel(e);null!=i&&(t=i.id)}}}C.selectedGuildId=e,C.selectedChannelId=t}()},OVERLAY_FOCUSED:function(e){var t=e.pid;O=t,U()},OVERLAY_SELECT_CHANNEL:function(e){var t=e.guildId,n=e.channelId;C.selectedGuildId=t,C.selectedChannelId=n},OVERLAY_SELECT_CALL:function(e){var t=e.callId;N=t},CALL_DELETE:function(e){N=null},LAYOUT_CREATE:function(e){return function(){if(null==C.selectedChannelId||null==f.default.getChannel(C.selectedChannelId)){var e=y.default.getPrivateChannelIds();if(e.length>0)C.selectedChannelId=e[0];else{var t=E.default.getFlattenedGuilds();if(t.length>0){C.selectedGuildId=t[0].id;var n=p.default.getDefaultChannel(C.selectedGuildId);null!=n&&(C.selectedChannelId=n.id)}}}}()},OVERLAY_SET_DISPLAY_NAME_MODE:function(e){var t=e.mode;C.displayNameMode=t},OVERLAY_SET_DISPLAY_USER_MODE:function(e){var t=e.mode;C.displayUserMode=t},OVERLAY_SET_AVATAR_SIZE_MODE:function(e){var t=e.mode;C.avatarSizeMode=t},OVERLAY_SET_NOTIFICATION_POSITION_MODE:function(e){var t=e.mode;C.notificationPositionMode=t},OVERLAY_SET_TEXT_CHAT_NOTIFICATION_MODE:function(e){var t=e.mode;C.textChatNotifications=t},OVERLAY_SET_TEXT_WIDGET_OPACITY:function(e){var t=e.opacity,n=C.textWidgetOpacity!==t;return C.textWidgetOpacity=t,n},OVERLAY_DISABLE_EXTERNAL_LINK_ALERT:function(e){C.disableExternalLinkAlert=!0},OVERLAY_INCOMPATIBLE_APP:function(e){M=!0},OVERLAY_SET_UI_LOCKED:function(e){var t=e.locked,n=e.pid;t?b.delete(n):b.add(n),k(),U(),D=!1},OVERLAY_ACTIVATE_REGION:function(e){var t=e.region;return O===(0,s.getPID)()&&(!L.has(t)&&void L.add(t))},OVERLAY_DEACTIVATE_ALL_REGIONS:function(e){return k()},OVERLAY_SET_PREVIEW_IN_GAME_MODE:function(e){D=e.isPreviewingInGame},WINDOW_RESIZED:function(e){return function(){if(__OVERLAY__){var e=v.default.windowSize();(0,s.validResolution)(e)||(D=!1)}}()}});t.default=x},557:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensureStripeIsLoaded=d,t.ensureStripeV3IsLoaded=f,t.parseStripePaymentMethod=function(e){var t=e.billing_details,n=null!=t.address?t.address:{},r=n.postal_code,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(n,["postal_code"]),i=s({name:t.name},a,{postalCode:r});return{token:e.id,billingAddressInfo:i}},t.authenticatePaymentIntentForPaymentId=function(e){return p.apply(this,arguments)};var r=o(n(15)),a=o(n(4856)),i=n(1);function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){u(i,r,a,o,l,"next",e)}function l(e){u(i,r,a,o,l,"throw",e)}o(void 0)}))}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=Object.freeze({REQUIRES_PAYMENT_METHOD:"requires_payment_method",REQUIRES_CONFIRMATION:"requires_confirmation",REQUIRES_ACTION:"requires_action",PROCESSING:"processing",CANCELED:"canceled",SUCCEEDED:"succeeded"});a.default.register("https://js.stripe.com/v2","Stripe");function d(){return a.default.ensure("https://js.stripe.com/v2").then((function(e){return e.setPublishableKey(i.PaymentSettings.STRIPE.KEY),e}))}function f(){return d().then((function(){return a.default.ensure("https://js.stripe.com/v3/").then((function(e){return e(i.PaymentSettings.STRIPE.KEY)}))}))}function p(){return(p=l(regeneratorRuntime.mark((function e(t){var n,a,o,u,l,s,d,p,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.default.get({url:i.Endpoints.BILLING_STRIPE_PAYMENT_INTENTS(t),oldFormErrors:!0});case 3:return n=e.sent,a=n.body.stripe_payment_intent_client_secret,e.next=7,f();case 7:return o=e.sent,e.next=10,o.retrievePaymentIntent(a);case 10:if(u=e.sent,l=u.error,s=u.paymentIntent,null==l){e.next=15;break}return e.abrupt("return",{error:l.message});case 15:d={},s.status===c.REQUIRES_PAYMENT_METHOD&&null!=s.last_payment_error&&null!=s.last_payment_error.payment_method&&(d.payment_method=s.last_payment_error.payment_method.id),e.t0=s.status,e.next=e.t0===c.REQUIRES_PAYMENT_METHOD||e.t0===c.REQUIRES_CONFIRMATION||e.t0===c.REQUIRES_ACTION?20:e.t0===c.SUCCEEDED||e.t0===c.PROCESSING?29:(e.t0,c.CANCELED,30);break;case 20:return e.next=22,o.handleCardPayment(a,d);case 22:if(p=e.sent,null==(h=p.error)){e.next=28;break}return e.abrupt("return",{error:h.message});case 28:case 29:return e.abrupt("return",{});case 30:return e.abrupt("return",{error:"Invalid Payment Intent status: "+s.status});case 31:e.next=36;break;case 33:return e.prev=33,e.t1=e.catch(0),e.abrupt("return",{error:e.t1.message});case 36:case"end":return e.stop()}}),e,null,[[0,33]])})))).apply(this,arguments)}a.default.register("https://js.stripe.com/v3/","Stripe")},560:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPID=c,t.log=function(e){(0,i.send)({type:u.OverlayEventTypes.LOG_MESSAGES,pid:c(),payload:e})},t.validResolution=function(e){return!o.default.embedded||e.width>=l.width&&e.height>=l.height},t.DEV_PID=t.OVERLAY_LAYOUT_ID=t.OVERLAY_MIN_RESOLUTION=t.OVERLAY_DEFAULT_RESOLUTION=t.OVERLAY_VERSION=void 0;var r,a=n(149),i=n(860),o=(r=n(14))&&r.__esModule?r:{default:r},u=n(1);t.OVERLAY_VERSION=2;t.OVERLAY_DEFAULT_RESOLUTION={width:3840,height:2160};var l={width:768,height:432};t.OVERLAY_MIN_RESOLUTION=l;t.OVERLAY_LAYOUT_ID="overlay_default";t.DEV_PID=-2;var s=null;function c(){if(null==s){var e=(window.location.search||"").toLowerCase().substr(1),t=(0,a.parse)(e).pid;t=parseInt(t,10),isNaN(t)&&(t=-1),s=t}return s}},7086:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var r,a,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=(r=n(57))&&r.__esModule?r:{default:r};function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(e){var t=e.width,n=void 0===t?24:t,r=e.height,a=void 0===r?24:r,u=e.color,c=void 0===u?"currentColor":u,d=e.foreground,f=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["width","height","color","foreground"]);return i.createElement("svg",l({},(0,o.default)(f),{width:n,height:a,viewBox:"0 0 24 24"}),s("path",{className:d,fill:c,fillRule:"evenodd",clipRule:"evenodd",d:"M11.383 3.07904C11.009 2.92504 10.579 3.01004 10.293 3.29604L6 8.00204H3C2.45 8.00204 2 8.45304 2 9.00204V15.002C2 15.552 2.45 16.002 3 16.002H6L10.293 20.71C10.579 20.996 11.009 21.082 11.383 20.927C11.757 20.772 12 20.407 12 20.002V4.00204C12 3.59904 11.757 3.23204 11.383 3.07904ZM14 5.00195V7.00195C16.757 7.00195 19 9.24595 19 12.002C19 14.759 16.757 17.002 14 17.002V19.002C17.86 19.002 21 15.863 21 12.002C21 8.14295 17.86 5.00195 14 5.00195ZM14 9.00195C15.654 9.00195 17 10.349 17 12.002C17 13.657 15.654 15.002 14 15.002V13.002C14.551 13.002 15 12.553 15 12.002C15 11.451 14.551 11.002 14 11.002V9.00195Z"}))}c.displayName="Speaker"},7109:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r;!function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n)}(n(0));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function i(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function o(e){var t=e.width,n=void 0===t?24:t,r=e.height,a=void 0===r?24:r,o=e.color,u=void 0===o?"currentColor":o;return i("svg",{width:n,height:a,viewBox:"0 0 24 24",className:e.className},void 0,i("path",{className:e.foreground,fill:u,fillRule:"evenodd",clipRule:"evenodd",d:"M5.88657 21C5.57547 21 5.3399 20.7189 5.39427 20.4126L6.00001 17H2.59511C2.28449 17 2.04905 16.7198 2.10259 16.4138L2.27759 15.4138C2.31946 15.1746 2.52722 15 2.77011 15H6.35001L7.41001 9H4.00511C3.69449 9 3.45905 8.71977 3.51259 8.41381L3.68759 7.41381C3.72946 7.17456 3.93722 7 4.18011 7H7.76001L8.39677 3.41262C8.43914 3.17391 8.64664 3 8.88907 3H9.87344C10.1845 3 10.4201 3.28107 10.3657 3.58738L9.76001 7H15.76L16.3968 3.41262C16.4391 3.17391 16.6466 3 16.8891 3H17.8734C18.1845 3 18.4201 3.28107 18.3657 3.58738L17.76 7H21.1649C21.4755 7 21.711 7.28023 21.6574 7.58619L21.4824 8.58619C21.4406 8.82544 21.2328 9 20.9899 9H17.41L16.35 15H19.7549C20.0655 15 20.301 15.2802 20.2474 15.5862L20.0724 16.5862C20.0306 16.8254 19.8228 17 19.5799 17H16L15.3632 20.5874C15.3209 20.8261 15.1134 21 14.8709 21H13.8866C13.5755 21 13.3399 20.7189 13.3943 20.4126L14 17H8.00001L7.36325 20.5874C7.32088 20.8261 7.11337 21 6.87094 21H5.88657ZM9.41045 9L8.35045 15H14.3504L15.4104 9H9.41045Z"}))}o.displayName="ChannelText"},7153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),a=u(n(7540)),i=n(55),o=u(n(7381));function u(e){return e&&e.__esModule?e:{default:e}}function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=[{name:u(n(6)).default.Messages.IMAGES,extensions:["jpg","jpeg","png","gif"]}];function d(e,t){if(null!=e){var n=new FileReader;n.onload=function(n){var r;"string"==typeof(null===(r=n.target)||void 0===r?void 0:r.result)&&t(n.target.result,e.name)},n.readAsDataURL(e)}}function f(e,t){"image/gif"!==e.type?d(e,(function(e,n){var o=new Image;o.src=e,o.onload=function(){(0,i.openModal)((function(e){return r.createElement(a.default,s({},e,{imgURI:o.src,onCrop:t,filename:n}))}))}})):d(e,(function(e,n){return t(e,n)}))}var p=function(e){var t,n;function a(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this)._ref=r.createRef(),t._isMounted=!1,t.handleFileChange=function(e){var n=t.props.showEditingModal;if(e.stopPropagation(),e.preventDefault(),null!=e.currentTarget.files)for(var r=0;r<e.currentTarget.files.length;r++){var a=e.currentTarget.files[r];n?f(a,t.handleFileRead):d(a,t.handleFileRead)}},t.handleFileRead=function(e,n){var r=t.props.onChange;t._isMounted&&r(e,n)},t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=a.prototype;return i.componentDidMount=function(){this._isMounted=!0},i.activateUploadDialogue=function(){var e;null===(e=this._ref.current)||void 0===e||e.activateUploadDialogue()},i.render=function(){var e=this.props,t=e.multiple,n=e.disabled,a=e.className,i=e.tabIndex,u=e["aria-label"];return r.createElement(o.default,{ref:this._ref,onChange:this.handleFileChange,filters:c,multiple:t,disabled:n,className:a,tabIndex:i,"aria-label":u})},a}(r.PureComponent);p.displayName="ImageInput",p.defaultProps={multiple:!0,showEditingModal:!1,tabIndex:-1};var h=p;t.default=h},7174:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=s(n(9)),o=s(n(72)),u=s(n(278)),l=s(n(6360));function s(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){for(var n=0,r=0;r<t.length;r++){var a=t[r];if(e===a)return r;if(e<a)return 0===n||a-e<n?r:r-1;n=e-a}return null}function h(e){var t=e.markers,n=e.initialValue,r=e.minValue,a=e.maxValue,i=e.equidistant,o=[],u=[];if(null==t)return{min:r,max:a,range:a-r,sortedMarkers:o,markerPositions:u};var l=p(n,o=t.sort((function(e,t){return e-t}))),s=o[0],c=o[o.length-1],d=c-s;if(i){var f=100/(o.length-1);u=o.map((function(e,t){return t*f}))}else{u=o.map((function(e){return 100*(e-s)/d}))}return{min:s,max:c,range:d,sortedMarkers:o,markerPositions:u,closestMarkerIndex:l}}function _(e){return f({value:Math.min(Math.max(e.initialValue,e.minValue),e.maxValue),initialValueProp:e.initialValue,newClosestIndex:null},h(e))}var E=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).containerRef=a.createRef(),n.grabberRef=a.createRef(),n.moveGrabber=function(e){var t=n.state,r=t.sortedMarkers,a=t.value,i=t.min,o=t.max,u=n.props,l=u.asValueChanges,s=u.onValueChange,c={};if(u.stickToMarkers){var d=r.indexOf(a);if(d<0)return;var f=d+e,p=r[f];if(null==p)return;c.value=p,c.closestMarkerIndex=f,c.newClosestIndex=f}else{var h=a+e;if(h>o||h<i)return;c.value=h}n.setState(c),l&&l(c.value),s&&s(c.value)},n.handleContainerMouseDown=function(e){var t=n.props,r=t.disabled,a=t.maxValue,i=t.minValue,o=t.asValueChanges,u=t.onValueChange,l=t.stickToMarkers,s=n.state,c=s.sortedMarkers,d=s.markerPositions;if(!r){var f=e.clientX,p=e.currentTarget;if(1===(null==p?void 0:p.nodeType)){var h,_=p.getBoundingClientRect(),E=(f-_.left)/_.width;if(l){var v=d.reduce((function(e,t,n){var r=Math.abs(t/100-E);return r<=e.smallestDelta?{smallestDelta:r,nextClosestMarkerIndex:n}:e}),{smallestDelta:1,nextClosestMarkerIndex:-1}).nextClosestMarkerIndex;if(-1===v)return;n.setState({closestMarkerIndex:v}),h=c[v]}else{h=i+(a-i)*E,n.setState({value:h}),n.handleMouseDown(e)}null!=u&&u(h),null!=o&&o(h)}}},n.handleKeyDown=function(e){var t=n.props,r=t.disabled,a=t.orientation;if(!r){var i=e.key,o=[],u=[];switch(a){case"horizontal":o=["ArrowRight"],u=["ArrowLeft"];break;case"vertical":o=["ArrowUp"],u=["ArrowDown"];break;default:o=["ArrowRight","ArrowUp"],u=["ArrowLeft","ArrowDown"]}u.includes(i)?(e.preventDefault(),e.stopPropagation(),n.moveGrabber(-1)):o.includes(i)&&(e.preventDefault(),e.stopPropagation(),n.moveGrabber(1))}},n.handleMouseDown=function(e){var t,r;if(!n.props.disabled){e.stopPropagation();var a=n.containerRef.current;if(null==a||null===(t=a.ownerDocument)||void 0===t||t.addEventListener("mousemove",n.handleMouseMove,!0),null==a||null===(r=a.ownerDocument)||void 0===r||r.addEventListener("mouseup",n.handleMouseUp,!0),1!==(null==a?void 0:a.nodeType))throw new Error("[UIKit]Slider.handleMouseDown(): assert failed: domNode nodeType !== Element");n.setState({x:e.clientX,active:!0,boundingRect:a.getBoundingClientRect(),newClosestIndex:n.state.closestMarkerIndex})}},n.handleMouseUp=function(e){e.stopPropagation(),n.reset();var t=n.props,r=t.onValueChange,a=t.stickToMarkers,i=n.state.newClosestIndex;a&&null!=i?(r&&r(n.state.sortedMarkers[i]),n.setState({newClosestIndex:null,closestMarkerIndex:i})):r&&r(n.state.value),n.setState({active:!1})},n.handleMouseMove=function(e){e.preventDefault(),n.props.stickToMarkers?n.moveStaggered(e):n.moveSmoothly(e)},n.state=f({active:!1},_(t)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.getDerivedStateFromProps=function(e,t){return e.initialValue!==t.initialValueProp?f({},_(e),{active:t.active}):null};var s=r.prototype;return s.componentWillUnmount=function(){this.reset()},s.renderMark=function(e){var t=this.props.onMarkerRender;return null!=t?t(e):e},s.render=function(){var e,t=this,n=this.state,r=n.value,s=n.active,c=n.sortedMarkers,p=n.markerPositions,h=n.closestMarkerIndex,_=n.newClosestIndex,E=n.min,v=n.max,y=this.props,m=y.disabled,g=y.stickToMarkers,T=y.className,A=y.children,I=y.barStyles,S=y.fillStyles,O=y.mini,C=y.hideBubble,N=y.defaultValue,b=y.orientation,M=y.onValueRender,P=y["aria-label"],R=0;g?null!=p&&(null!=_?R=p[_]:null!=h&&(R=p[h])):R=this.scaleValue(r);var L=R+"%",D=p&&c?p.map((function(e,n){var r,a=c[n],o=null!=N&&N===a,u=t.renderMark(a);return d("div",{className:(0,i.default)(l.default.mark,(r={},r[l.default.defaultValue]=o,r)),style:{left:e+"%"}},n,d("div",{className:l.default.markValue},void 0,u),d("div",{className:l.default["markDash"+(null==u?"simple":"")]}))})):null,w=M?M(r):R.toFixed(0)+"%";return a.createElement("div",{className:(0,i.default)(l.default.slider,T,(e={},e[l.default.disabled]=m,e[l.default.mini]=O,e)),"aria-valuemin":E,"aria-valuemax":v,"aria-valuenow":r,"aria-disabled":m,"aria-orientation":b,"aria-label":P,role:"slider",tabIndex:0,onKeyDown:this.handleKeyDown,onMouseDown:this.handleContainerMouseDown,ref:this.containerRef},d("input",{type:"number",className:l.default.input,value:R.toFixed(0),readOnly:!0}),d("div",{className:l.default.track},void 0,D),d("div",{className:l.default.bar,style:I},void 0,d("div",{className:l.default.barFill,style:f({},S,{width:L})})),A,d("div",{className:l.default.track},void 0,d(u.default,{color:u.default.Colors.GREY,hideOnClick:!1,text:C||g?null:w,forceOpen:s},void 0,(function(e){return d(o.default,{focusTarget:t.containerRef,ringTarget:t.grabberRef,ringClassName:l.default.grabberFocusRing},void 0,a.createElement("div",f({},e,{className:l.default.grabber,style:{left:L},onMouseDown:t.handleMouseDown,ref:t.grabberRef})))}))))},s.reset=function(){var e,t,n,r;null===(e=this.containerRef.current)||void 0===e||null===(t=e.ownerDocument)||void 0===t||t.removeEventListener("mousemove",this.handleMouseMove,!0),null===(n=this.containerRef.current)||void 0===n||null===(r=n.ownerDocument)||void 0===r||r.removeEventListener("mouseup",this.handleMouseUp,!0)},s.scaleValue=function(e){return 100*(e-this.state.min)/this.state.range},s.unscaleValue=function(e){return e*this.state.range/100+this.state.min},s.focus=function(){var e;null===(e=this.containerRef.current)||void 0===e||e.focus()},s.blur=function(){var e;null===(e=this.containerRef.current)||void 0===e||e.blur()},s.moveStaggered=function(e){var t=this.state,n=t.boundingRect,r=t.x,a=void 0===r?0:r,i=t.closestMarkerIndex,o=t.markerPositions,u=t.sortedMarkers,l=this.props.asValueChanges,s=n||{},c=s.left,d=s.right;if(!(e.clientX<=c||e.clientX>=d)){var f,h=d-c,_=(e.clientX-a)/h,E=o[i]+100*_;if(this.props.equidistant)f=p(E,o);else f=p(this.unscaleValue(E),u);null!=f&&l&&l(u[f]),this.setState({newClosestIndex:f})}},s.moveSmoothly=function(e){var t=this.props,n=t.minValue,r=t.maxValue,a=t.handleSize,i=t.asValueChanges,o=this.state.boundingRect,u=o.left,l=o.right,s=this.state.x-e.clientX,c=(this.state.value-n)/(r-n);if(!(e.clientX<=u&&s<0||e.clientX>=l&&s>0)){var d=l-u-a,f=d*c;c=Math.min(Math.max(f-s,0),d)/d}var p=n+c*(r-n);i&&i(p),this.setState({value:p,x:e.clientX})},r}(a.PureComponent);E.displayName="Slider",E.defaultProps={initialValue:10,minValue:0,maxValue:100,handleSize:10,disabled:!1,stickToMarkers:!1,fillStyles:{}};var v=E;t.default=v},7258:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var r,a,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=(r=n(57))&&r.__esModule?r:{default:r};function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(e){var t=e.width,n=void 0===t?64:t,r=e.height,a=void 0===r?64:r,u=e.color,c=void 0===u?"currentColor":u,d=e.foreground,f=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["width","height","color","foreground"]);return i.createElement("svg",l({},(0,o.default)(f),{width:n,height:a,viewBox:"0 0 64 64"}),s("path",{className:d,fill:c,d:"M56 50.6667V13.3333C56 10.4 53.6 8 50.6667 8H13.3333C10.4 8 8 10.4 8 13.3333V50.6667C8 53.6 10.4 56 13.3333 56H50.6667C53.6 56 56 53.6 56 50.6667ZM22.6667 36L29.3333 44.0267L38.6667 32L50.6667 48H13.3333L22.6667 36Z"}))}c.displayName="ImagePlaceholder"},7304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(n(7)),a=f(n(4)),i=f(n(5)),o=n(70),u=f(n(3)),l=n(5076),s=f(n(5107)),c=n(800),d=n(1);function f(e){return e&&e.__esModule?e:{default:e}}var p={},h={},_=[],E=[],v=[],y=new Set,m={},g={},T=null,A=null,I=null,S=new Set;function O(e){var t=s.default.createFromServer(e),n=t.code;if(null!=h[n])h[n]=h[n].merge(t);else if(h[n]=t,null!=t.expiresAt){var r=new o.Timeout;p[n]=r,function e(t){var n=h[t];if(null==n||null==n.expiresAt)return;var r=n.expiresAt.valueOf()-(0,a.default)().valueOf();if(r<=0)delete h[t],delete p[t],P.emitChange();else{var i=p[t];if(null==i)return;i.start(Math.min(d.MAX_TIMEOUT_MS,r),(function(){return e(t)}))}}(n)}}function C(e,t){if(void 0===t&&(t=!1),t&&!S.has(e.channel_id))return!1;var n=(0,c.findGiftCodes)(e.content);return 0===n.length||n.forEach((function(e){_.includes(e)||v.includes(e)||(N({code:e}),u.default.wait((function(){return(0,l.resolveGiftCode)(e,!1,!0).catch(d.NOOP_NULL)})))})),!1}function N(e){var t=e.code;_.includes(t)||(_=[].concat(_,[t]))}function b(e){return C(e.message,!0)}function M(e){var t=e.channelId,n=e.messages;S.add(t),n.forEach((function(e){return C(e,!0)}))}var P=new(function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=a.prototype;return i.isOpen=function(){return null!=T},i.getProps=function(){return{giftCode:null!=T?h[T]:null,channelContext:A,analyticsLocation:I}},i.get=function(e){var t=h[e];return null==t||t.isExpired()?null:t},i.getError=function(e){return null!=e?g[e]:null},i.getForGifterSKUAndPlan=function(e,t,n){return r.default.values(h).filter((function(r){return r.userId===e&&r.skuId===t&&(null==n||r.subscriptionPlanId===n)&&!r.isExpired()}))},i.getIsResolved=function(e){return v.includes(e)},i.getIsAccepting=function(e){return E.includes(e)},i.getUserGiftCodesFetchingForSKUAndPlan=function(e,t){return y.has((0,c.makeComboId)(e,t))},i.getUserGiftCodesLoadedAtForSKUAndPlan=function(e,t){return m[(0,c.makeComboId)(e,t)]},i.getResolvingCodes=function(){return _},i.getResolvedCodes=function(){return v},i.getAcceptingCodes=function(){return E},i.getChannelContext=function(){return A},a}(i.default.Store))(u.default,{CONNECTION_OPEN:function(e){return S.clear(),!1},CHANNEL_SELECT:function(e){var t=e.channelId;return null!=t&&S.add(t),!1},GIFT_CODE_RESOLVE:N,GIFT_CODE_RESOLVE_SUCCESS:function(e){var t=e.giftCode;return _=_.filter((function(e){return e!==t.code})),v.includes(t.code)||(v=[].concat(v,[t.code])),O(t)},GIFT_CODE_RESOLVE_FAILURE:function(e){var t=e.code;_=_.filter((function(e){return e!==t})),v.includes(t)||(v=[].concat(v,[t]))},GIFT_CODE_REDEEM:function(e){var t=e.code;E.includes(t)||(E=[].concat(E,[t]))},GIFT_CODE_REDEEM_SUCCESS:function(e){var t=e.code;E=E.filter((function(e){return e!==t}));var n=h[t];null!=n&&(h[t]=n.merge({redeemed:!0,uses:n.uses+1}))},GIFT_CODE_REDEEM_FAILURE:function(e){var t=e.code,n=e.error;E=E.filter((function(e){return e!==t}));var r=h[t];if(g[t]=n,null!=r)switch(n.code){case d.AbortCodes.UNKNOWN_GIFT_CODE:h[t]=r.set("revoked",!0);break;case d.AbortCodes.INVALID_GIFT_REDEMPTION_EXHAUSTED:h[t]=r.set("uses",r.maxUses)}},GIFT_CODE_REVOKE_SUCCESS:function(e){var t=e.code;delete h[t];var n=p[t];null!=n&&(n.stop(),delete p[t]),v.includes(t)||(v=[].concat(v,[t]))},GIFT_CODE_CREATE_SUCCESS:function(e){O(e.giftCode)},GIFT_CODES_FETCH:function(e){var t=e.skuId,n=e.subscriptionPlanId;y.add((0,c.makeComboId)(t,n))},GIFT_CODES_FETCH_SUCCESS:function(e){var t=e.giftCodes,n=e.skuId,r=e.subscriptionPlanId;t.forEach(O);var a=(0,c.makeComboId)(n,r);m[a]=Date.now(),y.delete(a)},GIFT_CODES_FETCH_FAILURE:function(e){var t=e.skuId,n=e.subscriptionPlanId;y.delete((0,c.makeComboId)(t,n))},MESSAGE_CREATE:b,MESSAGE_UPDATE:b,LOAD_MESSAGES_SUCCESS:M,LOAD_MESSAGES_AROUND_SUCCESS:M,LOAD_RECENT_MENTIONS_SUCCESS:function(e){e.messages.forEach((function(e){return C(e)}))},LOAD_PINNED_MESSAGES_SUCCESS:function(e){e.messages.forEach((function(e){return C(e)}))},SEARCH_FINISH:function(e){e.messages.forEach((function(e){e.forEach((function(e){return C(e)}))}))},GIFT_CODE_MODAL_OPEN:function(e){var t=e.code,n=e.channelId,r=e.analyticsLocation;T=t,A=n,I=r},GIFT_CODE_MODAL_CLOSE:function(e){return T=null,A=null,void(I=null)},GIFT_CODE_UPDATE:function(e){var t=e.uses,n=e.code,r=h[n];null!=r&&(h[n]=r.set("uses",Math.max(r.uses,t)))}}),R=P;t.default=R},7339:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;!function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n)}(n(0));var r,a=o(n(7153)),i=o(n(6372));function o(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var s=l("svg",{width:"80",height:"80",viewBox:"0 0 80 80",fill:"none"},void 0,l("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M54.8694 2.85498C53.8065 2.4291 52.721 2.04752 51.6153 1.71253L51.3254 2.66957L51.0354 3.62661C51.9783 3.91227 52.9057 4.23362 53.8161 4.58911C54.1311 3.98753 54.4832 3.40847 54.8694 2.85498ZM75.4109 26.1839C76.0125 25.8689 76.5915 25.5168 77.145 25.1306C77.5709 26.1935 77.9525 27.279 78.2875 28.3847L77.3304 28.6746L76.3734 28.9646C76.0877 28.0217 75.7664 27.0943 75.4109 26.1839ZM78.8148 43.8253L79.8102 43.9222C79.9357 42.6318 80 41.3234 80 40C80 38.6766 79.9357 37.3682 79.8102 36.0778L78.8148 36.1747L77.8195 36.2715C77.9389 37.4977 78 38.7414 78 40C78 41.2586 77.9389 42.5023 77.8195 43.7285L78.8148 43.8253ZM43.8253 1.18515L43.9222 0.189853C42.6318 0.0642679 41.3234 0 40 0C38.6766 0 37.3682 0.064268 36.0778 0.189853L36.1747 1.18515L36.2715 2.18045C37.4977 2.06112 38.7414 2 40 2C41.2586 2 42.5023 2.06112 43.7285 2.18045L43.8253 1.18515ZM28.6746 2.66957L28.3847 1.71253C25.8549 2.47897 23.4312 3.48925 21.1408 4.71604L21.6129 5.59756L22.0851 6.47907C24.2606 5.3138 26.5624 4.35439 28.9646 3.62661L28.6746 2.66957ZM15.2587 9.85105L14.6239 9.0784C12.5996 10.7416 10.7416 12.5996 9.0784 14.6239L9.85105 15.2587L10.6237 15.8935C12.2042 13.9699 13.9699 12.2042 15.8935 10.6237L15.2587 9.85105ZM5.59756 21.6129L4.71604 21.1408C3.48925 23.4312 2.47897 25.8549 1.71253 28.3847L2.66957 28.6746L3.62661 28.9646C4.35439 26.5624 5.3138 24.2607 6.47907 22.0851L5.59756 21.6129ZM0 40C0 38.6766 0.0642679 37.3682 0.189853 36.0778L1.18515 36.1747L2.18045 36.2715C2.06112 37.4977 2 38.7414 2 40C2 41.2586 2.06112 42.5023 2.18045 43.7285L1.18515 43.8253L0.189853 43.9222C0.064268 42.6318 0 41.3234 0 40ZM2.66957 51.3254L1.71253 51.6153C2.47897 54.1451 3.48926 56.5688 4.71604 58.8592L5.59756 58.3871L6.47907 57.9149C5.3138 55.7394 4.35439 53.4376 3.62661 51.0354L2.66957 51.3254ZM9.85105 64.7413L9.0784 65.3761C10.7416 67.4004 12.5996 69.2584 14.6239 70.9216L15.2587 70.1489L15.8935 69.3763C13.9699 67.7958 12.2042 66.0301 10.6237 64.1065L9.85105 64.7413ZM21.6129 74.4024L21.1408 75.284C23.4312 76.5107 25.8549 77.521 28.3847 78.2875L28.6746 77.3304L28.9646 76.3734C26.5624 75.6456 24.2607 74.6862 22.0851 73.5209L21.6129 74.4024ZM36.1747 78.8148L36.0778 79.8102C37.3682 79.9357 38.6766 80 40 80C41.3234 80 42.6318 79.9357 43.9222 79.8102L43.8253 78.8148L43.7285 77.8195C42.5023 77.9389 41.2586 78 40 78C38.7414 78 37.4977 77.9389 36.2715 77.8195L36.1747 78.8148ZM51.3254 77.3304L51.6153 78.2875C54.1451 77.521 56.5688 76.5107 58.8592 75.284L58.3871 74.4024L57.9149 73.5209C55.7394 74.6862 53.4376 75.6456 51.0354 76.3734L51.3254 77.3304ZM64.7413 70.1489L65.3761 70.9216C67.4004 69.2584 69.2584 67.4004 70.9216 65.3761L70.1489 64.7413L69.3763 64.1065C67.7958 66.0301 66.0301 67.7958 64.1065 69.3763L64.7413 70.1489ZM74.4024 58.3871L75.284 58.8592C76.5107 56.5688 77.521 54.1451 78.2875 51.6153L77.3304 51.3254L76.3734 51.0354C75.6456 53.4375 74.6862 55.7393 73.5209 57.9149L74.4024 58.3871Z",fill:"currentColor"}),l("circle",{cx:"68",cy:"12",r:"12",fill:"#7289DA"}),l("path",{d:"M73.3332 11.4075H68.5924V6.66675H67.4072V11.4075H62.6665V12.5927H67.4072V17.3334H68.5924V12.5927H73.3332V11.4075Z",fill:"white"}),l("path",{d:"M40 29C37.794 29 36 30.794 36 33C36 35.207 37.794 37 40 37C42.206 37 44 35.207 44 33C44 30.795 42.206 29 40 29Z",fill:"currentColor"}),l("path",{d:"M48 26.001H46.07C45.402 26.001 44.777 25.667 44.406 25.111L43.594 23.891C43.223 23.335 42.598 23 41.93 23H38.07C37.402 23 36.777 23.335 36.406 23.89L35.594 25.11C35.223 25.667 34.598 26 33.93 26H32C30.895 26 30 26.896 30 28V39C30 40.104 30.895 41 32 41H48C49.104 41 50 40.104 50 39V28C50 26.897 49.104 26.001 48 26.001ZM40 39C36.691 39 34 36.309 34 33C34 29.692 36.691 27 40 27C43.309 27 46 29.692 46 33C46 36.31 43.309 39 40 39Z",fill:"currentColor"}),l("path",{d:"M24.6097 52.712V47.72H22.5457V52.736C22.5457 53.792 22.0777 54.404 21.1417 54.404C20.2177 54.404 19.7377 53.78 19.7377 52.712V47.72H17.6737V52.724C17.6737 55.04 19.0897 56.132 21.1177 56.132C23.1217 56.132 24.6097 55.016 24.6097 52.712ZM26.0314 56H28.0834V53.252H28.6114C30.6154 53.252 31.9474 52.292 31.9474 50.42C31.9474 48.62 30.7114 47.72 28.6954 47.72H26.0314V56ZM29.9554 50.456C29.9554 51.308 29.4514 51.704 28.5394 51.704H28.0594V49.268H28.5754C29.4874 49.268 29.9554 49.664 29.9554 50.456ZM37.8292 56L37.5532 54.224H35.0092V47.72H32.9572V56H37.8292ZM45.9558 51.848C45.9558 49.292 44.4078 47.564 42.0078 47.564C39.6078 47.564 38.0478 49.304 38.0478 51.872C38.0478 54.428 39.6078 56.156 41.9838 56.156C44.3958 56.156 45.9558 54.404 45.9558 51.848ZM43.8918 51.86C43.8918 53.504 43.1958 54.548 41.9958 54.548C40.8078 54.548 40.0998 53.504 40.0998 51.86C40.0998 50.216 40.8078 49.172 41.9958 49.172C43.1958 49.172 43.8918 50.216 43.8918 51.86ZM52.2916 56.084L54.3676 55.748L51.4876 47.684H49.2316L46.2556 56H48.2716L48.8236 54.284H51.6916L52.2916 56.084ZM50.2516 49.796L51.1756 52.676H49.3156L50.2516 49.796ZM62.5174 51.848C62.5174 49.388 61.0174 47.72 58.1374 47.72H55.2814V56H58.1854C60.9814 56 62.5174 54.308 62.5174 51.848ZM60.4534 51.86C60.4534 53.636 59.5414 54.404 58.0774 54.404H57.3334V49.316H58.0774C59.4814 49.316 60.4534 50.12 60.4534 51.86Z",fill:"currentColor"}));function c(e){var t=e.icon,n=e.onChange;return l("div",{className:i.default.iconContainer},void 0,null!=t?l("img",{alt:"Your icon",className:i.default.filledIcon,src:t}):s,l(a.default,{onChange:n,multiple:!1}))}c.displayName="TempUploadIcon"},7359:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.NewUserTypes=void 0,t.NewUserTypes=r,function(e){e[e.MARKETING_UNCLAIMED=0]="MARKETING_UNCLAIMED",e[e.INVITE_UNCLAIMED=1]="INVITE_UNCLAIMED",e[e.ORGANIC_REGISTERED=2]="ORGANIC_REGISTERED",e[e.ORGANIC_REGISTERED_GUILD_TEMPLATE=3]="ORGANIC_REGISTERED_GUILD_TEMPLATE"}(r||(t.NewUserTypes=r={}))},7378:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchLibrary=function(){return h.apply(this,arguments)},t.createTestModeLibraryApplications=function(e){return _.apply(this,arguments)},t.setActiveLaunchOptionId=function(e,t,n){a.default.dispatch({type:c.ActionTypes.LIBRARY_APPLICATION_ACTIVE_LAUNCH_OPTION_UPDATE,applicationId:e,branchId:t,launchOptionId:n})};var r=d(n(15)),a=d(n(3)),i=d(n(353)),o=d(n(920)),u=d(n(84)),l=n(796),s=d(n(1413)),c=n(1);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){f(i,r,a,o,u,"next",e)}function u(e){f(i,r,a,o,u,"throw",e)}o(void 0)}))}}function h(){return(h=p(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.httpGetWithCountryCodeQuery)({url:c.Endpoints.LIBRARY,oldFormErrors:!0});case 3:t=e.sent,a.default.dispatch({type:c.ActionTypes.LIBRARY_FETCH_SUCCESS,libraryApplications:t.body}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a.default.dispatch({type:c.ActionTypes.LIBRARY_FETCH_FAIL,error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function _(){return(_=p(regeneratorRuntime.mark((function e(t){var n,l,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=u.default.getGame(t))){e.next=7;break}return e.t0=i.default,e.next=5,s.default.fetchApplication(t);case 5:e.t1=e.sent,n=e.t0.createFromServer.call(e.t0,e.t1);case 7:if(null!=(l=n.primarySkuId)){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,r.default.get({url:c.Endpoints.APPLICATION_BRANCH_LIST(t),oldFormErrors:!0}).then((function(e){return e.body}));case 12:d=e.sent,f=d.map((function(e){return o.default.createForTestMode({id:t,skuId:l,branch:e})})),a.default.dispatch({type:c.ActionTypes.LIBRARY_APPLICATIONS_TEST_MODE_ENABLED,libraryApplications:f});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},7420:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setNewUser=function(e){a.default.wait((function(){return a.default.dispatch({type:i.ActionTypes.NUF_NEW_USER,newUserType:e})}))},t.setNewUserFlowCompleted=function(){a.default.wait((function(){return a.default.dispatch({type:i.ActionTypes.NUF_COMPLETE})}))};var r,a=(r=n(3))&&r.__esModule?r:{default:r},i=n(1)},7533:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=q;var r,a=F(n(0)),i=G(n(9)),o=n(1414),u=F(n(5)),l=n(70),s=G(n(282)),c=G(n(7794)),d=G(n(8209)),f=G(n(910)),p=F(n(8210)),h=G(n(1384)),_=G(n(5085)),E=n(7420),v=n(7359),y=n(1419),m=G(n(20)),g=G(n(903)),T=G(n(5068)),A=G(n(1412)),I=G(n(61)),S=G(n(278)),O=F(n(549)),C=G(n(135)),N=G(n(16)),b=n(97),M=G(n(5120)),P=G(n(5114)),R=F(n(5089)),L=G(n(5116)),D=n(1),w=G(n(6)),U=G(n(6555)),k=G(n(829));function G(e){return e&&e.__esModule?e:{default:e}}function j(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return j=function(){return e},e}function F(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=j();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function x(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}u.default.initialize();var H=/\.$/,W=function(e){return Array.isArray(e)?e.map((function(e){return e.replace(H,"")})).join(". ").trim():e},Y=x(R.InviteResolvingHeader,{}),K=x(d.default,{fromRegister:!0}),z=function(e){var t,n;function r(t){var n;(n=e.call(this,t)||this).dateOfBirthRef=a.createRef(),n._retryTimer=new l.Timeout,n.handleCaptchaVerify=function(e){return n.setState({captchaKey:e},(function(){return n.handleRegister()}))},n.handleGotoLogin=function(){var e=n.state.email,t=n.props,r=t.onLoginStart,a=t.giftCode,i=t.transitionTo,u=t.invite,l=t.guildTemplate,c=t.redirectTo,d=t.isGuest,f=t.location,p=t.closeRegister,h=t.openLogin;if(d)return void 0!==p&&p(),void(void 0!==h&&h());var _,E=null!=f?(0,o.parse)(f.search):{};null!=u?_=D.Routes.INVITE_LOGIN(u.code):null!=a?_=D.Routes.GIFT_CODE_LOGIN(a.code):null!=l?_=D.Routes.GUILD_TEMPLATE_LOGIN(l.code):null!=c?(_=D.Routes.LOGIN,E.redirect_to=c):(_=D.Routes.LOGIN,""!==e&&(E={email:e})),s.default.loginReset(),i(_,{search:(0,o.stringify)(E)}),null!=r&&r(),b.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE)},n.handleSubmit=function(e){e&&e.preventDefault(),n.handleRegister()},n.handleBirthdayChange=function(e){n.setState({parsedDateOfBirth:e})};var r=null!=t.location?(0,o.parse)(t.location.search):{};return n.state={email:r.email||"",username:"",password:"",parsedDateOfBirth:null,captchaKey:null,consent:!t.consentRequired,consentRequiredProp:t.consentRequired,isRateLimited:!1},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var u,c,d,m=r.prototype;return m.hasConsent=function(){var e=this.props.consentRequired,t=this.state.consent;return null!=e&&t},m.componentDidMount=function(){this.redirectIfAuthenticated();var e=this.props,t=e.giftCodeSKU,n=e.invite;N.default.track(D.AnalyticEvents.REGISTER_VIEWED,V({location:null!=n?"Invite Register Page":"Non-Invite Register Page",registration_source:this.registrationSource},null!=t?(0,h.default)(t,!1,!1):{}),{flush:!0}),null==this.props.consentRequired&&s.default.getConsentRequired(),(0,y.trackAppUIViewed)("register")},m.componentWillUnmount=function(){this._retryTimer.stop()},r.getDerivedStateFromProps=function(e,t){var n=e.consentRequired;return null==t.consentRequiredProp&&null!=n?{consent:!n,consentRequiredProp:n}:{consentRequiredProp:n}},m.componentDidUpdate=function(e,t){var n=this,r=this.props,a=r.apiErrors,i=r.authenticated,o=this.state.parsedDateOfBirth;e.apiErrors===a&&t.parsedDateOfBirth===o||(this.hasError("email")?null!=this.emailRef&&this.emailRef.focus():this.hasError("username")?null!=this.usernameRef&&this.usernameRef.focus():this.hasError("password")?null!=this.passwordRef&&this.passwordRef.focus():null==this.state.parsedDateOfBirth?null!=this.dateOfBirthRef.current&&this.dateOfBirthRef.current.focus():this.hasError("retry_after")&&(this.setState({isRateLimited:!0}),this._retryTimer.start(1e3*this.props.apiErrors.retry_after,(function(){n.setState({isRateLimited:!1})})))),i&&!e.authenticated&&this.redirectIfAuthenticated()},m.redirectIfAuthenticated=function(){var e=this.props,t=e.authenticated,n=e.transitionTo,r=e.redirectTo;t&&((0,E.setNewUser)(v.NewUserTypes.ORGANIC_REGISTERED),n(null!=r?r:T.default.defaultRoute))},m.handleRegister=function(){var e=this.state,t=e.email,n=e.username,r=e.password,a=e.captchaKey,i=e.consent,o=e.parsedDateOfBirth,u=this.props,l=u.invite,s=u.guildTemplate,c=u.giftCode,d=u.consentRequired,f=u.onRegister,h=null!=l?l.code:null,_=null!=c?c.skuId:null;if(null!==d&&(null!=l||null!=o)){b.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE);var E=null!=l?(0,p.default)({username:n,consent:i,invite:h,giftCodeSKUId:_,captchaKey:a}):(0,p.registerFull)({email:t,username:n,consent:i,password:r,invite:h,guildTemplateCode:null==s?void 0:s.code,giftCodeSKUId:_,captchaKey:a,birthday:o});E.catch((function(){return null})),f&&E.then(f)}},m.hasError=function(e){return null!=this.props.apiErrors[e]},m.renderConsentComponents=function(){var e=this,t=this.state.consent,n=null,r=null;return this.props.consentRequired?r=x(I.default,{className:k.default.marginTop20,align:I.default.Align.CENTER},void 0,x(A.default,{value:t,type:A.default.Types.INVERTED,onChange:function(t,n){return e.setState({consent:n})},className:U.default.checkbox},void 0,x(O.SubText,{},void 0,w.default.Messages.TERMS_PRIVACY_OPT_IN.format({termsURL:D.MarketingURLs.TERMS,privacyURL:D.MarketingURLs.PRIVACY})))):n=x(O.SubText,{className:k.default.marginTop20},void 0,w.default.Messages.TERMS_PRIVACY.format({termsURL:D.MarketingURLs.TERMS,privacyURL:D.MarketingURLs.PRIVACY})),{subText:n,consentText:r}},m.renderInviteResolving=function(){var e=this,t=this.props.authBoxClassName;return x(O.default,{className:t},void 0,Y,x(O.Block,{className:k.default.marginTop40},void 0,x(C.default,{},void 0,w.default.Messages.FORM_LABEL_USERNAME),x(S.default,{text:w.default.Messages.AUTH_USERNAME_TOOLTIP,position:S.default.Positions.RIGHT,color:S.default.Colors.BRAND},void 0,(function(t){var n=t.onMouseEnter,r=t.onMouseLeave;return x(O.Input,{autoFocus:!0,className:k.default.marginBottom8,name:"username",value:e.state.username,placeholder:w.default.Messages.FORM_PLACEHOLDER_USERNAME,onChange:function(t){return e.setState({username:t})},onMouseEnter:n,onMouseLeave:r})})),x(O.Button,{className:k.default.marginTop20,disabled:!0},void 0,w.default.Messages.CONTINUE),x(O.Button,{look:O.Button.Looks.LINK,disabled:!0,className:k.default.marginTop8},void 0,w.default.Messages.ALREADY_HAVE_ACCOUNT),x(O.SubText,{disabled:!0,className:k.default.marginTop20},void 0,w.default.Messages.TERMS_PRIVACY.format({termsURL:D.MarketingURLs.TERMS,privacyURL:D.MarketingURLs.PRIVACY}))))},m.renderInvite=function(){var e=this,t=this.props,n=t.invite,r=t.registering,i=t.consentRequired,o=t.authBoxClassName,u=t.apiErrors.username,l=this.state.consent,s=this.renderConsentComponents(),c=s.subText,d=s.consentText,f=x(S.default,{text:!l&&i?w.default.Messages.TERMS_PRIVACY_OPT_IN_TOOLTIP:null},void 0,(function(t){return a.createElement("div",V({className:k.default.marginTop20},t),x(O.Button,{type:"submit",submitting:r,disabled:!e.hasConsent()},void 0,w.default.Messages.CONTINUE))}));return x(O.default,{onSubmit:this.handleSubmit,tag:"form",className:o},void 0,x(R.default,{invite:n}),x(O.Block,{className:k.default.marginTop40},void 0,x(C.default,{error:W(u)},void 0,w.default.Messages.FORM_LABEL_USERNAME),x(S.default,{text:w.default.Messages.AUTH_USERNAME_TOOLTIP,position:S.default.Positions.RIGHT,color:S.default.Colors.BRAND},void 0,(function(t){var n=t.onMouseEnter,r=t.onMouseLeave;return x(O.Input,{autoFocus:!0,className:k.default.marginBottom8,name:"username",value:e.state.username,placeholder:w.default.Messages.FORM_PLACEHOLDER_USERNAME,onChange:function(t){return e.setState({username:t})},error:null!=u?"":null,onMouseEnter:n,onMouseLeave:r})})),d,f,x(O.Button,{look:O.Button.Looks.LINK,onClick:this.handleGotoLogin,className:k.default.marginTop8},void 0,w.default.Messages.ALREADY_HAVE_ACCOUNT),c))},m.renderErrorMessage=function(){var e=this.props.apiErrors.message,t=this.state.isRateLimited;return null!=e&&t?x(O.SubText,{className:(0,i.default)(k.default.marginTop20,U.default.errorMessage)},void 0,e):null},m.renderFull=function(e,t){var n=this,r=this.state,o=r.email,u=r.username,l=r.password,s=r.consent,c=r.parsedDateOfBirth,d=this.props,p=d.registering,h=d.consentRequired,_=d.isGuest,E=d.authBoxClassName,v=d.apiErrors,y=(v=void 0===v?{}:v).email,m=v.username,g=v.password,T=v.date_of_birth,A=this.renderConsentComponents(),I=A.subText,C=A.consentText,N=this.renderErrorMessage(),b=x(S.default,{text:!s&&h?w.default.Messages.TERMS_PRIVACY_OPT_IN_TOOLTIP:null},void 0,(function(e){return a.createElement("div",V({className:k.default.marginTop20},e),x(O.Button,{type:"submit",submitting:p,disabled:!n.hasConsent()||n.state.isRateLimited},void 0,w.default.Messages.CONTINUE))})),M=_?null:null!=e?e():x(O.Title,{},void 0,w.default.Messages.REGISTER_TITLE),P=x(O.Block,{className:k.default.marginTop20},void 0,x(O.Input,{autoFocus:!0,label:w.default.Messages.FORM_LABEL_EMAIL,className:k.default.marginBottom20,name:"email",value:o,onChange:function(e){return n.setState({email:e})},error:W(y),type:"email",setRef:function(e){n.emailRef=e}}),x(O.Input,{label:w.default.Messages.FORM_LABEL_USERNAME,className:k.default.marginBottom20,name:"username",value:u,onChange:function(e){return n.setState({username:e})},error:W(m),setRef:function(e){n.usernameRef=e}}),x(O.Input,{label:w.default.Messages.FORM_LABEL_PASSWORD,name:"password",value:l,onChange:function(e){return n.setState({password:e})},error:W(g),type:"password",setRef:function(e){n.passwordRef=e}}),a.createElement(f.default,{label:w.default.Messages.AGE_GATE_YOUR_BIRTHDAY,wrapperClassName:k.default.marginTop20,name:"date_of_birth",onChange:this.handleBirthdayChange,ref:this.dateOfBirthRef,error:W(T),value:c}),C,b,N,x(O.Button,{look:O.Button.Looks.LINK,onClick:this.handleGotoLogin,className:k.default.marginTop8},void 0,w.default.Messages.ALREADY_HAVE_ACCOUNT),I);return t?x(L.default,{onSubmit:this.handleSubmit,tag:"form",className:(0,i.default)(E,U.default.horizontalAuthBox)},void 0,(function(){return[M,x("div",{className:U.default.flex},void 0,x(O.Title,{className:U.default.createAccountTemplateHeader},void 0,w.default.Messages.REGISTER_TITLE),P)]})):x(O.default,{onSubmit:this.handleSubmit,tag:"form",className:E},void 0,M,P)},m.render=function(){var e=this.props,t=e.isGuest,n=e.authBoxClassName;if(e.isUnderage||this.hasError("date_of_birth"))return K;if(this.hasError("captcha_key"))return x(M.default,{authBoxClassName:n,onVerify:this.handleCaptchaVerify,title:t?null:w.default.Messages.REGISTER_TITLE});var r=this.props,a=r.invite,i=r.giftCode,o=r.guildTemplate;if(null!=a)return a.state===D.InviteStates.RESOLVING?this.renderInviteResolving():this.renderInvite();var u=x(_.default,{guildTemplate:o});if(null!=o)return this.renderFull((function(){return u}),!0);var l=x(P.default,{giftCode:i});return null!=i?this.renderFull((function(){return l})):this.renderFull()},u=r,(c=[{key:"registrationSource",get:function(){var e=this.props,t=e.giftCode,n=e.guildTemplate,r=e.invite;return null!=t?"gift":null!=n?"guild_template":null!=r?null!=r.guild?"guild_invite":"dm_invite":null}}])&&B(u.prototype,c),d&&B(u,d),r}(a.PureComponent);function q(e){var t={consentRequired:(0,u.useStateFromStores)([g.default],(function(){return g.default.getAuthenticationConsentRequired()})),registering:(0,u.useStateFromStores)([m.default],(function(){return m.default.getRegisterStatus()===D.RegistrationStates.REGISTERING})),apiErrors:(0,u.useStateFromStores)([m.default],(function(){return m.default.getErrors()})),authenticated:(0,u.useStateFromStores)([m.default],(function(){return m.default.isAuthenticated()})),isUnderage:(0,u.useStateFromStores)([c.default],(function(){return c.default.isUnderageAnonymous()}))};return a.createElement(z,V({},e,t))}z.displayName="Register",z.defaultProps={giftCodeResolved:!1,transitionTo:function(t){return e.location.assign(t)}},q.displayName="ConnectedRegister"}).call(this,n(32))},7540:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=v(n(0)),i=n(7),o=v(n(47)),u=_(n(7174)),l=n(142),s=n(121),c=_(n(7258)),d=n(83),f=n(1),p=_(n(6)),h=_(n(6371));function _(e){return e&&e.__esModule?e:{default:e}}function E(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return E=function(){return e},e}function v(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=E();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function g(e,t,n){var r={top:0,bottom:0,left:0,right:0},a=e-n,i=t-n;return 0!==a&&(r.left=-Math.abs(a/2),r.right=a/2),0!==i&&(r.bottom=-Math.abs(i/2),r.top=i/2),r}var T=function(e){var t=e.imgURI,n=e.transitionState,r=e.onCrop,_=e.filename,E=e.onClose,v=a.useState(0),T=v[0],A=v[1],I=a.useState({top:0,bottom:0,left:0,right:0}),S=I[0],O=I[1],C=a.useState(!1),N=C[0],b=C[1],M=a.useState(1),P=M[0],R=M[1],L=a.useState({x:0,y:0}),D=L[0],w=L[1],U=a.useState(null),k=U[0],G=U[1],j=a.useRef({x:0,y:0}),F=a.createRef(),x=(0,l.useUID)(),V=a.useCallback((function(e,t,n){j.current=function(e,t,n){return{x:(0,i.clamp)(e,n.left,n.right),y:(0,i.clamp)(t,n.bottom,n.top)}}(e,t,n),null!=F.current&&(F.current.style.transform="translate3d("+j.current.x+"px, "+j.current.y+"px, 0)")}),[F]),B=function(){if(!(null==F.current||P>1)){var e=F.current.getBoundingClientRect(),t=e.width,n=e.height;G({width:t,height:n});var r=Math.min(t,n);A(r),O(g(t,n,r))}},H=a.useCallback((function(e){var t=j.current,n=t.x,r=t.y;if(N&&(e.clientX!==n||e.clientY!==r)){var a=e.clientX-D.x,i=e.clientY-D.y;V(a,i,S)}}),[S,N,D,V]),W=function(){b(!1)};return a.useEffect((function(){return window.addEventListener("mouseup",W),window.addEventListener("resize",B),function(){window.removeEventListener("mouseup",W),window.removeEventListener("resize",B)}})),a.useEffect((function(){if(N)return window.addEventListener("mousemove",H),function(){return window.removeEventListener("mousemove",H)}}),[H,N]),m(d.ModalRoot,{onAnimationEnd:B,transitionState:n,size:d.ModalSize.MEDIUM,"aria-labelledby":x},void 0,m(d.ModalContent,{className:h.default.modalContent},void 0,m(d.ModalHeader,{separator:!1,id:x},void 0,m(s.FormTitle,{tag:s.FormTitleTags.H4},void 0,p.default.Messages.AVATAR_UPLOAD_EDIT_MEDIA)),m("div",{className:h.default.editingContainer},void 0,a.createElement("img",{style:y({transform:"translate3d("+j.current.x+"px, "+j.current.y+"px, 0px)"},null==k||1===P?{}:{width:k.width*P,minWidth:k.width*P,height:k.height*P}),className:h.default.image,src:t,alt:"avatar",ref:F,onMouseDown:function(e){var t=e.clientX-j.current.x,n=e.clientY-j.current.y;w({x:t,y:n}),b(!0)},draggable:!1}),m("div",{className:h.default.overlay,style:{width:T,height:T}})),m("div",{className:h.default.sliderContainer},void 0,m(c.default,{className:h.default.icon,width:24,height:24}),m(u.default,{initialValue:1,minValue:1,maxValue:2,asValueChanges:function(e){if(null!=k){var t=g(k.width*e,k.height*e,T),n=j.current,r=n.x,a=n.y;(0,i.inRange)(r,t.right,t.left)&&(0,i.inRange)(a,t.top,t.bottom)||V(r,a,t),R(e),O(t)}},equidistant:!0,hideBubble:!0}),m(c.default,{className:h.default.icon,width:48,height:48}))),m(d.ModalFooter,{className:h.default.modalFooter},void 0,m(o.default,{className:h.default.cancelButton,look:o.default.Looks.LINK,color:o.default.Colors.PRIMARY,size:o.ButtonSizes.SMALL,onClick:E},void 0,p.default.Messages.AVATAR_UPLOAD_CANCEL),m(o.default,{size:o.ButtonSizes.SMALL,onClick:function(){if(null!=F.current){var e=F.current,t=e.naturalWidth/e.width,n=T/2,a=(e.width/2-n-j.current.x)*t,i=(e.height/2-n-j.current.y)*t,o=T*t,u=Math.min(o,f.AVATAR_MAX_SIZE),l=document.createElement("canvas");l.width=u,l.height=u;var s=l.getContext("2d");null!=s&&s.drawImage(e,a,i,o,o,0,0,l.width,l.height),r(l.toDataURL("image/png"),_),E()}}},void 0,p.default.Messages.AVATAR_UPLOAD_APPLY)))};T.displayName="AvatarUploadModal";var A=T;t.default=A},7579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){void 0===t&&(t=!0);var n=a.useState(""),r=n[0],i=n[1],o=a.useState(null),u=o[0],h=o[1],_=a.useState(null),E=_[0],O=_[1],C=(0,m.default)(e);a.useEffect((function(){function e(){return(e=M(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=d.default.getNullableCurrentUser())){e.next=11;break}return e.prev=2,e.next=5,(0,s.fetchCurrentUser)();case 5:t=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),l.default.verifySSOToken(null);case 11:null!=t&&i(C.defaultName.format({username:t.username}));case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[C.defaultName]);(0,g.default)(e);var b=a.createElement(a.Fragment,null,t?N(T.default,{guildTemplate:e}):null,N("div",{className:S.default.icon},void 0,N(c.default,{icon:u,onChange:h})),N(p.default,{title:C.nameLabel},void 0,N(f.default,{type:"text",value:r,maxLength:100,onChange:i,error:null==E?void 0:E.name})),N(v.default,{size:v.default.Sizes.SIZE_12,color:v.default.Colors.MUTED,className:S.default.guidelines},void 0,C.terms.format({guidelinesURL:A.MarketingURLs.GUIDELINES}))),L=e.serializedSourceGuild.roles.filter((function(e){return"@everyone"!==e.name})),D=a.createElement(a.Fragment,null,N("div",{className:S.default.divider}),N(p.default,{className:S.default.previewSection,title:I.default.Messages.GUILD_TEMPLATE_MODAL_CHANNELS_HEADER},void 0,N(P,{channels:e.serializedSourceGuild.channels}),N(v.default,{size:v.default.Sizes.SIZE_12,color:v.default.Colors.HEADER_SECONDARY,className:S.default.protip},void 0,N("span",{className:S.default.protipText},void 0,I.default.Messages.FORM_LABEL_ROLES_PRO_TIP,":")," ",I.default.Messages.GUILD_TEMPLATE_MODAL_CHANNELS_TIP)),L.length>0?a.createElement(a.Fragment,null,N(p.default,{className:S.default.previewSection,title:I.default.Messages.GUILD_TEMPLATE_MODAL_ROLES_HEADER2},void 0,N(R,{roles:L}))):null);return{form:b,preview:D,handleSubmit:function(){return y.default.acceptGuildTemplate(e.code,r,u).catch((function(e){return O(e)}))}}};var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=C();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=O(n(9)),o=O(n(7)),u=n(218),l=O(n(282)),s=n(886),c=O(n(7339)),d=O(n(24)),f=O(n(153)),p=O(n(345)),h=O(n(1371)),_=O(n(7109)),E=O(n(7086)),v=O(n(68)),y=O(n(7580)),m=O(n(5093)),g=O(n(7581)),T=O(n(5086)),A=n(1),I=O(n(6)),S=O(n(6374));function O(e){return e&&e.__esModule?e:{default:e}}function C(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return C=function(){return e},e}function N(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function b(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){b(i,r,a,o,u,"next",e)}function u(e){b(i,r,a,o,u,"throw",e)}o(void 0)}))}}function P(e){var t=e.channels,n=(0,o.default)(t).sortBy((function(e){return null==e.parent_id?1e4*Number(e.id):1e4*Number(e.parent_id)+e.id})).map((function(e){var t,n,r=(n=e.type)===A.ChannelTypes.GUILD_VOICE?E.default:n===A.ChannelTypes.GUILD_CATEGORY?h.default:_.default;return N("div",{className:(0,i.default)(S.default.channel,(t={},t[S.default.category]=e.type===A.ChannelTypes.GUILD_CATEGORY,t))},e.id,N(r,{className:S.default.channelIcon}),N(v.default,{className:S.default.channelText},void 0,e.name))})).value();return N("div",{className:S.default.channelsWrapper},void 0,n)}function R(e){var t=e.roles.slice().reverse().map((function(e){return N(L,{role:e},e.id)}));return N("ul",{className:S.default.rolesWrapper},void 0,t)}function L(e){var t,n=e.role,r=null==n.color?A.Colors.PRIMARY_DARK_300:(0,u.int2hex)(n.color),a=N("div",{className:S.default.roleCircle,style:{backgroundColor:r}});return N("li",{className:S.default.role,style:{borderColor:null!==(t=(0,u.hex2rgb)(r,.6))&&void 0!==t?t:void 0}},void 0,a,N("div",{className:S.default.roleName},void 0,n.name))}n(7582),P.displayName="Channels",R.displayName="Roles",L.displayName="Role"},7580:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(15)),a=c(n(3)),i=c(n(1433)),o=c(n(197)),u=c(n(34)),l=c(n(69)),s=n(1);function c(e){return e&&e.__esModule?e:{default:e}}var d={acceptGuildTemplate:function(e,t,n){return a.default.dirtyDispatch({type:s.ActionTypes.GUILD_TEMPLATE_ACCEPT,code:e}),new Promise((function(c,d){r.default.post({url:s.Endpoints.UNRESOLVED_GUILD_TEMPLATE(e),body:{name:t,icon:n},oldFormErrors:!0}).then((function(t){var n=t.body;a.default.dispatch({type:s.ActionTypes.GUILD_TEMPLATE_ACCEPT_SUCCESS,code:e,guild:n}),i.default.isConnected()?u.default.addConditionalChangeListener((function(){var e;if(null!=u.default.getGuild(n.id))return l.default.transitionToGuild(n.id,null===(e=o.default.getDefaultChannel(n.id))||void 0===e?void 0:e.id),c(n),!1})):(l.default.transitionToGuild(n.id),c(n))}),(function(t){a.default.dispatch({type:s.ActionTypes.GUILD_TEMPLATE_ACCEPT_FAILURE,code:e}),d(t.body)}))}))}};t.default=d},7581:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=a.useRef([]);a.useEffect((function(){null!=e&&e.state!==o.GuildTemplateStates.RESOLVING&&(t.current.includes(e.code)||(t.current.push(e.code),i.default.track(u.AnalyticEvents.CREATE_GUILD_VIEWED,{guild_template_code:e.code,guild_template_name:e.name,guild_template_description:e.description,guild_template_guild_id:e.sourceGuildId})))}))};var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=(r=n(16))&&r.__esModule?r:{default:r},o=n(294),u=n(1);function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}},7582:function(e,t,n){e.exports=n.p+"3e32a26f74dd0b05787417375bee3542.png"},7720:function(e,t,n){e.exports=n.p+"4b25b64915cb0e74934b6b749445def2.svg"},7794:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(818)),a=l(n(5)),i=l(n(3)),o=l(n(14)),u=n(565);n(1);function l(e){return e&&e.__esModule?e:{default:e}}var s=null;var c=new(function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.prototype.isUnderageAnonymous=function(){return o.default.embedded?null!=s&&s+u.AGE_GATE_REGISTER_TIMEOUT_MS>Date.now():null!=r.default.parse(document.cookie).underage},a}(a.default.Store))(i.default,{AGE_GATE_PREVENT_UNDERAGE_REGISTRATION:function(e){return!0,s=Date.now(),void(document.cookie="underage=1;path=/")},LOGIN_SUCCESS:function(e){return!1,s=null,void(document.cookie="underage=1;path=/;max-age=0")}});t.default=c},793:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=j(n(15)),a=j(n(3)),i=j(n(913)),o=G(n(1465)),u=j(n(211)),l=j(n(341)),s=n(807),c=j(n(812)),d=j(n(25)),f=n(893),p=j(n(1385)),h=n(294),_=j(n(1444)),E=j(n(4854)),v=G(n(921)),y=j(n(4855)),m=j(n(272)),g=j(n(20)),T=j(n(29)),A=j(n(1433)),I=j(n(34)),S=j(n(1391)),O=j(n(797)),C=j(n(99)),N=j(n(281)),b=j(n(830)),M=j(n(24)),P=n(800),R=j(n(117)),L=j(n(112)),D=j(n(154)),w=n(1),U=j(n(6));function k(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return k=function(){return e},e}function G(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=k();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function j(e){return e&&e.__esModule?e:{default:e}}function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var x=new d.default("MessageActionCreators"),V=!1;function B(e,t,n,r,a){(0,c.default)(e).forEach((function(e){var i=e.type,o=e.code;if(i===s.CodedLinkType.INVITE)!function(e,t,n,r,a){var i=T.default.getChannel(t);if(null!=i){var o=null;i.isMultiUserDM()?o=w.InviteTypes.GDM_INVITE:i.isPrivate()||(o=w.InviteTypes.SERVER_INVITE);var l={},s=S.default.getInvite(e);if(null!=s&&s.state===w.InviteStates.RESOLVED&&null!=s.channel){var c=s.channel;l.invite_channel_id=c.id,l.invite_channel_type=c.type,null!=s.inviter&&(l.invite_inviter_id=s.inviter.id);var d=m.default.getLastActiveStream();if(null!=d&&d.channelId===c.id){o=w.InviteTypes.STREAM,l.destination_user_id=d.ownerId;var p=(0,f.getStreamerApplication)(d,N.default);l.application_id=null!=p?p.id:null}}null!=a&&(l.is_suggested=a.isAffinitySuggestion,l.row_num=a.rowNum,l.num_total=a.numTotal,l.num_affinity_connections=a.numAffinityConnections,l.is_filtered=a.isFiltered),l=F({},l,{location:r,invite_type:o,invite_code:e,guild_id:i.getGuildId(),channel_id:i.id,message_id:n}),u.default.trackWithMetadata(w.AnalyticEvents.INVITE_SENT,l)}}(o,t,n,r,a);else if(i===s.CodedLinkType.TEMPLATE){var l=p.default.getGuildTemplate(o);if(null==l||l.state===h.GuildTemplateStates.RESOLVING)return;u.default.trackWithMetadata(w.AnalyticEvents.GUILD_TEMPLATE_LINK_SENT,{guild_template_code:o,guild_template_name:l.name,guild_template_description:l.description,guild_template_guild_id:l.sourceGuildId})}else if(i!==s.CodedLinkType.BUILD_OVERRIDE)throw Error("Unknown coded link type: "+i)}))}var H={receiveMessage:function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r={}),a.default.dirtyDispatch({type:w.ActionTypes.MESSAGE_CREATE,channelId:e,message:t,optimistic:n,sendMessageOptions:r,isPushNotification:!1})},sendBotMessage:function(e,t){H.receiveMessage(e,(0,v.createBotMessage)(e,t))},sendClydeError:function(e,t){void 0===t&&(t=0);var n=T.default.getChannel(e);if(null!=n){var r;if(t===w.AbortCodes.EXPLICIT_CONTENT)if(n.isDM())r=U.default.Messages.BOT_DM_EXPLICIT_CONTENT.format({name:(0,l.default)(n)});else if(n.isMultiUserDM())r=U.default.Messages.BOT_GDM_EXPLICIT_CONTENT.format({name:(0,l.default)(n)});else{var a=I.default.getGuild(n.getGuildId());if(null==a)return;r=U.default.Messages.BOT_GUILD_EXPLICIT_CONTENT.format({name:a.toString()})}else r=t===w.AbortCodes.SLOWMODE_RATE_LIMITED?U.default.Messages.CHANNEL_SLOWMODE_DESC.format({seconds:n.rateLimitPerUser}):U.default.Messages[w.CLYDE_ERROR_MESSAGES[t]||w.CLYDE_ERROR_MESSAGES.DEFAULT];H.sendBotMessage(e,r)}},truncateMessages:function(e,t,n){a.default.dirtyDispatch({type:w.ActionTypes.TRUNCATE_MESSAGES,channelId:e,truncateBottom:t,truncateTop:n})},clearChannel:function(e){a.default.dirtyDispatch({type:w.ActionTypes.CLEAR_MESSAGES,channelId:e})},jumpToPresent:function(e,t){H.trackJump(e,null,"Present");var n={present:!0};O.default.hasPresent(e)?a.default.dirtyDispatch({type:w.ActionTypes.LOAD_MESSAGES_SUCCESS_CACHED,jump:n,channelId:e,limit:t}):H.fetchMessages({channelId:e,limit:t,jump:n})},trackJump:function(e,t,n,r){u.default.trackWithMetadata(w.AnalyticEvents.JUMP,F({context:n,channel_id:e,message_id:t},r))},jumpToMessage:function(e){var t=e.channelId,n=e.messageId,r=e.flash,a=void 0!==r&&r,i=e.offset,o=e.context,u=e.extraProperties,l=void 0===u?null:u,s=e.isPreload,c=e.returnMessageId;"string"==typeof o&&H.trackJump(t,n,o,l),H.fetchMessages({channelId:t,limit:w.MAX_MESSAGES_FOR_JUMP,jump:{messageId:n,flash:a,offset:i,returnMessageId:c},isPreload:s})},fetchMessages:function(e){var t=e.channelId,n=e.before,o=e.after,u=e.limit,l=e.jump,s=e.isPreload,c=e.truncate,d=T.default.getChannel(t),f=A.default.isConnectedOrOverlay(),p=Date.now();if(null!=d&&d.type===w.ChannelTypes.GUILD_STORE)return!1;if(x.log("Fetching messages for "+t+" between "+n+" and "+o+"."),!H._tryFetchMessagesCached({channelId:t,before:n,after:o,limit:u,jump:l,truncate:c})){var h=i.default.getOrCreate(t).loadStart(l);i.default.commit(h),a.default.dirtyDispatch({type:w.ActionTypes.LOAD_MESSAGES});var _=l&&l.messageId;return y.default.messageFetchStart(t),r.default.get({url:w.Endpoints.MESSAGES(t),query:{before:n,after:o,limit:u,around:_,preload:s},retries:2,oldFormErrors:!0}).then((function(e){var r=e.body,i=null!=n,s=null!=o,d=null==n&&null==o,h=null!=_||r.length===u&&(i||d),E=null!=_||s&&r.length===u;if(_){var v=u/2,m=[_].concat(r.map((function(e){return e.id}))).filter((function(e,t,n){return n.indexOf(e)===t})).sort(L.default.compare).indexOf(_);if(m<Math.floor(v)&&(h=!1),r.length-m<v&&(E=!1),E&&r.length){var g=b.default.lastMessageId(t);r[0].id===g&&(E=!1)}}x.log("Fetched "+r.length+" messages for "+t+" isBefore:"+i+" isAfter:"+s),y.default.messageFetchEnd(t),a.default.dispatch({type:w.ActionTypes.LOAD_MESSAGES_SUCCESS,channelId:t,messages:r,isBefore:i,isAfter:s,hasMoreBefore:h,hasMoreAfter:E,jump:l,isStale:!f||A.default.lastTimeConnectedChanged()>=p,truncate:c})}),(function(){x.log("Failed to fetch messages for "+t),a.default.dispatch({type:w.ActionTypes.LOAD_MESSAGES_FAILURE,channelId:t})}))}},_tryFetchMessagesCached:function(e){var t=e.channelId,n=e.before,r=e.after,i=e.limit,o=e.jump,u=e.truncate,l=O.default.getMessages(t);if(l.cached)return!1;if(null!=o&&null!=o.messageId){if(l.has(o.messageId,!1))return a.default.dirtyDispatch({type:w.ActionTypes.LOAD_MESSAGES_SUCCESS_CACHED,channelId:t,jump:o,limit:i,truncate:u}),!0;var s=L.default.extractTimestamp(o.messageId),c=l.first(),d=l.last();return(!l.hasMoreBefore&&null!=c&&L.default.extractTimestamp(c.id)>=s||!l.hasMoreAfter&&null!=d&&L.default.extractTimestamp(d.id)<=s||null!=c&&null!=d&&L.default.extractTimestamp(c.id)<s&&L.default.extractTimestamp(d.id)>s)&&(a.default.dirtyDispatch({type:w.ActionTypes.LOAD_MESSAGES_SUCCESS_CACHED,channelId:t,jump:o,limit:w.MAX_MESSAGES_FOR_JUMP}),!0)}return n&&l.hasBeforeCached(n)?(a.default.dirtyDispatch({type:w.ActionTypes.LOAD_MESSAGES_SUCCESS_CACHED,channelId:t,before:n,limit:i,truncate:u}),!0):!(!r||!l.hasAfterCached(r))&&(a.default.dirtyDispatch({type:w.ActionTypes.LOAD_MESSAGES_SUCCESS_CACHED,channelId:t,after:r,limit:i,truncate:u}),!0)},sendMessage:function(e,t,n,r){if(void 0===n&&(n=!0),void 0===r&&(r={}),t.reaction)return Promise.resolve();var a=function(){return H._sendMessage(e,t,r)};return n?new Promise((function(t,n){O.default.whenReady(e,(function(){return a().then(t,n)}))})):a()},getSendMessageOptionsForReply:function(e){var t;return null==e?{}:{messageReference:{guild_id:null!==(t=e.channel.getGuildId())&&void 0!==t?t:void 0,channel_id:e.channel.id,message_id:e.message.id},allowedMentions:e.shouldMention?void 0:{parse:Object.values(w.AllowedMentionTypes),replied_user:!1}}},sendInvite:function(e,t,n,r){return H._sendMessage(e,{content:(0,_.default)(t),tts:!1,validNonShortcutEmojis:[],invalidEmojis:[]},{location:n,suggestedInvite:null!=r?r:void 0})},sendStickers:function(e,t,n){return void 0===n&&(n={}),H._sendMessage(e,{content:"",invalidEmojis:[],validNonShortcutEmojis:[],tts:!1},F({},n,{stickerIds:t}))},_sendMessage:function(e,t,n){var r=t.content,i=t.invalidEmojis,l=t.validNonShortcutEmojis,s=t.tts,c=void 0!==s&&s,d=n.activityAction,f=n.location,p=n.suggestedInvite,h=n.stickerIds,_=n.messageReference,y=n.allowedMentions;if(!r&&null==d&&null==h)return Promise.reject(new Error("not sending empty message"));var m=null!=_?w.MessageTypes.REPLY:w.MessageTypes.DEFAULT,A=(0,v.default)(e,r,c,m,_);if(H.receiveMessage(e,A,!0,n),!V&&i&&i.length>0){V=!0;var I,S=M.default.getCurrentUser();I=i.some((function(e){return e.animated}))&&!R.default.canUseAnimatedEmojis(S)?U.default.Messages.INVALID_ANIMATED_EMOJI_BODY_UPGRADE:C.default.canWithPartialContext(w.Permissions.USE_EXTERNAL_EMOJIS,{channelId:e})?U.default.Messages.INVALID_EXTERNAL_EMOJI_BODY_UPGRADE:U.default.Messages.INVALID_EXTERNAL_EMOJI_BODY,H.sendBotMessage(e,I)}var O={type:o.MessageDataType.SEND,message:{channelId:e,content:r,nonce:A.id,tts:c,message_reference:_,allowed_mentions:y}};if(null!=d){var N=d.type===w.ActivityActionTypes.JOIN_REQUEST?null==d?void 0:d.activity.session_id:g.default.getSessionId();if(null!=N){var b={type:d.type,session_id:N},L=d.activity;null!=L.party&&null!=L.party.id&&(b.party_id=L.party.id),O.message.application_id=L.application_id,O.message.activity=b}}return null!=h&&(O.message.sticker_ids=h),new Promise((function(t,n){o.default.enqueue(O,(function(i){if(i.ok)E.default.donateSentMessage(r,e),H.receiveMessage(e,i.body),a.default.dispatch({type:w.ActionTypes.SLOWMODE_START_COOLDOWN,channelId:e}),a.default.dispatch({type:w.ActionTypes.EMOJI_TRACK_USAGE,emojiUsed:l}),a.default.dispatch({type:w.ActionTypes.STICKER_TRACK_USAGE,stickerIds:h}),B(r,e,i.body.id,f||"chat_input",p),function(e,t,n,r){(0,P.findGiftCodes)(e).forEach((function(e){var a=T.default.getChannel(t);null!=a&&u.default.trackWithMetadata(w.AnalyticEvents.GIFT_CODE_SENT,{location:r,gift_code:e,guild_id:a.getGuildId(),channel_id:a.id,channel_type:a.type,message_id:n})}))}(r,e,i.body.id,f||"chat_input"),t(i);else{var o=!1;if(i.hasErr)"ABORTED"===i.err.code&&(o=!0);else if(i.status>=400&&i.status<500&&i.body)if(i.body.code===w.AbortCodes.SLOWMODE_RATE_LIMITED){var s=i.body.retry_after;null!=s&&s>0&&a.default.dispatch({type:w.ActionTypes.SLOWMODE_START_COOLDOWN,channelId:e,cooldownMs:1e3*s})}else H.sendClydeError(e,i.body.code);o?H.deleteMessage(e,A.id,!0):a.default.dispatch({type:w.ActionTypes.MESSAGE_SEND_FAILED,messageId:A.id,channelId:e}),n(i)}}))}))},startEditMessage:function(e,t,n){a.default.dispatch({type:w.ActionTypes.MESSAGE_START_EDIT,channelId:e,messageId:t,content:n})},updateEditMessage:function(e,t,n){a.default.dispatch({type:w.ActionTypes.MESSAGE_UPDATE_EDIT,channelId:e,textValue:t,richValue:n})},endEditMessage:function(e,t){a.default.dispatch({type:w.ActionTypes.MESSAGE_END_EDIT,channelId:e,response:t})},editMessage:function(e,t,n){var r=n.content,a={channelId:e,messageId:t,content:r};o.default.enqueue({type:o.MessageDataType.EDIT,message:a},(function(t){H.endEditMessage(e,t.hasErr?void 0:t)}))},suppressEmbeds:function(e,t){r.default.patch({url:w.Endpoints.MESSAGE(e,t),body:{flags:w.MessageFlags.SUPPRESS_EMBEDS},oldFormErrors:!0})},deleteMessage:function(e,t,n){void 0===n&&(n=!1),n?a.default.dispatch({type:w.ActionTypes.MESSAGE_DELETE,id:t,channelId:e}):r.default.delete({url:w.Endpoints.MESSAGE(e,t),oldFormErrors:!0}).then((function(){a.default.dispatch({type:w.ActionTypes.MESSAGE_DELETE,id:t,channelId:e})}))},revealMessage:function(e,t){a.default.dispatch({type:w.ActionTypes.MESSAGE_REVEAL,channelId:e,messageId:t})},crosspostMessage:function(e,t){return r.default.post({url:w.Endpoints.MESSAGE_CROSSPOST(e,t),oldFormErrors:!0}).catch((function(e){var t;t=429===e.status?U.default.Messages.PUBLISH_FOLLOWED_NEWS_FAIL_BODY.format({retryAfter:Math.floor(e.body.retry_after/60)}):U.default.Messages.PUBLISH_FOLLOWED_NEWS_GENERIC_BODY,D.default.show({title:U.default.Messages.PUBLISH_FOLLOWED_NEWS_FAIL_TITLE,body:t,confirmText:U.default.Messages.OKAY})}))},speakMessage:function(e,t){a.default.dispatch({type:w.ActionTypes.SPEAK_MESSAGE,channelId:e,messageId:t})},stopSpeakingMessage:function(){a.default.dispatch({type:w.ActionTypes.STOP_SPEAKING_MESSAGE})}},W=H;t.default=W},8004:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(149)),a=s(n(4947)),i=s(n(5106)),o=s(n(5080)),u=s(n(1394)),l=n(1);function s(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d=c({},u.default,{openNativeAppModal:function(e){a.default.openNativeAppModal(e,l.RPCCommands.GUILD_TEMPLATE_BROWSER)},openMobileApp:function(e,t){if(!(null!=platform.ua&&platform.ua.toLowerCase().indexOf("googlebot")>-1)){var n=(0,i.default)("template",{queryString:r.default.stringify({fingerprint:t}),guildTemplateCode:e});o.default.launch(n,(function(){}))}}});t.default=d},8209:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;p(n(0));var r,a=d(n(47)),i=p(n(549)),o=d(n(190)),u=d(n(69)),l=n(1),s=d(n(6)),c=d(n(6554));function d(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var _=function(){return u.default.transitionTo(l.Routes.LOGIN)},E=function(e){var t=e.authBoxClassName,r=e.underageMessage,u=e.fromRegister;return h(i.default,{className:t},void 0,h("img",{alt:"",src:n(7720),className:c.default.img}),h(i.Title,{className:c.default.title},void 0,s.default.Messages.AGE_GATE_UNDERAGE_HEADER),h(i.SubTitle,{className:c.default.subtitle},void 0,u?s.default.Messages.AGE_GATE_UNDERAGE_BODY_POST_REGISTER_MESSAGE:s.default.Messages.AGE_GATE_UNDERAGE_BODY.format({underageMessage:r||s.default.Messages.AGE_GATE_UNDERAGE_BODY_DEFAULT_MESSAGE,helpURL:o.default.getArticleURL(l.HelpdeskArticles.AGE_GATE)})),h(a.default,{fullWidth:!0,onClick:_},void 0,s.default.Messages.AGE_GATE_UNDERAGE_BACK_TO_LOGIN))};E.displayName="AgeGateUnderage";var v=E;t.default=v},8210:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerDeferred=function(e){a.default.dispatch({type:s.ActionTypes.REGISTER_WITH_AGE_GATE,form:e})},t.default=function(e){var t=e.invite,n=void 0===t?null:t,r=e.giftCodeSKUId,a=void 0===r?null:r,i=e.captchaKey,o=void 0===i?null:i;return p(f({},function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["invite","giftCodeSKUId","captchaKey"]),{invite:n,giftCodeSKUId:a,captchaKey:o}))},t.registerFull=p;var r=d(n(15)),a=d(n(3)),i=d(n(214)),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(909)),u=d(n(20)),l=d(n(931)),s=n(1);function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function d(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e){var t=e.email,n=e.username,c=e.consent,d=e.password,f=e.guildTemplateCode,p=e.birthday,h=e.invite,_=void 0===h?null:h,E=e.giftCodeSKUId,v=void 0===E?null:E,y=e.captchaKey,m=void 0===y?null:y,g=e.multiStep,T=void 0!==g&&g;return a.default.dispatch({type:s.ActionTypes.REGISTER,birthday:T?p:null}),null!=p&&(0,l.default)(p,s.AnalyticsSections.REGISTER),r.default.post({url:s.Endpoints.REGISTER,body:{fingerprint:u.default.getFingerprint(),email:t,username:n,password:d,invite:_,consent:c,date_of_birth:null==p?void 0:p.format("YYYY-MM-DD"),gift_code_sku_id:v,guild_template_code:f,captcha_key:m},oldFormErrors:!0}).then((function(e){a.default.dispatch({type:s.ActionTypes.REGISTER_SUCCESS,token:e.body.token})}),(function(e){var t=new i.default(e);throw a.default.dispatch({type:s.ActionTypes.REGISTER_FAILURE,error:t}),t.fields.hasOwnProperty("date_of_birth")&&o.preventUnderageRegistration(),e}))}},8231:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(5)),a=i(n(3));n(1);function i(e){return e&&e.__esModule?e:{default:e}}var o=null;var u=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(e){var t;o=null!==(t=null==e?void 0:e.type)&&void 0!==t?t:null},a.getType=function(){return o},a.getState=function(){return{type:o}},r}(r.default.PersistedStore);u.persistKey="nuf";var l=new u(a.default,{NUF_NEW_USER:function(e){var t=e.newUserType;o=t},NUF_COMPLETE:function(e){o=null}});t.default=l},830:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldBadgeMessage=Y,t.default=void 0;var r=P(n(108)),a=P(n(5)),i=P(n(15)),o=n(70),u=P(n(3)),l=n(211),s=P(n(1420)),c=P(n(25)),d=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=M();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(902)),f=n(86),p=P(n(195)),h=P(n(112)),_=P(n(20)),E=P(n(29)),v=P(n(890)),y=P(n(556)),m=P(n(1427)),g=P(n(34)),T=P(n(815)),A=P(n(797)),I=P(n(99)),S=P(n(280)),O=P(n(98)),C=P(n(831)),N=P(n(24)),b=n(1);function M(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return M=function(){return e},e}function P(e){return e&&e.__esModule?e:{default:e}}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){L(i,r,a,o,u,"next",e)}function u(e){L(i,r,a,o,u,"throw",e)}o(void 0)}))}}var w,U=new c.default("ReadStateStore");__OVERLAY__&&(w=n(555).default);var k=r.default.add(b.Permissions.READ_MESSAGE_HISTORY,b.Permissions.VIEW_CHANNEL),G=!1,j=null,F=null,x=!1,V=[],B=!1,H={};function W(e){return e&&Date.parse(e)||0}function Y(e,t){var n=E.default.getChannel(e.channel_id);return null!=n&&(!S.default.isBlocked(e.author.id)&&(!!(0,d.default)(e,t.id,C.default.isSuppressEveryoneEnabled(n.guild_id),C.default.isSuppressRolesEnabled(n.guild_id))||!!K(n)))}function K(e){return null!=e&&e.isPrivate()&&!C.default.isGuildOrCategoryOrChannelMuted(e.guild_id,e.id)}function z(){return q.apply(this,arguments)}function q(){return(q=D(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==V.length){e.next=3;break}return B=!1,e.abrupt("return");case 3:return B=!0,t=V.splice(0,100),e.next=7,X((function(){return i.default.post({url:b.Endpoints.BULK_ACK,body:{read_states:t},oldFormErrors:!0})}));case 7:return e.next=9,(0,o.timeoutPromise)(1e3);case 9:z();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return Z.apply(this,arguments)}function Z(){return(Z=D(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<3)){e.next=19;break}return e.prev=2,e.next=5,t();case 5:return e.abrupt("return",e.sent);case 8:if(e.prev=8,e.t0=e.catch(2),U.error("",e.t0),!(n+1<3)){e.next=16;break}return e.next=14,(0,o.timeoutPromise)(2e3*(n+1));case 14:return e.next=16,p.default.awaitOnline();case 16:n++,e.next=1;break;case 19:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function $(e){var t=s.default.getLayout(e.channelId),n=null!=w&&w.isInstanceFocused()&&w.isPinned(b.OverlayWidgets.TEXT),r=A.default.getMessages(e.channelId);return(G||n)&&e.hasUnreadOrMentions()&&v.default.isAtBottom(e.channelId)&&t!==b.ChannelLayouts.NO_CHAT&&t!==b.ChannelLayouts.FULL_SCREEN&&H[e.channelId]&&null!=r&&r.ready&&!r.loadingMore&&!T.default.isIdle()&&!0}var Q=function(){function e(e){this.channelId=e,this._guildId=null,this.loadedMessages=!1,this._lastMessageId=null,this._lastMessageTimestamp=0,this._ackMessageId=null,this._ackMessageTimestamp=0,this.isManualAck=!1,this.ackPinTimestamp=0,this.lastPinTimestamp=0,this._oldestUnreadMessageId=null,this.oldestUnreadMessageIdStale=!1,this.estimated=!1,this.unreadCount=0,this.mentionCount=0,this.outgoingAck=null}e.forEach=function(t){for(var n=0,r=Object.keys(e._readStates);n<r.length;n++){var a=r[n];if(!1===t(e._readStates[a]))break}},e.get=function(t){var n=e._readStates[t];return null==n&&(n=new e(t),e._readStates[t]=n),n},e.getIfExists=function(t){return e._readStates[t]},e.getValue=function(t,n,r){var a=e._readStates[t];return null==a?r:n(a)},e.clear=function(t){return null!=e._readStates[t]&&(delete e._readStates[t],!0)},e.clearAll=function(){e._readStates={}};var t,n,r,a=e.prototype;return a.serialize=function(){return{channelId:this.channelId,_guildId:this._guildId,loadedMessages:this.loadedMessages,lastMessageId:this.lastMessageId,ackMessageId:this.ackMessageId,ackPinTimestamp:this.ackPinTimestamp,isManualAck:this.isManualAck,lastPinTimestamp:this.lastPinTimestamp,_oldestUnreadMessageId:this._oldestUnreadMessageId,oldestUnreadMessageIdStale:this.oldestUnreadMessageIdStale,estimated:this.estimated,unreadCount:this.unreadCount,mentionCount:this.mentionCount}},a.deserialize=function(e){var t=e.channelId,n=e._guildId,r=e.loadedMessages,a=e.lastMessageId,i=e.ackMessageId,o=e.ackPinTimestamp,u=e.isManualAck,l=e.lastPinTimestamp,s=e._oldestUnreadMessageId,c=e.oldestUnreadMessageIdStale,d=e.estimated,f=e.unreadCount,p=e.mentionCount;this.channelId=t,this._guildId=n,this.loadedMessages=r,this.lastMessageId=a,this.ackMessageId=i,this.ackPinTimestamp=o,this.isManualAck=u,this.lastPinTimestamp=l,this._oldestUnreadMessageId=s,this.oldestUnreadMessageIdStale=c,this.estimated=d,this.unreadCount=f,this.mentionCount=p},a.guessAckMessageId=function(){var e=A.default.getMessages(this.channelId);if(null!=this.ackMessageId||!this.isPrivate()||e.hasMoreAfter)return this.ackMessageId;if(!this.hasMentions())return this.lastMessageId;var t=null,n=this.mentionCount,r=N.default.getCurrentUser();return e.forEach((function(e){if(n>0&&e.author.id!==r.id)--n;else if(0===n)return t=e.id,!1}),this,!0),t},a.isPrivate=function(){var e=E.default.getChannel(this.channelId);return null!=e&&e.isPrivate()},a.rebuild=function(e,t,n){var r=this;if(void 0===t&&(t=!1),this.ackMessageId=e||this.ackMessageId||this.guessAckMessageId(),this.isManualAck=null!=e,this.oldestUnreadMessageId=null,this.estimated=!1,this.unreadCount=0,t&&(this.mentionCount=0),this.hasUnread()){var a=N.default.getCurrentUser(),i=this.getAckTimestamp(),o=!1,u=!1,l=null,s=A.default.getMessages(this.channelId);s.forAll((function(e){o?r.oldestUnreadMessageId=r.oldestUnreadMessageId||e.id:o=e.id===r.ackMessageId,h.default.extractTimestamp(e.id)>i?(r.unreadCount++,t&&Y(e,a)&&r.mentionCount++,l=l||e.id):u=!0})),this.estimated=!s.hasPresent()||!(o||u)&&s.length===this.unreadCount,this.oldestUnreadMessageId=this.oldestUnreadMessageId||l}null!=n&&(this.mentionCount=n)},a.hasUnread=function(){return this.getAckTimestamp()<this._lastMessageTimestamp},a.hasMentions=function(){return this.getMentionCount()>0},a.getMentionCount=function(){return this.mentionCount},a.hasUnreadOrMentions=function(){return this.hasMentions()||this.hasUnread()},a.ackPins=function(e){var t=this;if(void 0===e&&(e=null),null==e){if(this.lastPinTimestamp===this.ackPinTimestamp)return!1;X((function(){return i.default.post({url:b.Endpoints.PINS_ACK(t.channelId),oldFormErrors:!0})}))}return this.ackPinTimestamp=W(e)||this.lastPinTimestamp,!0},a.ack=function(e,t,n,r,a,i){var o=this;if(void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===i&&(i={section:b.AnalyticsSections.CHANNEL}),!this._shouldAck(r,t,a))return!1;var u=this.hasMentions();return this.estimated=!1,this.unreadCount=0,this.mentionCount=0,(null!=e||null!=(e=this.lastMessageId))&&(this.ackMessageId=e,this.isManualAck=!1,t?this.oldestUnreadMessageId=null:(null==this.outgoingAck&&setTimeout((function(){o._ack(i),o.outgoingAck=null}),u||n?0:3e3),this.outgoingAck=e),!0)},a._shouldAck=function(e,t,n){return!!e||(!!n||(!!t||!this.isManualAck&&!!this.loadedMessages))},a._ack=function(e){var t=this,n=this.outgoingAck;if(null!=n&&!_.default.isGuest()){var r=_.default.getId(),a=F;X((function(){return i.default.post({url:b.Endpoints.MESSAGE_ACK(t.channelId,n),body:{token:F},oldFormErrors:!0})})).then((function(n){if(null!=n){F===a&&r===_.default.getId()&&(F=n.body.token);var i=E.default.getChannel(t.channelId);(0,l.trackWithMetadata)(b.AnalyticEvents.ACK_MESSAGES,{channel_id:t.channelId,guild_id:null==i?void 0:i.getGuildId(),location:e})}}))}},a.delete=function(t){void 0===t&&(t=!0),t&&i.default.delete({url:b.Endpoints.CHANNEL_ACK(this.channelId),oldFormErrors:!0}),delete e._readStates[this.channelId]},a.shouldDeleteReadState=function(){var e=E.default.getChannel(this.channelId);return 0===y.default.totalUnavailableGuilds&&(null==e||!!f.ALL_CHANNEL_TYPES.has(e.type)&&(!(0,f.isReadableType)(e.type)||!e.isPrivate()&&!I.default.can(k,e)))},a.getAckTimestamp=function(){var e=this._ackMessageTimestamp;if(0===e){e=h.default.extractTimestamp(this.channelId);var t=E.default.getChannel(this.channelId);if(null!=t){var n=t.getGuildId();if(null!=n){var r=g.default.getGuild(n);null!=r&&(e=null!=r.joinedAt?+r.joinedAt:Date.now())}}this._ackMessageTimestamp=e}return e},t=e,(n=[{key:"oldestUnreadMessageId",get:function(){return this._oldestUnreadMessageId},set:function(e){this._oldestUnreadMessageId=e,this.oldestUnreadMessageIdStale=!1}},{key:"lastMessageId",get:function(){return this._lastMessageId},set:function(e){this._lastMessageId=e,this._lastMessageTimestamp=h.default.extractTimestamp(e)}},{key:"ackMessageId",get:function(){return this._ackMessageId},set:function(e){this._ackMessageId=e,this._ackMessageTimestamp=h.default.extractTimestamp(e)}},{key:"guildId",get:function(){if(null!=this._guildId)return this._guildId;var e=E.default.getChannel(this.channelId);return this._guildId=null!=e?e.getGuildId():null}},{key:"oldestUnreadTimestamp",get:function(){return h.default.extractTimestamp(this.oldestUnreadMessageId)}}])&&R(t.prototype,n),r&&R(t,r),e}();function J(e){e.forEach((function(e){if((0,f.isReadableType)(e.type)){var t=Q.get(e.id);t.lastMessageId=e.lastMessageId,t.lastPinTimestamp=W(e.lastPinTimestamp)}}))}function ee(e){if(null!=e){var t=Q.get(e);if($(t))return t.ack()}return!1}function te(e){var t=e.channelId;Q.get(t).rebuild()}function ne(e){var t=e.channelId,n=e.messageId,r=e.manual,a=e.newMentionCount,i=Q.get(t);return r?(i.rebuild(n,!0,a),!0):n!==i.ackMessageId&&i.ack(n,!0)}Q._readStates={};var re=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.waitFor(v.default,N.default,g.default,y.default,m.default,E.default,O.default,A.default,I.default,s.default)},a.hasUnread=function(e){return Q.getValue(e,(function(e){return e.hasUnread()}),!1)},a.hasCategoryUnread=function(e){var t=E.default.getChannel(e);if(null==t)return!1;var n=m.default.getCategories(t.getGuildId());return null!=n[t.id]&&n[t.id].filter((function(e){var t=e.channel,n=t.id,r=t.type,a=t.guild_id;return(0,f.isReadableType)(r)&&!C.default.isGuildOrCategoryOrChannelMuted(a,n)})).map((function(e){var t=e.channel;return Q.get(t.id).hasUnread()})).some((function(e){return e}))},a.getUnreadCount=function(e){return Q.getValue(e,(function(e){return e.unreadCount}),0)},a.getMentionCount=function(e){return Q.getValue(e,(function(e){return e.getMentionCount()}),0)},a.ackMessageId=function(e){return Q.getValue(e,(function(e){return e.ackMessageId}),null)},a.lastMessageId=function(e){return Q.getValue(e,(function(e){return e.lastMessageId}),null)},a.lastPinTimestamp=function(e){return Q.getValue(e,(function(e){return e.lastPinTimestamp}),null)},a.getOldestUnreadMessageId=function(e){return Q.getValue(e,(function(e){return e.oldestUnreadMessageId}),null)},a.getOldestUnreadTimestamp=function(e){return Q.getValue(e,(function(e){return e.oldestUnreadTimestamp}),0)},a.isEstimated=function(e){return Q.getValue(e,(function(e){return e.estimated}),!1)},a.hasUnreadPins=function(e){return Q.getValue(e,(function(e){return e.lastPinTimestamp>e.ackPinTimestamp}),!1)},a.getAllReadStates=function(){var e=[];return Q.forEach((function(t){null==E.default.getChannel(t.channelId)||t.shouldDeleteReadState()||e.push(t.serialize())})),e},r}(a.default.Store))(u.default,{CONNECTION_OPEN:function(e){var t=e.channels,n=e.readState;F=null,x||n.partial||Q.clearAll(),x=!1;var r=[];n.entries.forEach((function(e){var t=Q.get(e.id);t.shouldDeleteReadState()?r.push(t):(t.mentionCount=e.mention_count||0,t.ackMessageId=e.last_message_id,t.ackPinTimestamp=W(e.last_pin_timestamp))})),r.length>0&&(U.log("Deleting "+r.length+" read states."),r.forEach((function(e){return e.delete()}))),J(t)},OVERLAY_INITIALIZE:function(e){var t=e.readStates,n=e.selectedChannelId;F=null,j=n,Q.clearAll();var r=[];t.forEach((function(e){var t=Q.get(e.channelId);t.shouldDeleteReadState()?r.push(t):(t.deserialize(e),t.rebuild())})),r.length>0&&(U.log("Deleting "+r.length+" read states."),r.forEach((function(e){return e.delete()})))},CACHE_LOADED:function(e){var t=e.readStates;x=!0,t.forEach((function(e){Q.get(e.channelId).deserialize(e)}))},GUILD_CREATE:function(e){var t=e.guild;t.channels.forEach((function(e){var t=Q.getIfExists(e.id);null!=t&&t.shouldDeleteReadState()&&t.delete(!1)})),J(t.channels)},LOAD_MESSAGES_SUCCESS:function(e){var t=e.channelId,n=e.isAfter,r=e.messages,a=Q.get(t);a.loadedMessages=!0;var i=A.default.getMessages(t);i&&(i.hasPresent()||i.jumpTargetId===a.ackMessageId?a.rebuild():n&&null!=a.ackMessageId&&i.has(a.ackMessageId,!0)&&(a.unreadCount+=r.length,null==a.oldestUnreadMessageId&&a.rebuild()))},MESSAGE_CREATE:function(e){var t=e.channelId,n=e.message,r=e.isPushNotification,a=Q.get(t);a.lastMessageId=n.id;var i=N.default.getNullableCurrentUser();if(null!=n.author&&null!=i&&n.author.id===i.id)return ne({channelId:t,messageId:n.id,manual:!1});var o=O.default.getChannelId();return o===t&&$(a)&&!r||null!=w&&w.isInstanceFocused()&&o===t&&w.isInstanceUILocked()&&w.isPinned(b.OverlayWidgets.TEXT)?a.ack(n.id):((null==a.oldestUnreadMessageId||a.oldestUnreadMessageIdStale)&&(a.oldestUnreadMessageId=n.id),a.unreadCount++,void(S.default.isBlocked(n.author.id)||(null!=i&&(0,d.isRawMessageMentioned)(n,i.id,C.default.isSuppressEveryoneEnabled(a.guildId),C.default.isSuppressRolesEnabled(a.guildId))||K(E.default.getChannel(t)))&&a.mentionCount++))},MESSAGE_DELETE:te,MESSAGE_DELETE_BULK:te,MESSAGE_ACK:ne,CHANNEL_ACK:function(e){var t=e.channelId,n=e.messageId,r=void 0===n?void 0:n,a=e.immediate,i=void 0!==a&&a,o=e.force,u=void 0!==o&&o,l=e.context,s=e.location,c=Q.get(t),d=c.ack(r,l!==b.CURRENT_APP_CONTEXT,i,u,!0,s);return null!=r?(c.rebuild(),!0):d},CHANNEL_LOCAL_ACK:function(e){var t=e.channelId;return Q.get(t).ack(void 0,!0,void 0,void 0,!0)},CHANNEL_PINS_ACK:function(e){var t=e.channelId,n=e.timestamp;return Q.get(t).ackPins(n)},CHANNEL_PINS_UPDATE:function(e){var t=e.channelId,n=e.lastPinTimestamp,r=Q.get(t),a=W(n);return r.lastPinTimestamp!==a&&(r.lastPinTimestamp=a,!0)},CHANNEL_UNREAD_UPDATE:function(e){var t=e.channelUnreadUpdates,n=!1;return t.forEach((function(e){var t=Q.get(e.id);t.lastMessageId!==e.last_message_id&&(t.lastMessageId=e.last_message_id,n=!0)})),n},CHANNEL_SELECT:function(e){var t=e.channelId,n=!1;if(null!=j&&(Q.get(j).isManualAck=!1),j!==t&&null!=j){var r=Q.get(j);r.hasUnread()||(r.oldestUnreadMessageId=null,n=!0)}return j===t&&(n=ee(t)||n),j=t,n},CHANNEL_CREATE:function(e){var t=e.channel;if(!(0,f.isReadableType)(t.type))return!1;var n=Q.get(t.id);n.lastMessageId=t.lastMessageId,n.lastPinTimestamp=W(t.lastPinTimestamp)},CHANNEL_DELETE:function(e){var t=e.channel;return Q.clear(t.id)},WINDOW_FOCUS:function(e){if(G=e.focused,null==j)return!1;var t=Q.get(j);G||t.hasUnread()||(t.oldestUnreadMessageIdStale=!0);var n=s.default.getLayout(j);return(!G||n!==b.ChannelLayouts.NO_CHAT&&n!==b.ChannelLayouts.FULL_SCREEN)&&ee(j)},UPDATE_CHANNEL_DIMENSIONS:function(e){return ee(e.channelId)},CURRENT_USER_UPDATE:function(e){F=null},DRAWER_OPEN:function(e){return function(){if(null!=j){var e=Q.get(j);e.hasUnread()||(e.oldestUnreadMessageIdStale=!0)}return!1}()},DRAWER_CLOSE:function(e){return ee(j)},BULK_ACK:function(e){var t=e.channels,n=e.context,r=t.filter((function(e){return null!=e.messageId&&re.hasUnread(e.channelId)}));r.forEach((function(e){var t=e.channelId,n=e.messageId;Q.get(t).ack(n,!0,void 0,void 0,!0)})),n===b.CURRENT_APP_CONTEXT&&(V.push.apply(V,r.map((function(e){return{channel_id:e.channelId,message_id:e.messageId}}))),B||z())},ENABLE_AUTOMATIC_ACK:function(e){var t=e.channelId;return H[t]=!0,ee(t)},DISABLE_AUTOMATIC_ACK:function(e){var t=e.channelId;return H[t]=!1,!1}}),ae=re;t.default=ae},8334:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.hash?(0,r.parse)(e.hash):null;if(t&&null!=t.token)return t.token;var n=e.search?(0,r.parse)(e.search):null;if(n&&null!=n.token)return n.token;return null};var r=n(1414)},838:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startStream=function(e,t,n){i.default.dispatch(g({type:E.ActionTypes.STREAM_START,streamType:null!=e?o.StreamTypes.GUILD:o.StreamTypes.CALL,guildId:e,channelId:t,appContext:__OVERLAY__?E.AppContext.OVERLAY:E.AppContext.APP},n))},t.setStreamPaused=function(e,t){var n=(0,u.encodeStreamKey)(e);i.default.dispatch({type:E.ActionTypes.STREAM_SET_PAUSED,streamKey:n,paused:t})},t.watchStream=A,t.watchStreamAndTransitionToStream=function(e,t){var n=e.guildId,r=e.channelId;if(null!=n&&T(n,r))return;A(e,t),(0,l.default)(e)},t.stopStream=function(e,t){void 0===t&&(t=!0);I(e,t),i.default.dispatch({type:E.ActionTypes.STREAM_STOP,streamKey:e,appContext:__OVERLAY__?E.AppContext.OVERLAY:E.AppContext.APP})},t.closeStream=I,t.fetchStreamPreview=function(e,t,n){return S.apply(this,arguments)},t.setLayout=function(e){i.default.dirtyDispatch({type:E.ActionTypes.STREAM_LAYOUT_UPDATE,layout:e})},t.setHackyMacMode=function(e){i.default.dirtyDispatch({type:E.ActionTypes.STREAM_SET_HACKY_MAC_MODE,enabled:e})},t.notifyStreamStart=function(e){return O.apply(this,arguments)},t.updateStreamSettings=function(e){i.default.dispatch(g({type:E.ActionTypes.STREAM_UPDATE_SETTINGS},e))};var r=v(n(18)),a=v(n(15)),i=v(n(3)),o=n(219),u=n(200),l=v(n(1468)),s=v(n(272)),c=v(n(20)),d=v(n(29)),f=v(n(34)),p=v(n(199)),h=n(553),_=v(n(1436)),E=n(1);function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){y(i,r,a,o,u,"next",e)}function u(e){y(i,r,a,o,u,"throw",e)}o(void 0)}))}}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){var n=d.default.getChannel(t);return(0,r.default)(null!=n,"Cannot join a null voice channel"),!p.default.getVoiceStatesForChannel(n).some((function(e){return e.userId===c.default.getId()}))&&(0,h.isChannelFull)(n,p.default,f.default)}function A(e,t){var n=e.guildId,r=e.channelId;if(null==n||!T(0,r)){var a=(0,u.encodeStreamKey)(e),o=(null==t?void 0:t.forceMultiple)||s.default.getAllActiveStreamsForChannel(r).filter((function(e){return e.ownerId!==c.default.getId()})).length>=2;i.default.dispatch({type:E.ActionTypes.STREAM_WATCH,streamKey:a,allowMultiple:o}),o||(null==t?void 0:t.noFocus)||_.default.selectParticipant(e.channelId,a)}}function I(e,t){void 0===t&&(t=!0),i.default.dispatch({type:E.ActionTypes.STREAM_CLOSE,streamKey:e,canShowFeedback:t})}function S(){return(S=m(regeneratorRuntime.mark((function e(t,n,r){var l,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=(0,u.encodeStreamKey)({streamType:null!=t?o.StreamTypes.GUILD:o.StreamTypes.CALL,guildId:t,channelId:n,ownerId:r}),i.default.dispatch({type:E.ActionTypes.STREAM_PREVIEW_FETCH_START,streamKey:l}),e.prev=2,e.next=5,a.default.get({url:E.Endpoints.STREAM_PREVIEW(l),query:{version:Date.now()},oldFormErrors:!0});case 5:s=e.sent,i.default.dispatch({type:E.ActionTypes.STREAM_PREVIEW_FETCH_SUCCESS,streamKey:l,previewURL:s.body.url}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),429===e.t0.status&&(c=1e3*e.t0.body.retry_after),i.default.dispatch({type:E.ActionTypes.STREAM_PREVIEW_FETCH_FAIL,streamKey:l,retryAfter:c});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function O(){return(O=m(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.default.post({url:E.Endpoints.STREAM_NOTIFY(t),oldFormErrors:!0});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}},844:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WaveStates=t.POINT_TENSION_DEFAULT=t.TWO_PI=t.MAX_RADIUS=t.MIN_RADIUS=t.NOOP=void 0;t.NOOP=function(){};t.MIN_RADIUS=780;t.MAX_RADIUS=1e3;var r=2*Math.PI;t.TWO_PI=r;t.POINT_TENSION_DEFAULT=150;t.WaveStates={INITIAL:0,ENTERED:1,FILLING:2,FILLED:3}},850:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(n(7)),a=d(n(5)),i=d(n(15)),o=d(n(3)),u=d(n(29)),l=d(n(98)),s=d(n(271)),c=n(1);function d(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var p={},h={};function _(e,t){void 0===e&&(e=!1),void 0===t&&(t=l.default.getChannelId());var n=u.default.getChannel(t);return!(null==n||null!=n.getGuildId()||null==t||null!=p[t]&&!e)&&(p[t]=p[t]||{channelId:t,ringing:[]},o.default.dirtyDispatch({type:c.ActionTypes.CALL_CONNECT,channelId:t}),!0)}var E=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.waitFor(s.default,l.default)},a.getCall=function(e){return p[e]},a.getCalls=function(){return Object.values(p)},a.getMessageId=function(e){var t=this.getCall(e);return null!=t?t.messageId:null},a.isCallActive=function(e,t){var n=p[e];return null!=n&&!n.unavailable&&(t?n.messageId===t:null!=n.region)},a.isCallUnavailable=function(e){var t=p[e];return null!=t&&t.unavailable},a.getInternalState=function(){return{calls:p,enqueuedRings:h}},r}(a.default.Store))(o.default,{CONNECTION_OPEN:function(e){return _(!0)},CONNECTION_CLOSED:function(e){return p={},void(h={})},OVERLAY_INITIALIZE:function(e){var t=e.callStoreInternalState;p=f({},t.calls),h=f({},t.enqueuedRings)},CONNECTION_RESUMED:function(e){return _(!0)},CHANNEL_SELECT:function(e){return _(!1,e.channelId)},CHANNEL_DELETE:function(e){var t=e.channel;if(null!=h[t.id]&&delete h[t.id],null==p[t.id])return!1;delete p[t.id]},CALL_CREATE:function(e){var t=e.channelId,n=e.messageId,r=e.region,a=e.ringing;if(p[t]={channelId:t,messageId:n,region:r,ringing:a,unavailable:!1},null!=h[t]){var o=h[t];delete h[t],1!==o.indexOf("all")&&(o=null),i.default.post({url:c.Endpoints.CALL_RING(t),body:{recipients:o},oldFormErrors:!0})}},CALL_UPDATE:function(e){var t=e.channelId,n=e.messageId,r=e.region,a=e.ringing;p[t]=f({},p[t],{messageId:n,region:r,ringing:a})},CALL_DELETE:function(e){var t=e.channelId,n=e.unavailable,r=p[t];p[t]=!0===n&&null!=r?f({},r,{unavailable:n}):{channelId:t,ringing:[],messageId:null,region:null,unavailable:n},null!=h[t]&&delete h[t]},CALL_ENQUEUE_RING:function(e){var t=e.channelId,n=e.recipients;h[t]=r.default.union(h[t]||[],n||["all"])},VOICE_CHANNEL_SELECT:function(e){null==e.channelId&&(h={})}});t.default=E},860:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connect=function(){r.default.connect()},t.disconnect=function(){r.default.disconnect()},t.setReceiveHandler=function(e){__OVERLAY__?r.default.subscribe(o.RPCEvents.OVERLAY,{},(function(t){return e((0,i.deserializeObject)(t))})):(a.default.setCommandHandler(o.RPCCommands.OVERLAY,{scope:o.RPC_PRIVATE_SCOPE,handler:function(t){var n=t.args;e((0,i.deserializeObject)(n))}}),a.default.setEventHandler(o.RPCEvents.OVERLAY,{scope:o.RPC_PRIVATE_SCOPE,handler:function(){}}))},t.send=function(e){__OVERLAY__?r.default.request(o.RPCCommands.OVERLAY,(0,i.serializeObject)(e)):a.default.dispatchToSubscriptions(o.RPCEvents.OVERLAY,{},(0,i.serializeObject)(e))};var r=u(n(1387)),a=u(n(820)),i=n(4839),o=n(1);function u(e){return e&&e.__esModule?e:{default:e}}},874:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(29)),a=o(n(101)),i=o(n(6));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n){if(null==n)return null;if(null!=e)return a.default.getNick(e,n.id);if(null!=t){var i=r.default.getChannel(t);if(null!=i&&null!=i.nicks&&i.isManaged())return i.nicks[n.id]}return null}var l={getNickname:u,getName:function(e,t,n){return null==n?i.default.Messages.UNKNOWN_USER:u(e,t,n)||n.username}};t.default=l},880:function(e,t,n){"use strict";var r,a,i;Object.defineProperty(t,"__esModule",{value:!0}),t.PIP_WIDTH=t.LAST_VOICE_FEEDBACK_DATE_STORAGE_KEY=t.END_VOICE_FEEDBACK_COOLDOWN=t.FEEDBACK_FREEFORM_LENGTH=t.END_STREAM_FEEDBACK_CHANCE=t.END_VOICE_FEEDBACK_CHANCE=t.FeedbackRating=t.ParticipantSelectionTypes=t.ParticipantTypes=void 0,t.ParticipantTypes=r,function(e){e[e.STREAM=0]="STREAM",e[e.USER=1]="USER"}(r||(t.ParticipantTypes=r={})),t.ParticipantSelectionTypes=a,function(e){e.NONE="NONE",e.AUTO="AUTO"}(a||(t.ParticipantSelectionTypes=a={})),t.FeedbackRating=i,function(e){e.BAD="bad",e.NEUTRAL="neutral",e.GOOD="good"}(i||(t.FeedbackRating=i={}));t.END_VOICE_FEEDBACK_CHANCE=.2;t.END_STREAM_FEEDBACK_CHANCE=.2;t.FEEDBACK_FREEFORM_LENGTH=1024;t.END_VOICE_FEEDBACK_COOLDOWN=864e5;t.LAST_VOICE_FEEDBACK_DATE_STORAGE_KEY="lastVoiceFeedback";t.PIP_WIDTH=320},886:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCurrentUser=function(e){void 0===e&&(e={});var t=e.withAnalyticsToken,n=void 0!==t&&t;return r.default.get({url:u.Endpoints.ME,query:{with_analytics_token:n},oldFormErrors:!0}).then((function(e){return a.default.dispatch({type:u.ActionTypes.CURRENT_USER_UPDATE,user:e.body,analyticsToken:n?e.body.analytics_token:void 0}),new i.default(e.body)}))},t.acceptAgreements=function(e,t){void 0===e&&(e=!0);void 0===t&&(t=!0);return r.default.patch({url:u.Endpoints.USER_AGREEMENTS,body:{terms:e,privacy:t},oldFormErrors:!0}).then((function(){return!0}),(function(){return!1}))},t.setFlag=function(e,t){var n=o.default.getCurrentUser(),a=t?n.flags|e:n.flags&~e;return r.default.patch({url:u.Endpoints.ME,body:{flags:a},oldFormErrors:!0})},t.getUser=function(e){var t=o.default.getUser(e);if(null!=t)return Promise.resolve(t);return r.default.get({url:u.Endpoints.USER(e),oldFormErrors:!0}).then((function(t){return a.default.dispatch({type:u.ActionTypes.USER_UPDATE,user:t.body}),o.default.getUser(e)}))};var r=l(n(15)),a=l(n(3)),i=l(n(147)),o=l(n(24)),u=n(1);function l(e){return e&&e.__esModule?e:{default:e}}},888:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=s(n(5)),i=s(n(3)),o=s(n(353)),u=s(n(84)),l=s(n(95));n(1);function s(e){return e&&e.__esModule?e:{default:e}}function c(e){var t={os:e.os,name:e.name};return null!=e.arguments&&(t.arguments=e.arguments),null!=e.isLauncher&&(t.is_launcher=e.isLauncher),t}var d=new(function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=a.prototype;return i.getGameForPID=function(e){if(__OVERLAY__)return null;if(null==e)return null;var t=l.default.getGameNameForPID(e);return u.default.getGameByName(t)},i.getGame=function(){return __OVERLAY__?r:null},i.getGameAsJSON=function(e){var t=this.getGameForPID(e);return null==t?null:{id:t.id,name:t.name,description:t.description,icon:t.icon,splash:t.splash,overlay:t.overlay,overlay_warn:t.overlayWarn,aliases:[].concat(t.aliases),publishers:[].concat(t.publishers),developers:[].concat(t.developers),third_party_skus:[].concat(t.thirdPartySkus),executables:t.executables.map(c),hashes:[].concat(t.hashes)}},a}(a.default.Store))(i.default,{OVERLAY_INITIALIZE:function(e){r=null!=e.currentGame?new o.default(e.currentGame):null}});t.default=d},8925:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(5)),a=o(n(3)),i=n(1);function o(e){return e&&e.__esModule?e:{default:e}}var u={};var l=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.getState=function(e){return u[e]},r}(r.default.Store))(a.default,{NATIVE_APP_MODAL_OPENING:function(e){var t=e.code;u[t]=i.NativeAppStates.OPENING},NATIVE_APP_MODAL_OPENED:function(e){var t=e.code;u[t]=i.NativeAppStates.OPEN},NATIVE_APP_MODAL_OPEN_FAILED:function(e){var t=e.code;u[t]=i.NativeAppStates.OPEN_FAIL}});t.default=l},8926:function(e,t,n){e.exports=n.p+"e0c782560fd96acd7f01fda1f8c6ff24.svg"},893:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStreamerActivityByUserId=i,t.getStreamerActivity=o,t.getStreamerApplication=function(e,t){if(null==e)return null;var n=o(e,t);if(null==n)return null;return{id:n.application_id,name:n.name}};var r=n(1);function a(e){return e.type===r.ActivityTypes.PLAYING}function i(e,t){return t.findActivity(e,a)}function o(e,t){return null!=e?i(e.ownerId,t):null}},9193:function(e,t,n){e.exports=n.p+"17192d3fe939ecf404e8cdd64b340469.svg"},9194:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=y;E(n(0));var r,a=h(n(9)),i=h(n(292)),o=h(n(61)),u=E(n(549)),l=h(n(68)),s=n(1),c=h(n(6)),d=h(n(7032)),f=h(n(843)),p=h(n(829));function h(e){return e&&e.__esModule?e:{default:e}}function _(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _=function(){return e},e}function E(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function y(e){var t=e.text,r=e.buttonCta,h=e.theme,_=void 0===h?s.ThemeTypes.DARK:h,E=e.onClick;return v(u.default,{theme:_},void 0,v(u.Image,{src:n(10510)}),v(u.Title,{className:(0,a.default)(p.default.marginTop20,p.default.marginBottom8,f.default.flexCenter)},void 0,c.default.Messages.DISCORD_DESC_SHORT),v(u.SubTitle,{className:p.default.marginBottom40},void 0,c.default.Messages.DISCORD_DESC_LONG),v(i.default,{className:d.default.card,type:i.default.Types.CUSTOM},void 0,v("img",{alt:"",className:d.default.cardAccentLeft,src:n(10511)}),v("img",{alt:"",className:d.default.cardAccentRight,src:n(10512)}),v(o.default,{className:d.default.cardContents,direction:o.default.Direction.VERTICAL,align:o.default.Align.STRETCH,grow:0},void 0,v(l.default,{tag:"strong",className:d.default.buttonTitle,size:l.default.Sizes.SIZE_16,style:{color:s.Colors.PRIMARY_DARK_300}},void 0,t),v(u.Button,{className:d.default.button,onClick:E},void 0,r))))}y.displayName="InvalidMobileCodedLink"},9195:function(e,t,n){e.exports=n.p+"375217725f8ad1df6310e6738a7306e4.svg"},9196:function(e,t,n){e.exports=n.p+"bdcfee0c4d9fb22ce3c47b593df14254.svg"},9197:function(e,t,n){e.exports=n.p+"ab4f6c12a1ced9de8b5d279056f21334.svg"},924:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=p(n(7)),i=p(n(118)),o=p(n(5)),u=p(n(26)),l=p(n(3)),s=p(n(4840)),c=p(n(4841)),d=n(1399),f=n(1);function p(e){return e&&e.__esModule?e:{default:e}}function h(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var v,y,m=((r={})[f.OverlayWidgets.GUILDS]={minSize:{width:312,height:300},resizeX:!1,resizeY:!0,dragAnywhere:!1,layoutPolicy:f.OverlayWidgetLayoutPolicy.OPTIONAL,defaultSettings:{anchor:{left:.175,top:.15,bottom:null,right:null},size:{width:"auto",height:.65},pinned:!1}},r[f.OverlayWidgets.TEXT]={minSize:{width:430,height:300},resizeX:!0,resizeY:!0,dragAnywhere:!1,layoutPolicy:f.OverlayWidgetLayoutPolicy.OPTIONAL,defaultSettings:{anchor:{left:.26,top:.15,bottom:null,right:null},size:{width:.565,height:.65},pinned:!0}},r[f.OverlayWidgets.VOICE]={minSize:{width:272,height:100},resizeX:!1,resizeY:!1,dragAnywhere:!0,layoutPolicy:f.OverlayWidgetLayoutPolicy.REQUIRED,defaultSettings:{anchor:{left:.011,top:.011,bottom:null,right:null},size:{width:"auto",height:"auto"},pinned:!0}},r[f.OverlayWidgets.GUILDS_TEXT]={minSize:{height:300,width:610},resizeX:!0,resizeY:!0,dragAnywhere:!1,layoutPolicy:f.OverlayWidgetLayoutPolicy.OPTIONAL_DEFAULT,defaultSettings:{anchor:{left:.15,top:.15,bottom:null,right:null},size:{width:.7,height:.65},pinned:!1}},r[f.OverlayWidgets.LOBBY_VOICE]={minSize:{width:272,height:100},resizeX:!1,resizeY:!1,dragAnywhere:!0,layoutPolicy:f.OverlayWidgetLayoutPolicy.REQUIRED,defaultSettings:{anchor:{left:null,top:.011,bottom:null,right:.011},size:{width:"auto",height:"auto"},pinned:!0}},r);function g(e,t){var n=y[e];if(null==n)return!1;var r=v[n.layoutId];return null!=r&&t(n,r)}function T(e,t){var n;y=E({},y,((n={})[e.id]=e.set("zIndex",t),n))}function A(e){var t=m[e];return null!=t?t.defaultSettings:null}var I=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.initialize=function(e){var t,n,r,o,u=this;if(null!=e&&e.layouts&&e.widgets){var l=e.layouts,d=e.widgets;r=l,o={},a.default.forEach(r,(function(e,t){o[t]=new s.default(e)})),v=o,t=d,n={},a.default.forEach(t,(function(e,t){n[t]=new c.default(e)})),y=n}else v={},y={};var p=!1,_=[];a.default.forEach(m,(function(e,t){e.layoutPolicy===f.OverlayWidgetLayoutPolicy.REQUIRED&&_.push(t)})),a.default.forEach(v,(function(e,t){for(var n,r,a=u.getWidgetsForLayout(t),o=!1,l=function(){var e,r=n.value,l=a.find((function(e){return e.type===r}));if(null!=l)return"continue";o=p=!0;var s=i.default.v4();l=new c.default(E({},u.getWidgetDefaultSettings(r),{type:r,id:s,layoutId:t,zIndex:a.length})),a.push(l),y=E({},y,((e={})[s]=l,e))},s=h(_);!(n=s()).done;)l();o&&(e=e.set("widgets",a.map((function(e){return e.id}))),v=E({},v,((r={})[t]=e,r)))})),a.default.forEach(y,(function(e,t){var n=v[e.layoutId];(null==n||n.widgets.indexOf(t)<0)&&(delete(y=E({},y))[t],p=!0)})),p&&(this.persist(),this.emitChange())},o.getState=function(){return{layouts:v,widgets:y}},o.getLayouts=function(){return v},o.getLayout=function(e){return v[e]},o.getAllWidgets=function(){return y},o.getWidget=function(e){return y[e]},o.getWidgetsForLayout=function(e){var t=this,n=this.getLayout(e);return null==n?[]:n.widgets.reduce((function(e,n){var r=t.getWidget(n);return null!=r&&e.push(r),e}),[])},o.getWidgetConfig=function(e){return m[e]},o.getWidgetDefaultSettings=function(e){return A(e)},o.getWidgetType=function(e){var t=y[e];return null!=t?t.type:""},o.getRegisteredWidgets=function(){return m},o.getDefaultLayout=function(e){var t=[];return a.default.forEach(this.getRegisteredWidgets(),(function(n,r){switch(n.layoutPolicy){case f.OverlayWidgetLayoutPolicy.REQUIRED:case f.OverlayWidgetLayoutPolicy.OPTIONAL_DEFAULT:t.push(E({},n.defaultSettings,{type:r,id:i.default.v4(),layoutId:e}))}})),t},r}(o.default.PersistedStore);I.persistKey="LayoutStore",I.migrations=[function(){var e=E({},u.default.get("OverlayStore")),t=e.pinnedWidgets,n=e.positions,r=e.sizes;if(5===e.v&&t){var a="migrated",i=[],o=t.map((function(e){var t=null!=n?n[e]:null,o=null!=r?r[e]:null,u={id:e,layoutId:a,type:e,anchor:t||{top:-1,left:-1,bottom:null,right:null},size:o||{width:-1,height:-1},pinned:!0,zIndex:0};return i.push([u.id,u]),u.id}));return{layouts:[[a,{id:a,widgets:o}]],widgets:i}}return{layouts:[],widgets:[]}},function(e){var t=e.layouts,n=e.widgets,r=new Set(Object.keys(f.OverlayWidgets)),a=Array.from(n).filter((function(e){var t=e[0];return!r.has(t)})),o=Array.from(t).filter((function(e){return"migrated"!==e[0]}));return o.forEach((function(e){var t=e[0],n=e[1],r=null,o=null;if(n.widgets.find((function(e){var n=a.find((function(n){var r=n[0],a=n[1];return r===e&&a.layoutId===t}));return null!=n&&(null==o&&n[1].type===f.OverlayWidgets.VOICE&&(o=n[0]),null==r&&n[1].type===f.OverlayWidgets.TEXT&&(r=n[1].pinned),null!=r&&null!=o||void 0)})),!r&&o){var u=i.default.v4();n.widgets=[o,u],a.push([u,E({},A(f.OverlayWidgets.GUILDS_TEXT),{type:f.OverlayWidgets.GUILDS_TEXT,id:u,layoutId:t,zIndex:2})])}})),{widgets:a,layouts:o}},function(e){var t=e.layouts,n=e.widgets;return{layouts:t.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e}),{}),widgets:n.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e}),{})}}];var S=new I(l.default,{LAYOUT_CREATE:function(e){var t,n=e.layoutId,r=e.widgets,a=e.defaultResolution;if(null!=v[n])return!1;var o=[];r.forEach((function(e,t){var n,r=function(e){var t=v.migrated;if(t)for(var n,r=h(t.widgets);!(n=r()).done;){var a=n.value,i=y[a];if(i&&i.type===e)return i}return null}(e.type),u=E({},e,{zIndex:t});""===u.id&&(u.id=i.default.v4()),null!=r&&(u.pinned=r.pinned,-1!==r.anchor.left&&(u.anchor=(0,d.getAnchorPercentageFromLayoutSize)(r.anchor,a)),-1!==r.size.width&&(u.size=(0,d.getSizePercentageFromSize)(r.size,a))),y=E({},y,((n={})[u.id]=new c.default(u),n)),o.push(u.id)})),v=E({},v,((t={})[n]=new s.default({id:n,widgets:o}),t))},LAYOUT_SET_PINNED:function(e){return g(e.widgetId,(function(e,t){!function(e){var t;y=E({},y,((t={})[e.id]=e.set("pinned",!e.pinned),t))}(e)}))},LAYOUT_UPDATE_WIDGET:function(e){var t=e.widgetId,n=e.anchor,r=e.size;return g(t,(function(e,t){return function(e,t,n){var r;y=E({},y,((r={})[e.id]=e.merge({anchor:t,size:n}),r))}(e,n,r)}))},LAYOUT_SET_TOP_WIDGET:function(e){return g(e.widgetId,(function(e,t){return function(e,t){var n=function(e){var t=[];return e.widgets.forEach((function(e){var n=y[e];null!=n&&t.push(n)})),t}(e);n.sort((function(e,t){return e.zIndex-t.zIndex}));var r=n.findIndex((function(e){return e.id===t}));if(r===n.length-1)return!1;n.push(n.splice(r,1)[0]);for(var a=0;a<n.length;a++){T(n[a],a)}return!0}(t,e.id)}))},LAYOUT_DELETE_WIDGET:function(e){var t=e.widgetId;delete(y=E({},y))[t],a.default.forEach(v,(function(e,n){if("migrated"!==n){var r=e.widgets.indexOf(t);if(r>=0){var a,i=[].concat(e.widgets);i.splice(r,1),v=E({},v,((a={})[n]=e.set("widgets",i),a))}}}))},LAYOUT_DELETE_ALL_WIDGETS:function(e){var t,n=e.layoutId,r=v[n];if(null==r)return!1;r.widgets.forEach((function(e){delete(y=E({},y))[e]})),v=E({},v,((t={})[r.id]=r.set("widgets",[]),t))},LAYOUT_CREATE_WIDGETS:function(e){e.widgetConfigs.forEach((function(e){var t,n,r=new c.default(e),a=v[r.layoutId];if(null==a)throw new Error("LayoutStore - handleAddWidget: Invalid layoutId");r=r.set("zIndex",a.widgets.length),y=E({},y,((t={})[r.id]=r,t));var i=[].concat(a.widgets,[r.id]);v=E({},v,((n={})[a.id]=a.set("widgets",i),n))}))}});t.default=S}}]);
//# sourceMappingURL=e00477017e2b1cdb9f5d.js.map